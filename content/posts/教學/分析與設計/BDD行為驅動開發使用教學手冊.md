---
title: "BDDè¡Œç‚ºé©…å‹•é–‹ç™¼ä½¿ç”¨æ•™å­¸æ‰‹å†Š"
date: 2025-11-07
draft: false
categories: ["æ•™å­¸"]
tags: ["BDD", "åˆ†æèˆ‡è¨­è¨ˆ", "éœ€æ±‚åˆ†æ", "Gherkin", "æ¸¬è©¦é©…å‹•é–‹ç™¼"]
description: "å®Œæ•´çš„ BDD (Behavior-Driven Development) è¡Œç‚ºé©…å‹•é–‹ç™¼æ•™å­¸æ‰‹å†Š,é©åˆç³»çµ±åˆ†æå¸«èˆ‡é–‹ç™¼åœ˜éšŠå­¸ç¿’"
author: ["Eric Cheng"]
---

# BDD è¡Œç‚ºé©…å‹•é–‹ç™¼ä½¿ç”¨æ•™å­¸æ‰‹å†Š

## ğŸ“˜ æ‰‹å†Šèªªæ˜

æœ¬æ‰‹å†Šå°ˆç‚º**ç³»çµ±åˆ†æå¸«ï¼ˆSAï¼‰**ã€**æ¥­å‹™åˆ†æå¸«ï¼ˆBAï¼‰**ã€**é–‹ç™¼äººå“¡**èˆ‡**æ¸¬è©¦äººå“¡**è¨­è¨ˆ,æ—¨åœ¨å”åŠ©åœ˜éšŠæˆå“¡:

- ç†è§£ BDD çš„æ ¸å¿ƒæ¦‚å¿µèˆ‡åƒ¹å€¼
- æŒæ¡ Gherkin èªæ³•èˆ‡è¦æ ¼æ’°å¯«
- å­¸æœƒå°‡æ¥­å‹™éœ€æ±‚è½‰æ›ç‚ºå¯åŸ·è¡Œçš„è¡Œç‚ºè¦æ ¼
- å»ºç«‹ BDD å”ä½œé–‹ç™¼æµç¨‹
- å¯¦è¸ BDD è‡ªå‹•åŒ–æ¸¬è©¦

**é©ç”¨å°è±¡**:
- æ–°é€²ç³»çµ±åˆ†æå¸«
- æƒ³å°å…¥ BDD çš„é–‹ç™¼åœ˜éšŠ
- éœ€è¦å¼·åŒ–éœ€æ±‚æºé€šçš„å°ˆæ¡ˆç¶“ç†
- è² è²¬é©—æ”¶æ¸¬è©¦çš„ QA äººå“¡

**ä½¿ç”¨æ–¹å¼**:
1. å¾ªåºé–±è®€å„ç« ç¯€,å»ºç«‹å®Œæ•´æ¦‚å¿µ
2. åƒè€ƒå¯¦å‹™æ¡ˆä¾‹,æ¨¡æ“¬å¯¦éš›å ´æ™¯
3. ä½¿ç”¨é™„éŒ„çš„æ¨¡æ¿èˆ‡æª¢æŸ¥æ¸…å–®
4. åœ¨å°ˆæ¡ˆä¸­é€æ­¥å°å…¥èˆ‡å¯¦è¸

---

## ğŸ“‘ ç›®éŒ„

### [ç¬¬ä¸€ç« ã€€èªè­˜ BDD:è¡Œç‚ºé©…å‹•é–‹ç™¼çš„æ ¸å¿ƒç†å¿µ](#ç¬¬ä¸€ç« èªè­˜-bddè¡Œç‚ºé©…å‹•é–‹ç™¼çš„æ ¸å¿ƒç†å¿µ)

- [1.1 ä»€éº¼æ˜¯ BDD](#11-ä»€éº¼æ˜¯-bdd)
- [1.2 BDD èˆ‡ TDDã€ATDD çš„å·®ç•°](#12-bdd-èˆ‡-tddatdd-çš„å·®ç•°)
- [1.3 ç‚ºä»€éº¼è¦å°å…¥ BDD](#13-ç‚ºä»€éº¼è¦å°å…¥-bdd)
- [1.4 BDD çš„åƒ¹å€¼èˆ‡æ‡‰ç”¨å ´æ™¯](#14-bdd-çš„åƒ¹å€¼èˆ‡æ‡‰ç”¨å ´æ™¯)
- [1.5 BDD åœ¨è»Ÿé«”é–‹ç™¼ç”Ÿå‘½é€±æœŸ(SDLC)ä¸­çš„ä½ç½®](#15-bdd-åœ¨è»Ÿé«”é–‹ç™¼ç”Ÿå‘½é€±æœŸsdlcä¸­çš„ä½ç½®)

### [ç¬¬äºŒç« ã€€BDD çš„ä¸‰å¤§æ”¯æŸ±](#ç¬¬äºŒç« bdd-çš„ä¸‰å¤§æ”¯æŸ±)

- [2.1 Discovery(éœ€æ±‚æ¢ç´¢)](#21-discoveryéœ€æ±‚æ¢ç´¢)
- [2.2 Formulation(ç¯„ä¾‹å®šç¾©)](#22-formulationç¯„ä¾‹å®šç¾©)
- [2.3 Automation(è‡ªå‹•åŒ–é©—è­‰)](#23-automationè‡ªå‹•åŒ–é©—è­‰)

### [ç¬¬ä¸‰ç« ã€€BDD çš„æ ¸å¿ƒèªæ³•:Gherkin](#ç¬¬ä¸‰ç« bdd-çš„æ ¸å¿ƒèªæ³•gherkin)

- [3.1 Gherkin èªæ³•çµæ§‹èˆ‡è¦å‰‡](#31-gherkin-èªæ³•çµæ§‹èˆ‡è¦å‰‡)
- [3.2 Featureã€Scenarioã€Scenario Outline é€²éšæ‡‰ç”¨](#32-featurescenarioscenario-outline-é€²éšæ‡‰ç”¨)
- [3.3 ç¯„ä¾‹:å¾éœ€æ±‚æ•˜è¿°è½‰ç‚º Gherkin è¦æ ¼](#33-ç¯„ä¾‹å¾éœ€æ±‚æ•˜è¿°è½‰ç‚º-gherkin-è¦æ ¼)
- [3.4 å¸¸è¦‹éŒ¯èª¤èˆ‡æœ€ä½³å¯¦å‹™](#34-å¸¸è¦‹éŒ¯èª¤èˆ‡æœ€ä½³å¯¦å‹™)

### [ç¬¬å››ç« ã€€BDD èˆ‡ç³»çµ±åˆ†æçš„æ•´åˆæ‡‰ç”¨](#ç¬¬å››ç« bdd-èˆ‡ç³»çµ±åˆ†æçš„æ•´åˆæ‡‰ç”¨)

- [4.1 å¦‚ä½•å°‡æ¥­å‹™éœ€æ±‚è½‰åŒ–ç‚ºå¯åŸ·è¡Œè¡Œç‚º](#41-å¦‚ä½•å°‡æ¥­å‹™éœ€æ±‚è½‰åŒ–ç‚ºå¯åŸ·è¡Œè¡Œç‚º)
- [4.2 èˆ‡åˆ©å®³é—œä¿‚äººå…±å‰µç¯„ä¾‹(Example Mapping)](#42-èˆ‡åˆ©å®³é—œä¿‚äººå…±å‰µç¯„ä¾‹example-mapping)
- [4.3 User Story èˆ‡ BDD çš„çµåˆæ–¹å¼](#43-user-story-èˆ‡-bdd-çš„çµåˆæ–¹å¼)
- [4.4 Acceptance Criteria(é©—æ”¶æº–å‰‡)çš„æ’°å¯«æŒ‡å¼•](#44-acceptance-criteriaé©—æ”¶æº–å‰‡çš„æ’°å¯«æŒ‡å¼•)
- [4.5 å¾ BDD åˆ° Use Case çš„å°æ‡‰é—œä¿‚](#45-å¾-bdd-åˆ°-use-case-çš„å°æ‡‰é—œä¿‚)

### [ç¬¬äº”ç« ã€€BDD é–‹ç™¼æµç¨‹èˆ‡è§’è‰²åˆ†å·¥](#ç¬¬äº”ç« bdd-é–‹ç™¼æµç¨‹èˆ‡è§’è‰²åˆ†å·¥)

- [5.1 BDD å·¥ä½œæµ(Workflow)å…¨è²Œ](#51-bdd-å·¥ä½œæµworkflowå…¨è²Œ)
- [5.2 ä¸‰æ–¹æœƒè«‡(Three Amigos:BA/SAã€Devã€QA)](#52-ä¸‰æ–¹æœƒè«‡three-amigosbasadevqa)
- [5.3 SA åœ¨ BDD æµç¨‹ä¸­çš„è²¬ä»»èˆ‡ç”¢å‡º](#53-sa-åœ¨-bdd-æµç¨‹ä¸­çš„è²¬ä»»èˆ‡ç”¢å‡º)
- [5.4 å¯¦å‹™æ–‡ä»¶ç”¢å‡ºç¯„ä¾‹](#54-å¯¦å‹™æ–‡ä»¶ç”¢å‡ºç¯„ä¾‹)
- [5.5 ç¶­è­·èˆ‡ç‰ˆæœ¬æ§ç®¡å¯¦å‹™](#55-ç¶­è­·èˆ‡ç‰ˆæœ¬æ§ç®¡å¯¦å‹™)

### [ç¬¬å…­ç« ã€€BDD è‡ªå‹•åŒ–æ¸¬è©¦å¯¦ä½œ](#ç¬¬å…­ç« bdd-è‡ªå‹•åŒ–æ¸¬è©¦å¯¦ä½œ)

- [6.1 å¸¸è¦‹ BDD å·¥å…·æ¯”è¼ƒ](#61-å¸¸è¦‹-bdd-å·¥å…·æ¯”è¼ƒ)
- [6.2 ç’°å¢ƒå®‰è£èˆ‡å°ˆæ¡ˆçµæ§‹](#62-ç’°å¢ƒå®‰è£èˆ‡å°ˆæ¡ˆçµæ§‹)
- [6.3 Feature èˆ‡ Step Definitions çš„é—œè¯](#63-feature-èˆ‡-step-definitions-çš„é—œè¯)
- [6.4 CI/CD æ•´åˆå¯¦å‹™](#64-cicd-æ•´åˆå¯¦å‹™)
- [6.5 æ¸¬è©¦å ±å‘Šèˆ‡è¿½è¹¤æ©Ÿåˆ¶](#65-æ¸¬è©¦å ±å‘Šèˆ‡è¿½è¹¤æ©Ÿåˆ¶)

### [ç¬¬ä¸ƒç« ã€€BDD å¯¦æˆ°æ¡ˆä¾‹](#ç¬¬ä¸ƒç« bdd-å¯¦æˆ°æ¡ˆä¾‹)

- [7.1 æ¡ˆä¾‹ä¸€:Web ç™»å…¥é©—è­‰æµç¨‹](#71-æ¡ˆä¾‹ä¸€web-ç™»å…¥é©—è­‰æµç¨‹)
- [7.2 æ¡ˆä¾‹äºŒ:éŠ€è¡Œè½‰å¸³æ¥­å‹™æµç¨‹](#72-æ¡ˆä¾‹äºŒéŠ€è¡Œè½‰å¸³æ¥­å‹™æµç¨‹)
- [7.3 æ¡ˆä¾‹ä¸‰:æ‰¹æ¬¡ç³»çµ±æ¥­å‹™è¦å‰‡é©—è­‰](#73-æ¡ˆä¾‹ä¸‰æ‰¹æ¬¡ç³»çµ±æ¥­å‹™è¦å‰‡é©—è­‰)
- [7.4 æ¡ˆä¾‹å››:API è¡Œç‚ºæ¸¬è©¦](#74-æ¡ˆä¾‹å››api-è¡Œç‚ºæ¸¬è©¦)
- [7.5 æ¡ˆä¾‹å›é¡§èˆ‡è¡Œç‚ºé‡æ§‹](#75-æ¡ˆä¾‹å›é¡§èˆ‡è¡Œç‚ºé‡æ§‹)

### [ç¬¬å…«ç« ã€€å°å…¥ç­–ç•¥èˆ‡çµ„ç¹”è½åœ°](#ç¬¬å…«ç« å°å…¥ç­–ç•¥èˆ‡çµ„ç¹”è½åœ°)

- [8.1 çµ„ç¹” BDD æˆç†Ÿåº¦è©•ä¼°](#81-çµ„ç¹”-bdd-æˆç†Ÿåº¦è©•ä¼°)
- [8.2 BDD å°å…¥è¨ˆç•«ç¯„æœ¬](#82-bdd-å°å…¥è¨ˆç•«ç¯„æœ¬)
- [8.3 å…‹æœå°å…¥ BDD çš„å¸¸è¦‹éšœç¤™](#83-å…‹æœå°å…¥-bdd-çš„å¸¸è¦‹éšœç¤™)
- [8.4 å»ºç«‹ BDD å”ä½œæ–‡åŒ–](#84-å»ºç«‹-bdd-å”ä½œæ–‡åŒ–)
- [8.5 æˆåŠŸå°å…¥çš„é—œéµå› ç´ ](#85-æˆåŠŸå°å…¥çš„é—œéµå› ç´ )

### [ç¬¬ä¹ç« ã€€é«˜éšæ‡‰ç”¨èˆ‡å»¶ä¼¸](#ç¬¬ä¹ç« é«˜éšæ‡‰ç”¨èˆ‡å»¶ä¼¸)

- [9.1 AI è¼”åŠ© BDD å¯¦è¸](#91-ai-è¼”åŠ©-bdd-å¯¦è¸)
- [9.2 BDD èˆ‡ Specification by Example (SBE) æ•´åˆ](#92-bdd-èˆ‡-specification-by-example-sbe-æ•´åˆ)
- [9.3 å¾®æœå‹™æ¶æ§‹ä¸‹çš„ BDD æŒ‘æˆ°](#93-å¾®æœå‹™æ¶æ§‹ä¸‹çš„-bdd-æŒ‘æˆ°)
- [9.4 BDD çš„æœªä¾†è¶¨å‹¢](#94-bdd-çš„æœªä¾†è¶¨å‹¢)

### [ç¬¬åç« ã€€é™„éŒ„](#ç¬¬åç« é™„éŒ„)

- [10.1 Gherkin èªæ³•é€ŸæŸ¥è¡¨](#101-gherkin-èªæ³•é€ŸæŸ¥è¡¨)
- [10.2 BDD æ–‡ä»¶æ¨¡æ¿](#102-bdd-æ–‡ä»¶æ¨¡æ¿)
- [10.3 å¸¸è¦‹ BDD å·¥å…·èˆ‡æ’ä»¶](#103-å¸¸è¦‹-bdd-å·¥å…·èˆ‡æ’ä»¶)
- [10.4 æ¨è–¦å­¸ç¿’è³‡æº](#104-æ¨è–¦å­¸ç¿’è³‡æº)
- [10.5 BDD å®Œæ•´æª¢æŸ¥æ¸…å–®](#105-bdd-å®Œæ•´æª¢æŸ¥æ¸…å–®)

---

## ç¬¬ä¸€ç« ã€€èªè­˜ BDD:è¡Œç‚ºé©…å‹•é–‹ç™¼çš„æ ¸å¿ƒç†å¿µ

### 1.1 ä»€éº¼æ˜¯ BDD

**BDD (Behavior-Driven Development,è¡Œç‚ºé©…å‹•é–‹ç™¼)** æ˜¯ä¸€ç¨®è»Ÿé«”é–‹ç™¼æ–¹æ³•è«–,å¼·èª¿:

1. **ä»¥æ¥­å‹™åƒ¹å€¼ç‚ºä¸­å¿ƒ**:å¾ä½¿ç”¨è€…éœ€æ±‚å‡ºç™¼,è€ŒéæŠ€è¡“å¯¦ä½œ
2. **ä½¿ç”¨è‡ªç„¶èªè¨€æè¿°**:è®“éæŠ€è¡“äººå“¡ä¹Ÿèƒ½åƒèˆ‡è¦æ ¼åˆ¶å®š
3. **å¯åŸ·è¡Œçš„æ´»æ–‡ä»¶**:è¦æ ¼åŒæ™‚æ˜¯æ¸¬è©¦æ¡ˆä¾‹,ç¢ºä¿æ–‡ä»¶èˆ‡ç¨‹å¼åŒæ­¥
4. **å”ä½œé©…å‹•**:ä¿ƒé€²æ¥­å‹™ã€é–‹ç™¼ã€æ¸¬è©¦ä¸‰æ–¹çš„æœ‰æ•ˆæºé€š

#### æ ¸å¿ƒæ¦‚å¿µ

```mermaid
graph TB
    A[æ¥­å‹™éœ€æ±‚] --> B[ç¯„ä¾‹å°è©±]
    B --> C[Gherkin è¦æ ¼]
    C --> D[è‡ªå‹•åŒ–æ¸¬è©¦]
    D --> E[å¯åŸ·è¡Œæ–‡ä»¶]
    E --> F[æŒçºŒé©—è­‰]
    F -.å›é¥‹.-> A
    
    style A fill:#e1f5ff
    style C fill:#fff4e1
    style E fill:#e7f5e1
```

**BDD çš„æ ¸å¿ƒç†å¿µ**:
- **Shared Understanding**:å»ºç«‹åœ˜éšŠå°éœ€æ±‚çš„å…±åŒç†è§£
- **Example-First**:é€éå…·é«”ç¯„ä¾‹èªªæ˜æŠ½è±¡éœ€æ±‚
- **Living Documentation**:æ–‡ä»¶éš¨ç¨‹å¼ç¢¼æ¼”é€²è€Œæ›´æ–°

#### BDD çš„é—œéµç‰¹å¾µ

| ç‰¹å¾µ | èªªæ˜ | æ•ˆç›Š |
|------|------|------|
| **æ¥­å‹™èªè¨€** | ä½¿ç”¨é ˜åŸŸè¡“èª,è€ŒéæŠ€è¡“è¡“èª | é™ä½æºé€šéšœç¤™ |
| **ç¯„ä¾‹å°å‘** | ç”¨å…·é«”æ¡ˆä¾‹æè¿°ç³»çµ±è¡Œç‚º | æ¸›å°‘éœ€æ±‚èª¤è§£ |
| **å”ä½œå®šç¾©** | ä¸‰æ–¹(BA/Dev/QA)å…±åŒåˆ¶å®šè¦æ ¼ | ææ—©ç™¼ç¾å•é¡Œ |
| **å¯åŸ·è¡Œæ€§** | è¦æ ¼å¯ç›´æ¥è½‰ç‚ºæ¸¬è©¦ç¨‹å¼ | ç¢ºä¿éœ€æ±‚è½å¯¦ |
| **æŒçºŒé©—è­‰** | è‡ªå‹•åŒ–æ¸¬è©¦æŒçºŒé©—è­‰è¡Œç‚º | å¿«é€Ÿç™¼ç¾é€€åŒ– |

---

### 1.2 BDD èˆ‡ TDDã€ATDD çš„å·®ç•°

#### ä¸‰ç¨®é–‹ç™¼æ–¹æ³•æ¯”è¼ƒ

```mermaid
graph LR
    subgraph TDD[æ¸¬è©¦é©…å‹•é–‹ç™¼ TDD]
        T1[å¯«æ¸¬è©¦] --> T2[å¯«ç¨‹å¼]
        T2 --> T3[é‡æ§‹]
        T3 --> T1
    end
    
    subgraph ATDD[é©—æ”¶æ¸¬è©¦é©…å‹•é–‹ç™¼ ATDD]
        A1[å®šç¾©é©—æ”¶æº–å‰‡] --> A2[å¯«æ¸¬è©¦]
        A2 --> A3[å¯¦ä½œåŠŸèƒ½]
        A3 --> A4[åŸ·è¡Œé©—æ”¶]
    end
    
    subgraph BDD[è¡Œç‚ºé©…å‹•é–‹ç™¼ BDD]
        B1[æ¢ç´¢ç¯„ä¾‹] --> B2[å®šç¾©è¦æ ¼]
        B2 --> B3[è‡ªå‹•åŒ–é©—è­‰]
        B3 --> B4[å¯¦ä½œåŠŸèƒ½]
        B4 --> B5[æŒçºŒé©—è­‰]
    end
    
    style TDD fill:#ffe1e1
    style ATDD fill:#e1f5ff
    style BDD fill:#e7f5e1
```

#### è©³ç´°å°æ¯”

| æ¯”è¼ƒé …ç›® | TDD | ATDD | BDD |
|---------|-----|------|-----|
| **é—œæ³¨å±¤ç´š** | å–®å…ƒæ¸¬è©¦(æ–¹æ³•å±¤ç´š) | é©—æ”¶æ¸¬è©¦(åŠŸèƒ½å±¤ç´š) | è¡Œç‚ºè¦æ ¼(æ¥­å‹™å±¤ç´š) |
| **é©…å‹•åŠ›** | ç¨‹å¼è¨­è¨ˆ | é©—æ”¶æº–å‰‡ | æ¥­å‹™åƒ¹å€¼ |
| **åƒèˆ‡è§’è‰²** | é–‹ç™¼äººå“¡ | BAã€QAã€Dev | BAã€QAã€Dev(ä¸‰æ–¹å”ä½œ) |
| **èªè¨€é¢¨æ ¼** | æŠ€è¡“èªè¨€(ç¨‹å¼ç¢¼) | åŠæŠ€è¡“èªè¨€ | è‡ªç„¶èªè¨€(é ˜åŸŸè¡“èª) |
| **æ¸¬è©¦ç¯„åœ** | å…§éƒ¨é‚è¼¯ | å¤–éƒ¨è¡Œç‚º | æ¥­å‹™è¡Œç‚º |
| **æ–‡ä»¶ç”¢å‡º** | æ¸¬è©¦ç¨‹å¼ç¢¼ | æ¸¬è©¦æ¡ˆä¾‹ | å¯åŸ·è¡Œè¦æ ¼ |
| **å·¥å…·ä»£è¡¨** | JUnit, NUnit | FitNesse | Cucumber, SpecFlow |

#### é—œä¿‚åœ–è§£

```mermaid
graph TD
    BDD[BDD è¡Œç‚ºé©…å‹•é–‹ç™¼]
    ATDD[ATDD é©—æ”¶æ¸¬è©¦é©…å‹•]
    TDD[TDD æ¸¬è©¦é©…å‹•é–‹ç™¼]
    
    BDD -->|åŒ…å«| ATDD
    ATDD -->|å¼•å°| TDD
    
    BDD -.å¼·èª¿å”ä½œèˆ‡æºé€š.-> Team[è·¨è·èƒ½åœ˜éšŠ]
    ATDD -.é—œæ³¨é©—æ”¶æº–å‰‡.-> AC[Acceptance Criteria]
    TDD -.å°ˆæ³¨ç¨‹å¼å“è³ª.-> Code[ç¨‹å¼ç¢¼]
    
    style BDD fill:#e7f5e1
    style ATDD fill:#e1f5ff
    style TDD fill:#ffe1e1
```

#### å¯¦å‹™æ‡‰ç”¨æ™‚æ©Ÿ

**é¸æ“‡ TDD**:
- é–‹ç™¼è¤‡é›œæ¼”ç®—æ³•
- é‡æ§‹æ—¢æœ‰ç¨‹å¼ç¢¼
- æå‡ç¨‹å¼ç¢¼å“è³ª

**é¸æ“‡ ATDD**:
- æ˜ç¢ºçš„é©—æ”¶æ¨™æº–
- åŠŸèƒ½å‹éœ€æ±‚é©—è­‰
- å¥‘ç´„å¼é–‹ç™¼

**é¸æ“‡ BDD**:
- éœ€æ±‚ä¸æ˜ç¢º,éœ€è¦æ¢ç´¢
- è·¨è·èƒ½åœ˜éšŠå”ä½œ
- é‡è¦–æ¥­å‹™æºé€šèˆ‡æ–‡ä»¶
- å»ºç«‹å…±äº«ç†è§£

---

### 1.3 ç‚ºä»€éº¼è¦å°å…¥ BDD

#### å‚³çµ±é–‹ç™¼çš„å¸¸è¦‹å•é¡Œ

```mermaid
graph TB
    subgraph Problems[å‚³çµ±é–‹ç™¼ç—›é»]
        P1[éœ€æ±‚ç†è§£è½å·®] --> P2[é–‹ç™¼åé›¢éœ€æ±‚]
        P2 --> P3[æ¸¬è©¦èˆ‡é–‹ç™¼è„«ç¯€]
        P3 --> P4[æ–‡ä»¶éæ™‚ç„¡ç”¨]
        P4 --> P5[è¿”å·¥æˆæœ¬é«˜]
        P5 --> P6[å°ˆæ¡ˆå»¶é²]
    end
    
    subgraph Solutions[BDD è§£æ±ºæ–¹æ¡ˆ]
        S1[ç¯„ä¾‹å”ä½œ] --> S2[å…±åŒç†è§£]
        S2 --> S3[å¯åŸ·è¡Œè¦æ ¼]
        S3 --> S4[æ´»æ–‡ä»¶]
        S4 --> S5[æŒçºŒé©—è­‰]
        S5 --> S6[å¿«é€Ÿå›é¥‹]
    end
    
    P1 -.BDDè§£æ±º.-> S1
    P2 -.BDDè§£æ±º.-> S2
    P3 -.BDDè§£æ±º.-> S3
    P4 -.BDDè§£æ±º.-> S4
    
    style Problems fill:#ffe1e1
    style Solutions fill:#e7f5e1
```

#### BDD å¸¶ä¾†çš„å…·é«”æ•ˆç›Š

##### 1. æºé€šæ•ˆç›Š

- âœ… å»ºç«‹å…±é€šèªè¨€,æ¸›å°‘èªçŸ¥è½å·®
- âœ… å…·é«”ç¯„ä¾‹å–ä»£æŠ½è±¡æè¿°
- âœ… ææ—©ç™¼ç¾éœ€æ±‚çŸ›ç›¾
- âœ… é™ä½è®Šæ›´æˆæœ¬

##### 2. å“è³ªæ•ˆç›Š

- âœ… éœ€æ±‚å³æ¸¬è©¦,ç¢ºä¿åŠŸèƒ½æ­£ç¢ºæ€§
- âœ… è‡ªå‹•åŒ–å›æ­¸æ¸¬è©¦,é˜²æ­¢åŠŸèƒ½é€€åŒ–
- âœ… å¯è¿½æº¯æ€§:éœ€æ±‚â†’è¦æ ¼â†’æ¸¬è©¦â†’ç¨‹å¼ç¢¼
- âœ… æŒçºŒé©—è­‰ç³»çµ±è¡Œç‚º

##### 3. å”ä½œæ•ˆç›Š

- âœ… æ‰“ç ´è·èƒ½å­¤å³¶(BA/Dev/QA)
- âœ… ä¿ƒé€²çŸ¥è­˜å…±äº«
- âœ… æå‡åœ˜éšŠä¿¡ä»»åº¦
- âœ… åŠ é€Ÿæ±ºç­–éç¨‹

##### 4. æ–‡ä»¶æ•ˆç›Š

- âœ… æ´»æ–‡ä»¶:èˆ‡ç¨‹å¼ç¢¼åŒæ­¥æ›´æ–°
- âœ… å¯è®€æ€§é«˜:éæŠ€è¡“äººå“¡ä¹Ÿèƒ½ç†è§£
- âœ… å¯åŸ·è¡Œ:é©—è­‰æ–‡ä»¶èˆ‡ç³»çµ±ä¸€è‡´æ€§
- âœ… ç¯„ä¾‹è±å¯Œ:é™ä½å­¸ç¿’æˆæœ¬

#### æŠ•è³‡å ±é…¬ç‡(ROI)åˆ†æ

```mermaid
graph LR
    subgraph Investment[æŠ•å…¥æˆæœ¬]
        I1[å­¸ç¿’æˆæœ¬]
        I2[å”ä½œæ™‚é–“]
        I3[å·¥å…·å°å…¥]
    end
    
    subgraph Return[ç²å¾—å›å ±]
        R1[æ¸›å°‘è¿”å·¥]
        R2[ææ—©ç™¼ç¾å•é¡Œ]
        R3[é™ä½ç¶­è­·æˆæœ¬]
        R4[æå‡äº¤ä»˜é€Ÿåº¦]
        R5[æ”¹å–„å®¢æˆ¶æ»¿æ„åº¦]
    end
    
    Investment --> Time[æ™‚é–“è»¸]
    Time --> Return
    
    style Investment fill:#ffe1e1
    style Return fill:#e7f5e1
```

**çŸ­æœŸæ•ˆç›Š(1-3å€‹æœˆ)**:
- éœ€æ±‚æ¾„æ¸…æ•ˆç‡æå‡
- é–‹ç™¼èˆ‡æ¸¬è©¦å”ä½œæ”¹å–„
- æ¸›å°‘éœ€æ±‚è®Šæ›´æ¬¡æ•¸

**ä¸­æœŸæ•ˆç›Š(3-6å€‹æœˆ)**:
- ç¼ºé™·ç‡é™ä½ 20-40%
- æ¸¬è©¦è‡ªå‹•åŒ–è¦†è“‹ç‡æå‡
- äº¤ä»˜é€±æœŸç¸®çŸ­

**é•·æœŸæ•ˆç›Š(6å€‹æœˆä»¥ä¸Š)**:
- ç¶­è­·æˆæœ¬å¤§å¹…é™ä½
- æ–°äººä¸Šæ‰‹æ™‚é–“æ¸›å°‘
- æŠ€è¡“å‚µå‹™æ¸›è¼•
- åœ˜éšŠå”ä½œæ–‡åŒ–æˆç†Ÿ

---

### 1.4 BDD çš„åƒ¹å€¼èˆ‡æ‡‰ç”¨å ´æ™¯

#### BDD çš„æ ¸å¿ƒåƒ¹å€¼ä¸»å¼µ

```mermaid
graph TD
    A[BDD æ ¸å¿ƒåƒ¹å€¼] --> B[æ¥­å‹™åƒ¹å€¼]
    A --> C[æŠ€è¡“åƒ¹å€¼]
    A --> D[çµ„ç¹”åƒ¹å€¼]
    A --> E[å®¢æˆ¶åƒ¹å€¼]
    
    B --> B1[éœ€æ±‚å³æ¸¬è©¦]
    B --> B2[æ¸›å°‘æµªè²»]
    B --> B3[å¿«é€Ÿé©—è­‰]
    B --> B4[æŒçºŒäº¤ä»˜]
    
    C --> C1[æ´»æ–‡ä»¶]
    C --> C2[æ¸¬è©¦è‡ªå‹•åŒ–]
    C --> C3[é‡æ§‹ä¿¡å¿ƒ]
    C --> C4[æŠ€è¡“å‚µç®¡ç†]
    
    D --> D1[è·¨è·èƒ½å”ä½œ]
    D --> D2[çŸ¥è­˜å…±äº«]
    D --> D3[æµç¨‹é€æ˜]
    D --> D4[æŒçºŒæ”¹å–„]
    
    E --> E1[ç¬¦åˆæœŸæœ›]
    E --> E2[å¿«é€Ÿå›é¥‹]
    E --> E3[å“è³ªä¿è­‰]
    E --> E4[å¯é æ¸¬æ€§]
```

#### é©åˆå°å…¥ BDD çš„å ´æ™¯

##### âœ… é«˜åº¦é©åˆ

1. **æ¥­å‹™è¦å‰‡è¤‡é›œçš„ç³»çµ±**
   - é‡‘èç³»çµ±(äº¤æ˜“ã€é¢¨æ§ã€è¨ˆè²»)
   - ä¿éšªç†è³ æµç¨‹
   - é›»å•†ä¿ƒéŠ·è¦å‰‡
   - ç¨…å‹™è¨ˆç®—ç³»çµ±

2. **éœ€è¦é »ç¹è®Šæ›´çš„ç³»çµ±**
   - æ”¿ç­–æ³•è¦é©…å‹•çš„ç³»çµ±
   - å¸‚å ´å¿«é€Ÿè®ŠåŒ–çš„ç”¢å“
   - A/B æ¸¬è©¦é »ç¹çš„åŠŸèƒ½

3. **è·¨è·èƒ½å”ä½œçš„å°ˆæ¡ˆ**
   - æ•æ·é–‹ç™¼åœ˜éšŠ
   - DevOps ç’°å¢ƒ
   - å¤šæ–¹åˆ©å®³é—œä¿‚äººåƒèˆ‡

4. **é•·æœŸç¶­è­·çš„ç³»çµ±**
   - æ ¸å¿ƒæ¥­å‹™ç³»çµ±
   - å¹³å°å‹ç”¢å“
   - éœ€è¦é«˜å¯é æ€§çš„ç³»çµ±

##### âš ï¸ éœ€è©•ä¼°çš„å ´æ™¯

1. **æŠ€è¡“å°å‘å°ˆæ¡ˆ**
   - åŸºç¤è¨­æ–½é–‹ç™¼
   - æ¡†æ¶/å‡½å¼åº«é–‹ç™¼
   - æ•ˆèƒ½æœ€ä½³åŒ–å°ˆæ¡ˆ
   - ğŸ‘‰ å»ºè­°:çµåˆ TDD ä½¿ç”¨

2. **åŸå‹é–‹ç™¼/æ¦‚å¿µé©—è­‰**
   - POC å°ˆæ¡ˆ
   - å¿«é€Ÿé©—è­‰æƒ³æ³•
   - ğŸ‘‰ å»ºè­°:å¾…éœ€æ±‚ç©©å®šå¾Œå°å…¥

3. **è³‡æºæœ‰é™çš„å°å‹å°ˆæ¡ˆ**
   - äººåŠ›ä¸è¶³(<3äºº)
   - æ™‚é–“æ¥µåº¦ç·Šè¿«
   - ğŸ‘‰ å»ºè­°:ä½¿ç”¨ç°¡åŒ–ç‰ˆ BDD

##### âŒ ä¸å»ºè­°çš„å ´æ™¯

1. ä¸€æ¬¡æ€§è…³æœ¬æˆ–å·¥å…·
2. ç´”è¦–è¦ºè¨­è¨ˆèª¿æ•´
3. æ•ˆèƒ½èª¿æ ¡å°ˆæ¡ˆ
4. åœ˜éšŠå®Œå…¨æŠ—æ‹’æ”¹è®Š

---

### 1.5 BDD åœ¨è»Ÿé«”é–‹ç™¼ç”Ÿå‘½é€±æœŸ(SDLC)ä¸­çš„ä½ç½®

#### BDD åœ¨ SDLC çš„æ•´é«”æ¶æ§‹

```mermaid
graph TB
    subgraph SDLC[è»Ÿé«”é–‹ç™¼ç”Ÿå‘½é€±æœŸ]
        direction TB
        
        subgraph Requirements[éœ€æ±‚éšæ®µ]
            R1[éœ€æ±‚æ”¶é›†] --> R2[BDD Discovery]
            R2 --> R3[Example Mapping]
            R3 --> R4[User Story]
        end
        
        subgraph Design[è¨­è¨ˆéšæ®µ]
            D1[BDD Formulation] --> D2[æ’°å¯« Feature]
            D2 --> D3[å®šç¾© Scenarios]
            D3 --> D4[Acceptance Criteria]
        end
        
        subgraph Development[é–‹ç™¼éšæ®µ]
            Dev1[BDD Automation] --> Dev2[Step Definitions]
            Dev2 --> Dev3[TDD å¯¦ä½œ]
            Dev3 --> Dev4[æ•´åˆæ¸¬è©¦]
        end
        
        subgraph Testing[æ¸¬è©¦éšæ®µ]
            T1[åŸ·è¡Œ BDD æ¸¬è©¦] --> T2[é©—æ”¶æ¸¬è©¦]
            T2 --> T3[è¿´æ­¸æ¸¬è©¦]
            T3 --> T4[æ¸¬è©¦å ±å‘Š]
        end
        
        subgraph Deployment[éƒ¨ç½²éšæ®µ]
            Dep1[CI/CD Pipeline] --> Dep2[è‡ªå‹•åŒ–é©—è­‰]
            Dep2 --> Dep3[Production]
        end
        
        Requirements --> Design
        Design --> Development
        Development --> Testing
        Testing --> Deployment
        Deployment -.æŒçºŒå›é¥‹.-> Requirements
    end
    
    style Requirements fill:#e1f5ff
    style Design fill:#fff4e1
    style Development fill:#e7f5e1
    style Testing fill:#ffe1e1
    style Deployment fill:#f0e1ff
```

#### å„éšæ®µ BDD çš„è§’è‰²èˆ‡ç”¢å‡º

##### 1. éœ€æ±‚éšæ®µ(Requirements)

| æ´»å‹• | BDD ä½œæ³• | åƒèˆ‡è§’è‰² | ç”¢å‡º |
|------|---------|---------|------|
| éœ€æ±‚æ”¶é›† | Discovery Workshop | BA, Stakeholder | éœ€æ±‚æ¸…å–® |
| éœ€æ±‚æ¢ç´¢ | Example Mapping | BA, SA, Dev, QA | Example Map |
| éœ€æ±‚å®šç¾© | User Story + ç¯„ä¾‹ | BA, SA | User Stories |
| é©—æ”¶æº–å‰‡ | Given-When-Then | SA, QA | Acceptance Criteria |

**ç¯„ä¾‹:éœ€æ±‚éšæ®µç”¢å‡º**

```gherkin
# User Story
èº«ç‚º éŠ€è¡Œå®¢æˆ¶
æˆ‘æƒ³è¦ è½‰å¸³çµ¦å…¶ä»–å¸³æˆ¶
ä»¥ä¾¿ å¿«é€Ÿå®Œæˆä»˜æ¬¾

# Example Mapping ç”¢å‡ºçš„ç¯„ä¾‹
ç¯„ä¾‹1: æ­£å¸¸è½‰å¸³
  Given æˆ‘çš„å¸³æˆ¶æœ‰ 10,000 å…ƒ
  When æˆ‘è½‰å¸³ 5,000 å…ƒçµ¦æœ‹å‹
  Then æˆ‘çš„å¸³æˆ¶æ‡‰è©²å‰©ä¸‹ 5,000 å…ƒ

ç¯„ä¾‹2: é¤˜é¡ä¸è¶³
  Given æˆ‘çš„å¸³æˆ¶æœ‰ 3,000 å…ƒ
  When æˆ‘è½‰å¸³ 5,000 å…ƒçµ¦æœ‹å‹
  Then æ‡‰è©²é¡¯ç¤ºã€Œé¤˜é¡ä¸è¶³ã€éŒ¯èª¤
```

##### 2. è¨­è¨ˆéšæ®µ(Design)

| æ´»å‹• | BDD ä½œæ³• | åƒèˆ‡è§’è‰² | ç”¢å‡º |
|------|---------|---------|------|
| è¡Œç‚ºå»ºæ¨¡ | Feature å®šç¾© | SA | Feature Files |
| å ´æ™¯è¨­è¨ˆ | Scenario æ’°å¯« | SA, Dev | Scenarios |
| è¦æ ¼ç´°åŒ– | Scenario Outline | SA | è³‡æ–™é©…å‹•è¦æ ¼ |
| é©—è­‰è¨­è¨ˆ | Three Amigos æœƒè­° | BA, Dev, QA | ç¢ºèªçš„è¦æ ¼ |

**ç¯„ä¾‹:è¨­è¨ˆéšæ®µç”¢å‡º(Feature File)**

```gherkin
# features/transfer.feature
Feature: éŠ€è¡Œè½‰å¸³åŠŸèƒ½
  èº«ç‚ºéŠ€è¡Œå®¢æˆ¶,æˆ‘éœ€è¦èƒ½å¤ å°‡è³‡é‡‘è½‰ç§»åˆ°å…¶ä»–å¸³æˆ¶

  Background:
    Given æˆ‘å·²ç¶“ç™»å…¥ç¶²è·¯éŠ€è¡Œ
    And æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ

  Scenario: æˆåŠŸè½‰å¸³
    When æˆ‘è½‰å¸³ 3000 å…ƒåˆ°å¸³æˆ¶ "9876543210"
    Then äº¤æ˜“æ‡‰è©²æˆåŠŸ
    And æˆ‘çš„å¸³æˆ¶é¤˜é¡æ‡‰è©²æ˜¯ 7000 å…ƒ
    And å°æ–¹å¸³æˆ¶æ‡‰è©²å¢åŠ  3000 å…ƒ

  Scenario: é¤˜é¡ä¸è¶³æ™‚ç„¡æ³•è½‰å¸³
    When æˆ‘è½‰å¸³ 15000 å…ƒåˆ°å¸³æˆ¶ "9876543210"
    Then æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "é¤˜é¡ä¸è¶³"
    And æˆ‘çš„å¸³æˆ¶é¤˜é¡æ‡‰è©²ä»æ˜¯ 10000 å…ƒ
```

##### 3. é–‹ç™¼éšæ®µ(Development)

| æ´»å‹• | BDD ä½œæ³• | åƒèˆ‡è§’è‰² | ç”¢å‡º |
|------|---------|---------|------|
| è‡ªå‹•åŒ–æº–å‚™ | Step Definitions | Dev | æ¸¬è©¦ç¨‹å¼ç¢¼ |
| TDD é–‹ç™¼ | Red-Green-Refactor | Dev | åŠŸèƒ½ç¨‹å¼ç¢¼ |
| å–®å…ƒæ¸¬è©¦ | å‚³çµ± TDD | Dev | Unit Tests |
| æ•´åˆæ¸¬è©¦ | BDD Scenarios | Dev, QA | Integration Tests |

**ç¯„ä¾‹:é–‹ç™¼éšæ®µç”¢å‡º(Step Definition)**

```python
# steps/transfer_steps.py
from behave import given, when, then

@given('æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º {amount:d} å…ƒ')
def step_impl(context, amount):
    context.account = BankAccount(balance=amount)

@when('æˆ‘è½‰å¸³ {amount:d} å…ƒåˆ°å¸³æˆ¶ "{target}"')
def step_impl(context, amount, target):
    context.result = context.account.transfer(amount, target)

@then('æˆ‘çš„å¸³æˆ¶é¤˜é¡æ‡‰è©²æ˜¯ {expected:d} å…ƒ')
def step_impl(context, expected):
    assert context.account.balance == expected
```

##### 4. æ¸¬è©¦éšæ®µ(Testing)

| æ´»å‹• | BDD ä½œæ³• | åƒèˆ‡è§’è‰² | ç”¢å‡º |
|------|---------|---------|------|
| é©—æ”¶æ¸¬è©¦ | åŸ·è¡Œ Feature Tests | QA | æ¸¬è©¦çµæœ |
| è¿´æ­¸æ¸¬è©¦ | è‡ªå‹•åŒ–åŸ·è¡Œå…¨éƒ¨å ´æ™¯ | CI/CD | æ¸¬è©¦å ±å‘Š |
| æ¢ç´¢æ€§æ¸¬è©¦ | è£œå……é‚Šç•Œæ¡ˆä¾‹ | QA | æ–°å¢ Scenarios |
| ç¼ºé™·è¿½è¹¤ | Feature <-> Defect | QA, Dev | ç¼ºé™·å ±å‘Š |

##### 5. éƒ¨ç½²èˆ‡ç¶­è­·éšæ®µ(Deployment)

| æ´»å‹• | BDD ä½œæ³• | åƒèˆ‡è§’è‰² | ç”¢å‡º |
|------|---------|---------|------|
| æŒçºŒæ•´åˆ | CI Pipeline åŸ·è¡Œ BDD | DevOps | Build Status |
| éƒ¨ç½²é©—è­‰ | Smoke Test Scenarios | DevOps | Deployment Report |
| ç›£æ§å‘Šè­¦ | é—œéµå ´æ™¯ç›£æ§ | Ops | Monitoring Dashboard |
| æ–‡ä»¶ç¶­è­· | Feature Files å³æ–‡ä»¶ | All | Living Documentation |

---

#### BDD èˆ‡æ•æ·é–‹ç™¼çš„æ•´åˆ

```mermaid
graph TB
    subgraph Sprint[Sprint é€±æœŸ - 2é€±]
        direction TB
        
        Day1[Day 1-2: Sprint Planning] --> Discovery
        Discovery[Discovery Workshop] --> Mapping
        Mapping[Example Mapping] --> Stories
        Stories[ç¢ºèª User Stories]
        
        Stories --> Day3[Day 3-8: é–‹ç™¼è¿­ä»£]
        Day3 --> Write[æ’°å¯« Feature]
        Write --> Auto[è‡ªå‹•åŒ– Step]
        Auto --> TDD[TDD é–‹ç™¼]
        TDD --> Test[åŸ·è¡Œ BDD æ¸¬è©¦]
        
        Test --> Day9[Day 9-10: é©—æ”¶èˆ‡å›é¡§]
        Day9 --> Review[Sprint Review]
        Review --> Retro[å›é¡§æœƒè­°]
        Retro --> Improve[æ”¹å–„ BDD æµç¨‹]
    end
    
    Improve -.ä¸‹å€‹ Sprint.-> Day1
    
    style Discovery fill:#e1f5ff
    style Write fill:#fff4e1
    style TDD fill:#e7f5e1
    style Review fill:#ffe1e1
```

---

### ğŸ“ ç¬¬ä¸€ç« ç¸½çµèˆ‡å¯¦å‹™è¦é»

#### é—œéµè¦é»å›é¡§

âœ… **BDD çš„æœ¬è³ª**
- å”ä½œé–‹ç™¼æ–¹æ³•,ä»¥æ¥­å‹™è¡Œç‚ºç‚ºä¸­å¿ƒ
- ä½¿ç”¨è‡ªç„¶èªè¨€å»ºç«‹å…±äº«ç†è§£
- è¦æ ¼å³æ¸¬è©¦,æ¸¬è©¦å³æ–‡ä»¶

âœ… **BDD vs TDD vs ATDD**
- TDD é—œæ³¨ç¨‹å¼é‚è¼¯,BDD é—œæ³¨æ¥­å‹™è¡Œç‚º
- ATDD æ˜¯é©—æ”¶æ¸¬è©¦,BDD æ¶µè“‹æ•´å€‹å”ä½œæµç¨‹
- ä¸‰è€…å¯ä»¥çµåˆä½¿ç”¨,äº’è£œä¸è¡çª

âœ… **å°å…¥ BDD çš„ç†ç”±**
- è§£æ±ºæºé€šè½å·®èˆ‡éœ€æ±‚èª¤è§£
- å»ºç«‹å¯åŸ·è¡Œçš„æ´»æ–‡ä»¶
- æå‡è·¨è·èƒ½å”ä½œæ•ˆç‡
- é™ä½é•·æœŸç¶­è­·æˆæœ¬

âœ… **BDD çš„æ‡‰ç”¨æ™‚æ©Ÿ**
- æ¥­å‹™è¦å‰‡è¤‡é›œçš„ç³»çµ±
- éœ€è¦é »ç¹è®Šæ›´çš„å°ˆæ¡ˆ
- è·¨è·èƒ½åœ˜éšŠå”ä½œ
- é•·æœŸç¶­è­·çš„æ ¸å¿ƒç³»çµ±

âœ… **BDD åœ¨ SDLC ä¸­çš„è§’è‰²**
- éœ€æ±‚éšæ®µ:Discovery & Example Mapping
- è¨­è¨ˆéšæ®µ:Feature & Scenario å®šç¾©
- é–‹ç™¼éšæ®µ:è‡ªå‹•åŒ–å¯¦ä½œ & TDD
- æ¸¬è©¦éšæ®µ:é©—æ”¶èˆ‡è¿´æ­¸æ¸¬è©¦
- éƒ¨ç½²éšæ®µ:CI/CD æ•´åˆé©—è­‰

---

#### âš ï¸ æ–°æ‰‹å¸¸è¦‹èª¤å€

| èª¤å€ | æ­£ç¢ºèªçŸ¥ |
|------|---------|
| BDD åªæ˜¯å¯«æ¸¬è©¦ | BDD æ˜¯å”ä½œæ–¹æ³•,æ¸¬è©¦åªæ˜¯å‰¯ç”¢å“ |
| BDD æœƒæ‹–æ…¢é–‹ç™¼é€Ÿåº¦ | çŸ­æœŸæŠ•è³‡,é•·æœŸæ”¶ç›Š |
| BDD åªé©åˆå¤§å‹å°ˆæ¡ˆ | ä»»ä½•è¦æ¨¡éƒ½å¯æ¡ç”¨,å¯èª¿æ•´å¯¦è¸æ·±åº¦ |
| Gherkin å°±æ˜¯ BDD | Gherkin åªæ˜¯å·¥å…·,å”ä½œæ‰æ˜¯æ ¸å¿ƒ |
| åªæœ‰ QA è¦å¯« Feature | Feature æ‡‰ç”± BA/SA/Dev/QA å…±åŒåˆ¶å®š |

---

#### ğŸ¯ æª¢æŸ¥æ¸…å–®:ç†è§£ BDD åŸºç¤

åœ¨é€²å…¥ä¸‹ä¸€ç« å‰,è«‹ç¢ºèªä½ å·²ç†è§£:

- [ ] èƒ½ç”¨ä¸€å¥è©±èªªæ˜ä»€éº¼æ˜¯ BDD
- [ ] èƒ½è§£é‡‹ BDDã€TDDã€ATDD çš„å·®ç•°èˆ‡é—œè¯
- [ ] ç†è§£ BDD çš„ä¸‰å¤§æ”¯æŸ±(Discovery/Formulation/Automation)
- [ ] çŸ¥é“ BDD é©åˆèˆ‡ä¸é©åˆçš„æ‡‰ç”¨å ´æ™¯
- [ ] äº†è§£ BDD åœ¨ SDLC å„éšæ®µçš„è§’è‰²
- [ ] èªåŒ BDD æ˜¯å”ä½œæ–¹æ³•,è€Œéå–®ç´”çš„æ¸¬è©¦æŠ€è¡“

---

#### ğŸ’¡ å¯¦å‹™å»ºè­°

**çµ¦æ–°é€² SA çš„å»ºè­°**:
1. å…ˆç†è§£ã€Œç‚ºä»€éº¼ã€,å†å­¸ã€Œæ€éº¼åšã€
2. å¾å°ç¯„åœè©¦é»é–‹å§‹,ç´¯ç©æˆåŠŸç¶“é©—
3. é‡è¦–èˆ‡æ¥­å‹™äººå“¡ã€é–‹ç™¼äººå“¡çš„æºé€š
4. æŠŠ BDD ç•¶ä½œå”ä½œå·¥å…·,è€Œéè² æ“”

**çµ¦åœ˜éšŠ Lead çš„å»ºè­°**:
1. æŠ•è³‡æ•™è‚²è¨“ç·´,å»ºç«‹å…±è­˜
2. é¸æ“‡é©åˆçš„å°å…¥ç­–ç•¥(è©³è¦‹ç¬¬å…«ç« )
3. å»ºç«‹å¯¦è¸ç¤¾ç¾¤,æŒçºŒæ”¹å–„
4. ç”¨æ•¸æ“šè¡¡é‡å°å…¥æˆæ•ˆ

---

#### ğŸ“š å»¶ä¼¸é–±è®€

- ğŸ“– ã€ŠBDD in Actionã€‹- John Ferguson Smart
- ğŸ“– ã€ŠThe BDD Books - Discoveryã€‹- Gaspar Nagy & Seb Rose
- ğŸ“– ã€ŠSpecification by Exampleã€‹- Gojko Adzic
- ğŸ”— [Cucumber å®˜æ–¹æ–‡ä»¶](https://cucumber.io/docs/bdd/)
- ğŸ”— [BDD å¯¦è¸ç¤¾ç¾¤](https://bddcommunity.com/)

---

**ä¸‹ä¸€ç« é å‘Š**:
æˆ‘å€‘å°‡æ·±å…¥æ¢è¨ **BDD çš„ä¸‰å¤§æ”¯æŸ±**:Discovery(éœ€æ±‚æ¢ç´¢)ã€Formulation(ç¯„ä¾‹å®šç¾©)ã€Automation(è‡ªå‹•åŒ–é©—è­‰),é€™æ˜¯å¯¦è¸ BDD çš„æ ¸å¿ƒæµç¨‹ã€‚

---

## ç¬¬äºŒç« ã€€BDD çš„ä¸‰å¤§æ”¯æŸ±

BDD çš„å¯¦è¸å»ºç«‹åœ¨ä¸‰å€‹æ ¸å¿ƒæ´»å‹•ä¹‹ä¸Š,é€™ä¸‰å€‹æ”¯æŸ±æ§‹æˆäº†å®Œæ•´çš„ BDD å·¥ä½œæµç¨‹ã€‚ç†è§£ä¸¦æŒæ¡é€™ä¸‰å€‹éšæ®µ,æ˜¯æˆåŠŸå°å…¥ BDD çš„é—œéµã€‚

```mermaid
graph LR
    A[Discovery<br/>éœ€æ±‚æ¢ç´¢] --> B[Formulation<br/>ç¯„ä¾‹å®šç¾©]
    B --> C[Automation<br/>è‡ªå‹•åŒ–é©—è­‰]
    C -.å›é¥‹.-> A
    
    A -->|ç”¢å‡º| A1[å…±äº«ç†è§£]
    B -->|ç”¢å‡º| B1[Feature Files]
    C -->|ç”¢å‡º| C1[å¯åŸ·è¡Œè¦æ ¼]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#e7f5e1
```

### 2.1 Discovery(éœ€æ±‚æ¢ç´¢)

#### ä»€éº¼æ˜¯ Discovery

**Discovery** æ˜¯ BDD çš„ç¬¬ä¸€å€‹æ”¯æŸ±,ä¹Ÿæ˜¯æœ€é‡è¦çš„å”ä½œæ´»å‹•ã€‚é€™å€‹éšæ®µçš„ç›®æ¨™æ˜¯:

- ğŸ¯ **å»ºç«‹å…±äº«ç†è§£**:ç¢ºä¿æ‰€æœ‰äººå°éœ€æ±‚æœ‰ä¸€è‡´çš„èªçŸ¥
- ğŸ¯ **ç™¼ç¾æœªçŸ¥çš„æœªçŸ¥**:é€éå°è©±æ‰¾å‡ºéš±è—çš„å‡è¨­èˆ‡é¢¨éšª
- ğŸ¯ **ç”¢ç”Ÿå…·é«”ç¯„ä¾‹**:ç”¨çœŸå¯¦æ¡ˆä¾‹èªªæ˜æŠ½è±¡éœ€æ±‚
- ğŸ¯ **è­˜åˆ¥æ¸¬è©¦å ´æ™¯**:ææ—©æ€è€ƒå¦‚ä½•é©—è­‰éœ€æ±‚

#### Discovery çš„æ ¸å¿ƒç†å¿µ

```mermaid
graph TB
    Discovery[Discovery]
    
    Discovery --> A[å”ä½œå°è©±]
    A --> A1[Three Amigos]
    A --> A2[åˆ©å®³é—œä¿‚äºº]
    A --> A3[é ˜åŸŸå°ˆå®¶]
    A --> A4[æŠ€è¡“åœ˜éšŠ]
    
    Discovery --> B[å…·é«”ç¯„ä¾‹]
    B --> B1[æ­£å¸¸æµç¨‹]
    B --> B2[ç•°å¸¸æƒ…æ³]
    B --> B3[é‚Šç•Œæ¢ä»¶]
    B --> B4[æ¥­å‹™è¦å‰‡]
    
    Discovery --> C[å…±äº«ç†è§£]
    C --> C1[æ¶ˆé™¤æ­§ç¾©]
    C --> C2[çµ±ä¸€èªè¨€]
    C --> C3[æš´éœ²å‡è¨­]
    C --> C4[é™ä½é¢¨éšª]
    
    Discovery --> D[åŠæ—©ç™¼ç¾]
    D --> D1[éœ€æ±‚ç¼ºé™·]
    D --> D2[æŠ€è¡“é™åˆ¶]
    D --> D3[ä¾è³´é—œä¿‚]
    D --> D4[æ•´åˆå•é¡Œ]
    
    style Discovery fill:#f9f,stroke:#333,stroke-width:4px
```

#### Discovery Workshop å¯¦æ–½æ­¥é©Ÿ

**æ­¥é©Ÿ 1:æº–å‚™éšæ®µ**

- ğŸ“‹ é¸æ“‡è¦æ¢ç´¢çš„ User Story
- ğŸ“‹ é‚€è«‹ç›¸é—œäººå“¡(BA/SAã€Devã€QAã€é ˜åŸŸå°ˆå®¶)
- ğŸ“‹ æº–å‚™åŸºæœ¬è³‡æ–™(User Storyã€å·²çŸ¥éœ€æ±‚)
- ğŸ“‹ é ç•™ 30-60 åˆ†é˜æœƒè­°æ™‚é–“

**æ­¥é©Ÿ 2:Story èªªæ˜(5-10åˆ†é˜)**

æ¥­å‹™åˆ†æå¸«æˆ–ç”¢å“è² è²¬äººèªªæ˜:
- ç‚ºä»€éº¼éœ€è¦é€™å€‹åŠŸèƒ½(æ¥­å‹™åƒ¹å€¼)
- èª°æœƒä½¿ç”¨é€™å€‹åŠŸèƒ½(ä½¿ç”¨è€…è§’è‰²)
- æœŸæœ›é”æˆä»€éº¼ç›®æ¨™(é©—æ”¶æº–å‰‡æ¦‚è¿°)

**æ­¥é©Ÿ 3:ç¯„ä¾‹æ¢ç´¢(20-40åˆ†é˜)**

é€éæå•èˆ‡è¨è«–,ç”¢ç”Ÿå…·é«”ç¯„ä¾‹:

```
æ ¸å¿ƒæå•æ¸…å–®:
1. æ­£å¸¸æƒ…æ³ä¸‹æœƒç™¼ç”Ÿä»€éº¼?(Happy Path)
2. ä»€éº¼æƒ…æ³ä¸‹æœƒå¤±æ•—?(ç•°å¸¸è™•ç†)
3. é‚Šç•Œåœ¨å“ªè£¡?(é‚Šç•Œæ¢ä»¶)
4. æœ‰å“ªäº›æ¥­å‹™è¦å‰‡?(è¦å‰‡é©—è­‰)
5. èˆ‡å…¶ä»–ç³»çµ±çš„äº’å‹•?(æ•´åˆé»)
6. æ•ˆèƒ½è¦æ±‚æ˜¯ä»€éº¼?(éåŠŸèƒ½éœ€æ±‚)
7. å®‰å…¨è€ƒé‡æœ‰å“ªäº›?(å®‰å…¨éœ€æ±‚)
```

**æ­¥é©Ÿ 4:Example Mapping(10-15åˆ†é˜)**

å°‡è¨è«–çš„ç¯„ä¾‹çµæ§‹åŒ–(è©³è¦‹ 2.1.2)

**æ­¥é©Ÿ 5:ç¸½çµèˆ‡è¡Œå‹•é …**

- âœ… ç¢ºèªç¯„ä¾‹æ¶µè“‹ä¸»è¦å ´æ™¯
- âœ… è­˜åˆ¥éœ€è¦é€²ä¸€æ­¥æ¾„æ¸…çš„å•é¡Œ
- âœ… åˆ†é…å¾ŒçºŒä»»å‹™(æ’°å¯« Featureã€èª¿æŸ¥æŠ€è¡“å¯è¡Œæ€§)

#### Discovery Workshop æœ€ä½³å¯¦å‹™

##### âœ… åšæ³•å»ºè­°

1. **é™åˆ¶æœƒè­°æ™‚é–“**
   - å–®å€‹ Story ä¸è¶…é 60 åˆ†é˜
   - è‹¥ç„¡æ³•åœ¨æ™‚é–“å…§å®Œæˆ,ä»£è¡¨ Story å¤ªå¤§éœ€æ‹†åˆ†

2. **ä½¿ç”¨è¦–è¦ºåŒ–å·¥å…·**
   - ç™½æ¿æˆ–ä¾¿åˆ©è²¼
   - ç·šä¸Šå”ä½œå·¥å…·(Miroã€Mural)
   - Example Mapping æ ¼å¼

3. **å°ˆæ³¨æ–¼ç¯„ä¾‹,è€Œéç´°ç¯€**
   - é¿å…è¨è«–å¯¦ä½œæŠ€è¡“
   - é¿å…é™·å…¥ UI è¨­è¨ˆç´°ç¯€
   - ä¿æŒåœ¨æ¥­å‹™å±¤ç´šçš„å°è©±

4. **è¨˜éŒ„å‡è¨­èˆ‡å•é¡Œ**
   - å»ºç«‹ã€Œå‡è¨­æ¸…å–®ã€
   - å»ºç«‹ã€Œå¾…é‡æ¸…å•é¡Œæ¸…å–®ã€
   - æŒ‡æ´¾è² è²¬äººè¿½è¹¤

##### âŒ æ‡‰é¿å…çš„éŒ¯èª¤

| éŒ¯èª¤åšæ³• | å•é¡Œ | æ­£ç¢ºåšæ³• |
|---------|------|---------|
| åªæœ‰ BA èªªæ˜,å…¶ä»–äººè½ | ç„¡æ³•å»ºç«‹å…±äº«ç†è§£ | é¼“å‹µæ‰€æœ‰äººæå•èˆ‡è²¢ç» |
| è¨è«–æŠ€è¡“å¯¦ä½œç´°ç¯€ | åé›¢æ¥­å‹™éœ€æ±‚ç„¦é» | å°‡æŠ€è¡“è¨è«–å»¶å¾Œåˆ°è¨­è¨ˆéšæ®µ |
| è¿½æ±‚å®Œç¾çš„è¦æ ¼ | æµªè²»æ™‚é–“,é˜»ç¤™é€²åº¦ | å…ˆç”¢å‡º 80% æ­£ç¢ºçš„ç¯„ä¾‹ |
| æ²’æœ‰å…·é«”ç¯„ä¾‹,åªæœ‰æŠ½è±¡æè¿° | å®¹æ˜“ç”¢ç”Ÿèª¤è§£ | æ¯å€‹è¦å‰‡è‡³å°‘ä¸€å€‹å…·é«”ç¯„ä¾‹ |
| æœƒè­°å¾Œæ²’æœ‰ç”¢å‡º | è¨è«–åƒ¹å€¼æµå¤± | ç«‹å³è¨˜éŒ„ Example Map æˆ–ç…§ç‰‡ |

#### Discovery çš„ç”¢å‡º

**ä¸»è¦ç”¢å‡º**:
1. **Example Map**:çµæ§‹åŒ–çš„ç¯„ä¾‹åœ°åœ–
2. **å…±äº«ç†è§£**:åœ˜éšŠå°éœ€æ±‚çš„ä¸€è‡´èªçŸ¥
3. **å•é¡Œæ¸…å–®**:éœ€è¦é€²ä¸€æ­¥é‡æ¸…çš„é …ç›®
4. **ç¯„ä¾‹æ¸…å–®**:å…·é«”çš„æ¸¬è©¦å ´æ™¯

**æ¬¡è¦ç”¢å‡º**:
- è­˜åˆ¥å‡ºçš„æŠ€è¡“é¢¨éšª
- éœ€è¦æ‹†åˆ†çš„å¤§å‹ Story
- èˆ‡å…¶ä»– Story çš„ä¾è³´é—œä¿‚

---

#### 2.1.1 Example Mapping å¯¦å‹™

**Example Mapping** æ˜¯ Discovery éšæ®µæœ€å¸¸ä½¿ç”¨çš„å”ä½œæŠ€å·§,ç”± Matt Wynne æå‡ºã€‚

#### Example Mapping çš„çµæ§‹

```mermaid
graph TB
    subgraph ExampleMap[Example Map çµæ§‹]
        Story[ğŸ“˜ Story - é»ƒè‰²å¡<br/>ä½¿ç”¨è€…æ•…äº‹]
        
        Story --> Rule1[ğŸ“— Rule 1 - è—è‰²å¡<br/>æ¥­å‹™è¦å‰‡]
        Story --> Rule2[ğŸ“— Rule 2 - è—è‰²å¡<br/>æ¥­å‹™è¦å‰‡]
        Story --> Rule3[ğŸ“— Rule 3 - è—è‰²å¡<br/>æ¥­å‹™è¦å‰‡]
        
        Rule1 --> Ex1[ğŸ“„ Example 1 - ç¶ è‰²å¡<br/>å…·é«”ç¯„ä¾‹]
        Rule1 --> Ex2[ğŸ“„ Example 2 - ç¶ è‰²å¡<br/>å…·é«”ç¯„ä¾‹]
        
        Rule2 --> Ex3[ğŸ“„ Example 3 - ç¶ è‰²å¡<br/>å…·é«”ç¯„ä¾‹]
        Rule2 --> Ex4[ğŸ“„ Example 4 - ç¶ è‰²å¡<br/>å…·é«”ç¯„ä¾‹]
        
        Rule3 --> Ex5[ğŸ“„ Example 5 - ç¶ è‰²å¡<br/>å…·é«”ç¯„ä¾‹]
        
        Story --> Q1[â“ Question - ç´…è‰²å¡<br/>å¾…é‡æ¸…å•é¡Œ]
        Story --> Q2[â“ Question - ç´…è‰²å¡<br/>å¾…é‡æ¸…å•é¡Œ]
    end
    
    style Story fill:#fff9c4
    style Rule1 fill:#bbdefb
    style Rule2 fill:#bbdefb
    style Rule3 fill:#bbdefb
    style Ex1 fill:#c8e6c9
    style Ex2 fill:#c8e6c9
    style Ex3 fill:#c8e6c9
    style Ex4 fill:#c8e6c9
    style Ex5 fill:#c8e6c9
    style Q1 fill:#ffcdd2
    style Q2 fill:#ffcdd2
```

#### å››ç¨®å¡ç‰‡çš„ä½¿ç”¨èªªæ˜

| å¡ç‰‡é¡å‹ | é¡è‰² | å…§å®¹ | ç¯„ä¾‹ |
|---------|------|------|------|
| **Story** | ğŸŸ¨ é»ƒè‰² | User Story æ•˜è¿° | "èº«ç‚ºå®¢æˆ¶,æˆ‘æƒ³è¦è½‰å¸³çµ¦æœ‹å‹" |
| **Rule** | ğŸŸ¦ è—è‰² | æ¥­å‹™è¦å‰‡æˆ–é©—æ”¶æº–å‰‡ | "é¤˜é¡å¿…é ˆè¶³å¤ "ã€"æ¯æ—¥é™é¡ 10 è¬" |
| **Example** | ğŸŸ© ç¶ è‰² | èªªæ˜è¦å‰‡çš„å…·é«”ç¯„ä¾‹ | "é¤˜é¡ 5000,è½‰å¸³ 3000 â†’ æˆåŠŸ" |
| **Question** | ğŸŸ¥ ç´…è‰² | éœ€è¦é‡æ¸…çš„å•é¡Œæˆ–å‡è¨­ | "æ˜¯å¦éœ€è¦é›™é‡é©—è­‰?" |

#### Example Mapping å¯¦æˆ°æ¼”ç·´

**æƒ…å¢ƒ:éŠ€è¡Œè½‰å¸³åŠŸèƒ½**

```
ğŸŸ¨ [Story]
èº«ç‚ºéŠ€è¡Œå®¢æˆ¶
æˆ‘æƒ³è¦è½‰å¸³çµ¦å…¶ä»–å¸³æˆ¶
ä»¥ä¾¿å¿«é€Ÿä»˜æ¬¾çµ¦æœ‹å‹æˆ–å•†å®¶

â”œâ”€ ğŸŸ¦ [Rule 1] é¤˜é¡å¿…é ˆè¶³å¤ 
â”‚  â”œâ”€ ğŸŸ© [Example] é¤˜é¡ 10,000,è½‰å¸³ 5,000 â†’ æˆåŠŸ,å‰© 5,000
â”‚  â”œâ”€ ğŸŸ© [Example] é¤˜é¡ 3,000,è½‰å¸³ 5,000 â†’ å¤±æ•—,é¡¯ç¤ºã€Œé¤˜é¡ä¸è¶³ã€
â”‚  â””â”€ ğŸŸ© [Example] é¤˜é¡ 5,000,è½‰å¸³ 5,000 â†’ æˆåŠŸ,å‰© 0
â”‚
â”œâ”€ ğŸŸ¦ [Rule 2] æ¯æ—¥è½‰å¸³é™é¡ 10 è¬å…ƒ
â”‚  â”œâ”€ ğŸŸ© [Example] ç•¶æ—¥å·²è½‰ 8 è¬,å†è½‰ 1 è¬ â†’ æˆåŠŸ(ç¸½è¨ˆ 9 è¬)
â”‚  â”œâ”€ ğŸŸ© [Example] ç•¶æ—¥å·²è½‰ 9.5 è¬,å†è½‰ 1 è¬ â†’ å¤±æ•—,é¡¯ç¤ºã€Œè¶…éæ¯æ—¥é™é¡ã€
â”‚  â””â”€ ğŸŸ¥ [Question] é™é¡æ˜¯å¦åŒ…å«è·¨è¡Œè½‰å¸³?
â”‚
â”œâ”€ ğŸŸ¦ [Rule 3] æ”¶æ¬¾å¸³è™Ÿå¿…é ˆæœ‰æ•ˆ
â”‚  â”œâ”€ ğŸŸ© [Example] è¼¸å…¥æ­£ç¢ºå¸³è™Ÿ â†’ é¡¯ç¤ºæˆ¶åä¾›ç¢ºèª
â”‚  â”œâ”€ ğŸŸ© [Example] è¼¸å…¥éŒ¯èª¤å¸³è™Ÿ â†’ é¡¯ç¤ºã€ŒæŸ¥ç„¡æ­¤å¸³è™Ÿã€
â”‚  â””â”€ ğŸŸ¥ [Question] æ˜¯å¦é©—è­‰æ”¶æ¬¾éŠ€è¡Œçš„ç‡Ÿæ¥­ç‹€æ…‹?
â”‚
â””â”€ ğŸŸ¥ [Question] è½‰å¸³å¤±æ•—æ™‚æ˜¯å¦ç™¼é€é€šçŸ¥?
```

#### Example Mapping æœƒè­°æµç¨‹

##### 1. é–‹å§‹(2åˆ†é˜)

- åœ¨ç™½æ¿é ‚ç«¯æ”¾ç½®é»ƒè‰² Story å¡
- èªªæ˜æœƒè­°ç›®æ¨™:ç”¢ç”Ÿç¯„ä¾‹,å»ºç«‹å…±è­˜

##### 2. æå–è¦å‰‡(10-15åˆ†é˜)

- åœ˜éšŠè¨è«–ä¸¦è­˜åˆ¥æ¥­å‹™è¦å‰‡
- æ¯å€‹è¦å‰‡å¯«åœ¨è—è‰²å¡ç‰‡ä¸Š
- æ”¾åœ¨ Story ä¸‹æ–¹

##### 3. ç”¢ç”Ÿç¯„ä¾‹(15-25åˆ†é˜)

- é‡å°æ¯å€‹è¦å‰‡,æå‡ºå…·é«”ç¯„ä¾‹
- æ¯å€‹ç¯„ä¾‹å¯«åœ¨ç¶ è‰²å¡ç‰‡ä¸Š
- æ”¾åœ¨å°æ‡‰è¦å‰‡ä¸‹æ–¹
- è©¦è‘—æ¶µè“‹:æ­£å¸¸ã€ç•°å¸¸ã€é‚Šç•Œ

##### 4. è¨˜éŒ„å•é¡Œ(æŒçºŒé€²è¡Œ)

- é‡åˆ°ä¸ç¢ºå®šæˆ–éœ€é‡æ¸…çš„å•é¡Œ
- å¯«åœ¨ç´…è‰²å¡ç‰‡ä¸Š
- ä¸è¦é™·å…¥é•·æ™‚é–“è¨è«–,å…ˆè¨˜éŒ„å¾ŒçºŒè™•ç†

##### 5. çµæŸèˆ‡æ±ºç­–(5åˆ†é˜)

- è©•ä¼° Story çš„å°±ç·’ç¨‹åº¦
- åˆ¤æ–·æº–å‰‡:

```text
âœ… Ready for Development (å¯ä»¥é–‹ç™¼)
- æœ‰æ˜ç¢ºçš„æ¥­å‹™è¦å‰‡
- æ¯å€‹è¦å‰‡æœ‰å…·é«”ç¯„ä¾‹
- ç´…è‰²å¡ç‰‡å°‘æ–¼ 3 å¼µ
- åœ˜éšŠå°éœ€æ±‚æœ‰å…±è­˜

âš ï¸ Need More Discovery (éœ€è¦æ›´å¤šæ¢ç´¢)
- ç´…è‰²å¡ç‰‡å¤ªå¤š(>3å¼µ)
- è¦å‰‡ä¸æ˜ç¢ºæˆ–æœ‰è¡çª
- ç¯„ä¾‹é›£ä»¥ç”¢ç”Ÿ

ğŸ”´ Too Big (Story å¤ªå¤§)
- è¶…é 8 å€‹è¦å‰‡
- æœƒè­°è¶…æ™‚ä»ç„¡æ³•å®Œæˆ
- å»ºè­°:æ‹†åˆ†æˆå¤šå€‹å° Story
```

#### Example Mapping çš„è®ŠåŒ–å½¢å¼

**ç·šä¸Šå”ä½œç‰ˆæœ¬**

ä½¿ç”¨å·¥å…·:Miroã€Muralã€FigJam

```
[Virtual Board Layout]

ğŸŸ¨ Story
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ èº«ç‚º...æˆ‘æƒ³è¦...ä»¥ä¾¿...            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸŸ¦ Rule 1          ğŸŸ¦ Rule 2          ğŸŸ¦ Rule 3
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¥­å‹™è¦å‰‡æè¿°  â”‚  â”‚ æ¥­å‹™è¦å‰‡æè¿°  â”‚  â”‚ æ¥­å‹™è¦å‰‡æè¿°  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“                   â†“                   â†“
ğŸŸ© Example 1-1    ğŸŸ© Example 2-1    ğŸŸ© Example 3-1
ğŸŸ© Example 1-2    ğŸŸ© Example 2-2    
ğŸŸ© Example 1-3    

ğŸŸ¥ Questions
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ? å•é¡Œ 1                            â”‚
â”‚ ? å•é¡Œ 2                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 2.2 Formulation(ç¯„ä¾‹å®šç¾©)

#### ä»€éº¼æ˜¯ Formulation

**Formulation** æ˜¯å°‡ Discovery éšæ®µç”¢ç”Ÿçš„ç¯„ä¾‹,è½‰åŒ–ç‚º**çµæ§‹åŒ–è¦æ ¼**çš„éç¨‹ã€‚é€™å€‹éšæ®µä½¿ç”¨ **Gherkin èªæ³•**å°‡ç¯„ä¾‹å¯«æˆå¯åŸ·è¡Œçš„ Feature Filesã€‚

```mermaid
graph LR
    A[Example Map] --> B[Formulation éç¨‹]
    B --> C[Feature File]
    
    B --> B1[é¸æ“‡ç¯„ä¾‹]
    B --> B2[çµæ§‹åŒ–æè¿°]
    B --> B3[ä½¿ç”¨ Gherkin]
    B --> B4[Review & Refine]
    
    style A fill:#c8e6c9
    style B fill:#fff4e1
    style C fill:#bbdefb
```

#### Formulation çš„ç›®æ¨™

1. **ç²¾ç¢ºè¡¨é”**:å°‡ç¯„ä¾‹è½‰æ›ç‚ºæ˜ç¢ºçš„ Given-When-Then æ ¼å¼
2. **å¯åŸ·è¡Œæ€§**:è¦æ ¼å¯ç›´æ¥è½‰ç‚ºè‡ªå‹•åŒ–æ¸¬è©¦
3. **å¯è®€æ€§**:éæŠ€è¡“äººå“¡ä¹Ÿèƒ½ç†è§£
4. **å¯ç¶­è­·æ€§**:æ˜“æ–¼æ›´æ–°èˆ‡æ“´å±•

#### å¾ Example Map åˆ° Feature File

**ç¯„ä¾‹:å¾ä¾¿åˆ©è²¼åˆ° Gherkin**

**Step 1:Example Map çš„ç¶ è‰²å¡ç‰‡**
```
ğŸŸ© é¤˜é¡ 10,000,è½‰å¸³ 5,000 â†’ æˆåŠŸ,å‰© 5,000
ğŸŸ© é¤˜é¡ 3,000,è½‰å¸³ 5,000 â†’ å¤±æ•—,é¡¯ç¤ºã€Œé¤˜é¡ä¸è¶³ã€
```

**Step 2:è½‰æ›ç‚º Gherkin**
```gherkin
Scenario: é¤˜é¡è¶³å¤ æ™‚æˆåŠŸè½‰å¸³
  Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ
  When æˆ‘è½‰å¸³ 5000 å…ƒçµ¦æœ‹å‹
  Then è½‰å¸³æ‡‰è©²æˆåŠŸ
  And æˆ‘çš„å¸³æˆ¶é¤˜é¡æ‡‰è©²æ˜¯ 5000 å…ƒ

Scenario: é¤˜é¡ä¸è¶³æ™‚è½‰å¸³å¤±æ•—
  Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 3000 å…ƒ
  When æˆ‘è½‰å¸³ 5000 å…ƒçµ¦æœ‹å‹
  Then è½‰å¸³æ‡‰è©²å¤±æ•—
  And æ‡‰è©²é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ "é¤˜é¡ä¸è¶³"
```

#### Feature File çš„çµæ§‹

```gherkin
# åŠŸèƒ½æè¿°(Feature)
Feature: ç°¡çŸ­æ¨™é¡Œ
  ä½œç‚º [è§’è‰²]
  æˆ‘æƒ³è¦ [åŠŸèƒ½]
  ä»¥ä¾¿ [æ¥­å‹™åƒ¹å€¼]

  # èƒŒæ™¯(å¯é¸)
  Background: å…±åŒçš„å‰ç½®æ¢ä»¶
    Given é è¨­ç‹€æ…‹

  # å ´æ™¯(Scenario)
  Scenario: å ´æ™¯åç¨±
    Given å‰ç½®æ¢ä»¶
    When åŸ·è¡Œå‹•ä½œ
    Then é æœŸçµæœ
    
  # å ´æ™¯å¤§ç¶±(è³‡æ–™é©…å‹•)
  Scenario Outline: å ´æ™¯æ¨¡æ¿
    Given å¸³æˆ¶é¤˜é¡ç‚º <é¤˜é¡> å…ƒ
    When è½‰å¸³ <é‡‘é¡> å…ƒ
    Then çµæœæ‡‰ç‚º <çµæœ>
    
    Examples:
      | é¤˜é¡  | é‡‘é¡  | çµæœ |
      | 10000 | 5000  | æˆåŠŸ |
      | 3000  | 5000  | å¤±æ•— |
```

#### Formulation çš„å¯¦æ–½æ­¥é©Ÿ

**æ­¥é©Ÿ 1:é¸æ“‡ç¯„ä¾‹å„ªå…ˆé †åº**

```
å„ªå…ˆç´šæ’åº:
1. ğŸ”´ æ ¸å¿ƒæ­£å¸¸æµç¨‹(Happy Path)
2. ğŸŸ  å¸¸è¦‹ç•°å¸¸æƒ…æ³
3. ğŸŸ¡ é‚Šç•Œæ¢ä»¶
4. ğŸŸ¢ ç‰¹æ®Šæ¥­å‹™è¦å‰‡
5. ğŸ”µ éåŠŸèƒ½éœ€æ±‚é©—è­‰
```

**æ­¥é©Ÿ 2:æ’°å¯« Feature æè¿°**

- ä½¿ç”¨ User Story æ ¼å¼
- èªªæ˜åŠŸèƒ½çš„æ¥­å‹™åƒ¹å€¼
- ä¿æŒç°¡æ½”(2-4 å¥è©±)

**æ­¥é©Ÿ 3:æ’°å¯« Scenario**

éµå¾ª **Given-When-Then** çµæ§‹:
- **Given**(å‰æ):ç³»çµ±çš„åˆå§‹ç‹€æ…‹
- **When**(ç•¶):ä½¿ç”¨è€…çš„æ“ä½œ
- **Then**(é‚£éº¼):é æœŸçš„çµæœ

**æ­¥é©Ÿ 4:Review èˆ‡ç²¾ç…‰**

- èˆ‡åœ˜éšŠ Review,ç¢ºä¿ç†è§£ä¸€è‡´
- æª¢æŸ¥èªè¨€æ˜¯å¦ä½¿ç”¨é ˜åŸŸè¡“èª
- ç¢ºèªå¯æ¸¬è©¦æ€§

#### Formulation æœ€ä½³å¯¦å‹™

##### âœ… å¥½çš„ Feature ç‰¹å¾µ

```gherkin
# âœ… å¥½çš„ç¯„ä¾‹:æ¸…æ¥šã€å…·é«”ã€å¯æ¸¬è©¦
Scenario: é¦–æ¬¡è³¼è²·äº«æœ‰æ–°å®¢æŠ˜æ‰£
  Given æˆ‘æ˜¯æ–°è¨»å†Šçš„æœƒå“¡
  And è³¼ç‰©è»Šæœ‰å•†å“ç¸½åƒ¹ 1000 å…ƒ
  When æˆ‘çµå¸³æ™‚
  Then æ‡‰è©²è‡ªå‹•å¥—ç”¨ 100 å…ƒæ–°å®¢æŠ˜æ‰£
  And å¯¦éš›ä»˜æ¬¾é‡‘é¡æ‡‰è©²æ˜¯ 900 å…ƒ
```

##### âŒ ä¸å¥½çš„ Feature ç‰¹å¾µ

```gherkin
# âŒ ä¸å¥½çš„ç¯„ä¾‹:æ¨¡ç³Šã€ç„¡æ³•æ¸¬è©¦
Scenario: è³¼è²·å„ªæƒ 
  Given ä½¿ç”¨è€…
  When è²·æ±è¥¿
  Then æœ‰æŠ˜æ‰£

# å•é¡Œ:
# - ä»€éº¼æ¨£çš„ä½¿ç”¨è€…?
# - è²·ä»€éº¼æ±è¥¿?å¤šå°‘éŒ¢?
# - ä»€éº¼æŠ˜æ‰£?å¤šå°‘é‡‘é¡?
```

#### Formulation çš„æ³¨æ„äº‹é …

##### 1. ä½¿ç”¨æ¥­å‹™èªè¨€,é¿å…æŠ€è¡“ç´°ç¯€

```gherkin
# âŒ æŠ€è¡“å°å‘
Given è³‡æ–™åº«æœ‰ä¸€ç­† user_id=123 çš„è¨˜éŒ„
When POST /api/transfer with {"amount":5000}
Then HTTP 200 and database updated

# âœ… æ¥­å‹™å°å‘
Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ
When æˆ‘è½‰å¸³ 5000 å…ƒçµ¦æœ‹å‹
Then è½‰å¸³æ‡‰è©²æˆåŠŸ
And æˆ‘çš„å¸³æˆ¶é¤˜é¡æ‡‰è©²æ˜¯ 5000 å…ƒ
```

##### 2. ä¸€å€‹ Scenario é©—è­‰ä¸€å€‹è¡Œç‚º

```gherkin
# âŒ å¤ªå¤šè¡Œç‚ºæ··åœ¨ä¸€èµ·
Scenario: è³¼ç‰©æµç¨‹
  Given æˆ‘ç€è¦½å•†å“
  When æˆ‘åŠ å…¥è³¼ç‰©è»Š
  And æˆ‘ä¿®æ”¹æ•¸é‡
  And æˆ‘è¼¸å…¥å„ªæƒ ç¢¼
  And æˆ‘é¸æ“‡ä»˜æ¬¾æ–¹å¼
  And æˆ‘ç¢ºèªè¨‚å–®
  Then è¨‚å–®æˆç«‹
  # å•é¡Œ:å¤ªé•·,é›£ä»¥ç¶­è­·

# âœ… æ‹†åˆ†ç‚ºå¤šå€‹ Scenario
Scenario: å°‡å•†å“åŠ å…¥è³¼ç‰©è»Š
Scenario: ä¿®æ”¹è³¼ç‰©è»Šå•†å“æ•¸é‡
Scenario: å¥—ç”¨å„ªæƒ ç¢¼
Scenario: ç¢ºèªè¨‚å–®ä¸¦ä»˜æ¬¾
```

##### 3. é¿å… UI ç´°ç¯€

```gherkin
# âŒ éæ–¼é—œæ³¨ UI
Given æˆ‘é»æ“Šå·¦ä¸Šè§’çš„é¸å–®æŒ‰éˆ•
When æˆ‘åœ¨ç¬¬äºŒå€‹æ¬„ä½è¼¸å…¥ "5000"
And æˆ‘é»æ“Šè—è‰²çš„"ç¢ºèª"æŒ‰éˆ•

# âœ… é—œæ³¨æ¥­å‹™è¡Œç‚º
Given æˆ‘é–‹å•Ÿè½‰å¸³åŠŸèƒ½
When æˆ‘è¼¸å…¥è½‰å¸³é‡‘é¡ 5000 å…ƒ
And æˆ‘ç¢ºèªè½‰å¸³
```

---

### 2.3 Automation(è‡ªå‹•åŒ–é©—è­‰)

#### ä»€éº¼æ˜¯ Automation

**Automation** æ˜¯ BDD ä¸‰å¤§æ”¯æŸ±çš„æœ€å¾Œéšæ®µ,å°‡ Feature Files è½‰æ›ç‚º**å¯åŸ·è¡Œçš„è‡ªå‹•åŒ–æ¸¬è©¦**ã€‚

```mermaid
graph TB
    A[Feature File] --> B[è‡ªå‹•åŒ–æ¡†æ¶]
    B --> C[Step Definitions]
    C --> D[æ‡‰ç”¨ç¨‹å¼]
    D --> E[æ¸¬è©¦çµæœ]
    
    B -->|è§£æ| B1[Gherkin Parser]
    C -->|å¯¦ä½œ| C1[æ¸¬è©¦ç¨‹å¼ç¢¼]
    D -->|åŸ·è¡Œ| D1[çœŸå¯¦ç³»çµ±]
    E -->|ç”¢å‡º| E1[æ¸¬è©¦å ±å‘Š]
    
    style A fill:#bbdefb
    style C fill:#fff4e1
    style E fill:#c8e6c9
```

#### Automation çš„æ ¸å¿ƒæ¦‚å¿µ

**é—œéµå…ƒç´ **:

1. **Feature Files**:Gherkin è¦æ ¼(äººé¡å¯è®€)
2. **Step Definitions**:é€£æ¥è¦æ ¼èˆ‡ç¨‹å¼ç¢¼çš„æ©‹æ¨‘
3. **Automation Framework**:åŸ·è¡Œå¼•æ“(å¦‚ Cucumber)
4. **Application Under Test**:å¾…æ¸¬ç³»çµ±
5. **Test Report**:åŸ·è¡Œçµæœå ±å‘Š

#### Step Definitions çš„è§’è‰²

**Step Definitions** æ˜¯å°‡è‡ªç„¶èªè¨€(Gherkin)è½‰æ›ç‚ºç¨‹å¼ç¢¼çš„é—œéµã€‚

```gherkin
# Feature File (Gherkin)
Scenario: æˆåŠŸè½‰å¸³
  Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ
  When æˆ‘è½‰å¸³ 5000 å…ƒçµ¦å¸³æˆ¶ "9876543210"
  Then æˆ‘çš„å¸³æˆ¶é¤˜é¡æ‡‰è©²æ˜¯ 5000 å…ƒ
```

```python
# Step Definitions (Python + Behave)
from behave import given, when, then

@given('æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º {amount:d} å…ƒ')
def step_set_balance(context, amount):
    context.account = BankAccount()
    context.account.set_balance(amount)

@when('æˆ‘è½‰å¸³ {amount:d} å…ƒçµ¦å¸³æˆ¶ "{target}"')
def step_transfer(context, amount, target):
    context.result = context.account.transfer(amount, target)

@then('æˆ‘çš„å¸³æˆ¶é¤˜é¡æ‡‰è©²æ˜¯ {expected:d} å…ƒ')
def step_verify_balance(context, expected):
    assert context.account.get_balance() == expected
```

#### Automation çš„å¯¦æ–½å±¤æ¬¡

```mermaid
graph TB
    subgraph BDD_Layers[BDD è‡ªå‹•åŒ–åˆ†å±¤]
        L1[Feature Layer<br/>æ¥­å‹™è¦æ ¼å±¤]
        L2[Step Definition Layer<br/>æ¸¬è©¦é‚è¼¯å±¤]
        L3[Page Object / API Layer<br/>æŠ½è±¡ä»‹é¢å±¤]
        L4[Application Layer<br/>æ‡‰ç”¨ç¨‹å¼å±¤]
        
        L1 -->|Gherkin| L2
        L2 -->|æ¸¬è©¦ç¨‹å¼ç¢¼| L3
        L3 -->|äº’å‹•| L4
    end
    
    style L1 fill:#e1f5ff
    style L2 fill:#fff4e1
    style L3 fill:#e7f5e1
    style L4 fill:#ffe1e1
```

**å„å±¤è·è²¬**:

| å±¤æ¬¡ | å…§å®¹ | è² è²¬äºº | ç¯„ä¾‹ |
|------|------|--------|------|
| Feature Layer | Gherkin è¦æ ¼ | BA/SA/QA | `Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ` |
| Step Definition | é€£æ¥é‚è¼¯ | Dev/QA | `@given('æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º {amount} å…ƒ')` |
| Abstraction Layer | æ¸¬è©¦è¼”åŠ© | Dev/QA | `BankAccountHelper.setBalance()` |
| Application Layer | æ¥­å‹™é‚è¼¯ | Dev | `BankAccount.transfer()` |

#### Automation çš„å¯¦æ–½æ­¥é©Ÿ

**éšæ®µ 1:ç’°å¢ƒè¨­å®š**

1. é¸æ“‡ BDD æ¡†æ¶(Cucumber/SpecFlow/Behave)
2. è¨­å®šå°ˆæ¡ˆçµæ§‹
3. æ•´åˆæ¸¬è©¦ç’°å¢ƒ

**éšæ®µ 2:å¯¦ä½œ Step Definitions**

```python
# åŸºæœ¬æ¨¡å¼
@given('å‰ç½®æ¢ä»¶')
def setup():
    # æº–å‚™æ¸¬è©¦è³‡æ–™
    # è¨­å®šç³»çµ±ç‹€æ…‹
    pass

@when('åŸ·è¡Œå‹•ä½œ')
def action():
    # åŸ·è¡Œæ¸¬è©¦æ“ä½œ
    # è¨˜éŒ„çµæœ
    pass

@then('é©—è­‰çµæœ')
def verify():
    # æ–·è¨€æª¢æŸ¥
    # æ¯”å°é æœŸèˆ‡å¯¦éš›
    pass
```

**éšæ®µ 3:åŸ·è¡Œèˆ‡é©—è­‰**

```bash
# åŸ·è¡Œ BDD æ¸¬è©¦
behave features/

# åŸ·è¡Œç‰¹å®š Feature
behave features/transfer.feature

# åŸ·è¡Œç‰¹å®š Scenario
behave features/transfer.feature:10
```

**éšæ®µ 4:ç”¢å‡ºå ±å‘Š**

```
åŠŸèƒ½: éŠ€è¡Œè½‰å¸³
  âœ“ é¤˜é¡è¶³å¤ æ™‚æˆåŠŸè½‰å¸³
  âœ“ é¤˜é¡ä¸è¶³æ™‚è½‰å¸³å¤±æ•—
  âœ— è¶…éæ¯æ—¥é™é¡æ™‚è½‰å¸³å¤±æ•—
    Expected: "è¶…éæ¯æ—¥é™é¡"
    Actual: "é¤˜é¡ä¸è¶³"

2 scenarios passed, 1 failed, 0 skipped
15 steps passed, 1 failed, 3 skipped
```

#### Automation æœ€ä½³å¯¦å‹™

##### âœ… è‰¯å¥½çš„ Step Definition

```python
# âœ… å¯é‡ç”¨ã€åƒæ•¸åŒ–ã€æ¸…æ™°
@given('å¸³æˆ¶é¤˜é¡ç‚º {amount:d} å…ƒ')
def step_set_balance(context, amount):
    context.account.set_balance(amount)

@given('å¸³æˆ¶é¤˜é¡ç‚º {amount:d} å…ƒä¸”æ¯æ—¥å·²è½‰ {daily_used:d} å…ƒ')
def step_set_balance_with_daily_limit(context, amount, daily_used):
    context.account.set_balance(amount)
    context.account.set_daily_transferred(daily_used)
```

##### âŒ ä¸è‰¯çš„ Step Definition

```python
# âŒ ç¡¬ç·¨ç¢¼ã€ä¸å¯é‡ç”¨
@given('å¸³æˆ¶æœ‰ä¸€è¬å…ƒ')
def step_impl(context):
    context.account.set_balance(10000)

@given('å¸³æˆ¶æœ‰äº”åƒå…ƒ')
def step_impl(context):
    context.account.set_balance(5000)
# å•é¡Œ:æ¯å€‹é‡‘é¡éƒ½è¦å¯«ä¸€å€‹æ–°çš„ step
```

#### Automation çš„é—œéµåŸå‰‡

##### 1. ä¿æŒ Step Definitions ç°¡æ½”

```python
# âœ… å¥½çš„:ç°¡æ½”æ˜ç­
@when('æˆ‘è½‰å¸³ {amount:d} å…ƒ')
def step_impl(context, amount):
    context.result = context.account.transfer(amount)

# âŒ ä¸å¥½çš„:åŒ…å«å¤ªå¤šé‚è¼¯
@when('æˆ‘è½‰å¸³ {amount:d} å…ƒ')
def step_impl(context, amount):
    # æª¢æŸ¥é¤˜é¡
    if context.account.balance < amount:
        context.result = False
    else:
        # æ‰£æ¬¾
        context.account.balance -= amount
        # è¨˜éŒ„äº¤æ˜“
        context.account.add_transaction(amount)
        # ç™¼é€é€šçŸ¥
        send_notification()
    # æ‡‰è©²å°‡é€™äº›é‚è¼¯æ”¾åœ¨æ‡‰ç”¨ç¨‹å¼å±¤
```

##### 2. ä½¿ç”¨ Page Object Pattern(Web UI æ¸¬è©¦)

```python
# Page Object
class TransferPage:
    def input_amount(self, amount):
        self.driver.find_element(By.ID, "amount").send_keys(amount)
    
    def input_target_account(self, account):
        self.driver.find_element(By.ID, "target").send_keys(account)
    
    def click_submit(self):
        self.driver.find_element(By.ID, "submit").click()

# Step Definition
@when('æˆ‘è½‰å¸³ {amount:d} å…ƒçµ¦å¸³æˆ¶ "{target}"')
def step_impl(context, amount, target):
    page = TransferPage(context.driver)
    page.input_amount(amount)
    page.input_target_account(target)
    page.click_submit()
```

##### 3. é©ç•¶çš„æŠ½è±¡å±¤æ¬¡

```python
# âœ… Feature å±¤æ¬¡:æ¥­å‹™èªè¨€
Given æˆ‘æ˜¯ä¸€èˆ¬æœƒå“¡
When æˆ‘è³¼è²·å•†å“ç¸½åƒ¹ 1000 å…ƒ
Then æˆ‘æ‡‰è©²ç²å¾— 10 é»ç´…åˆ©

# âœ… Step Definition å±¤æ¬¡:æ¸¬è©¦é‚è¼¯
@given('æˆ‘æ˜¯ä¸€èˆ¬æœƒå“¡')
def step_impl(context):
    context.user = create_user(membership='regular')

# âœ… Helper å±¤æ¬¡:æŠ€è¡“ç´°ç¯€
def create_user(membership):
    return User.objects.create(
        username='test_user',
        membership_level=membership
    )
```

---

### ğŸ“ ç¬¬äºŒç« ç¸½çµèˆ‡å¯¦å‹™è¦é»

#### é—œéµè¦é»å›é¡§

âœ… **BDD ä¸‰å¤§æ”¯æŸ±çš„é—œä¿‚**

```mermaid
graph LR
    D[Discovery<br/>å»ºç«‹å…±è­˜] --> F[Formulation<br/>å®šç¾©è¦æ ¼]
    F --> A[Automation<br/>è‡ªå‹•é©—è­‰]
    A -.æŒçºŒå›é¥‹.-> D
    
    style D fill:#e1f5ff
    style F fill:#fff4e1
    style A fill:#e7f5e1
```

âœ… **Discovery:éœ€æ±‚æ¢ç´¢**
- é€éå”ä½œå°è©±å»ºç«‹å…±äº«ç†è§£
- ä½¿ç”¨ Example Mapping çµæ§‹åŒ–ç¯„ä¾‹
- è­˜åˆ¥æ¥­å‹™è¦å‰‡èˆ‡æ¸¬è©¦å ´æ™¯
- ç”¢å‡º:Example Mapã€ç¯„ä¾‹æ¸…å–®ã€å•é¡Œæ¸…å–®

âœ… **Formulation:ç¯„ä¾‹å®šç¾©**
- å°‡ç¯„ä¾‹è½‰æ›ç‚º Gherkin è¦æ ¼
- æ’°å¯« Feature Files
- ä½¿ç”¨ Given-When-Then æ ¼å¼
- ç”¢å‡º:å¯åŸ·è¡Œçš„è¦æ ¼æ–‡ä»¶

âœ… **Automation:è‡ªå‹•åŒ–é©—è­‰**
- å¯¦ä½œ Step Definitions
- å»ºç«‹è‡ªå‹•åŒ–æ¸¬è©¦
- æ•´åˆ CI/CD Pipeline
- ç”¢å‡º:å¯åŸ·è¡Œæ¸¬è©¦ã€æ¸¬è©¦å ±å‘Š

---

#### ğŸ¯ æª¢æŸ¥æ¸…å–®:æŒæ¡ BDD ä¸‰å¤§æ”¯æŸ±

**Discovery éšæ®µ**:
- [ ] èƒ½çµ„ç¹”ä¸¦å¼•å° Discovery Workshop
- [ ] æœƒä½¿ç”¨ Example Mapping æŠ€å·§
- [ ] èƒ½å¾å°è©±ä¸­æå–æ¥­å‹™è¦å‰‡
- [ ] çŸ¥é“å¦‚ä½•è­˜åˆ¥èˆ‡è¨˜éŒ„å•é¡Œ

**Formulation éšæ®µ**:
- [ ] èƒ½å°‡ç¯„ä¾‹è½‰æ›ç‚º Gherkin æ ¼å¼
- [ ] ç†è§£ Feature/Scenario/Scenario Outline çš„ä½¿ç”¨
- [ ] æœƒæ’°å¯«æ¸…æ™°çš„ Given-When-Then
- [ ] èƒ½ Review ä¸¦ç²¾ç…‰ Feature Files

**Automation éšæ®µ**:
- [ ] ç†è§£ Step Definitions çš„è§’è‰²
- [ ] çŸ¥é“è‡ªå‹•åŒ–çš„åˆ†å±¤æ¶æ§‹
- [ ] èƒ½å¯¦ä½œåŸºæœ¬çš„ Step Definitions
- [ ] äº†è§£å¦‚ä½•æ•´åˆæ¸¬è©¦æ¡†æ¶

---

#### âš ï¸ å¸¸è¦‹é™·é˜±èˆ‡è§£æ±ºæ–¹æ¡ˆ

| é™·é˜± | å¾Œæœ | è§£æ±ºæ–¹æ¡ˆ |
|------|------|---------|
| è·³é Discovery ç›´æ¥å¯« Feature | éœ€æ±‚ç†è§£åå·® | å…ˆå°è©±,å¾Œæ’°å¯« |
| Example Map æ²’æœ‰å…·é«”ç¯„ä¾‹ | è¦æ ¼æ¨¡ç³Šä¸æ¸… | æ¯å€‹è¦å‰‡è‡³å°‘ä¸€å€‹ç¯„ä¾‹ |
| Feature å¯«å¾—å¤ªæŠ€è¡“åŒ– | æ¥­å‹™äººå“¡ç„¡æ³•ç†è§£ | ä½¿ç”¨é ˜åŸŸèªè¨€,é¿å…æŠ€è¡“ç´°ç¯€ |
| Step Definition åŒ…å«æ¥­å‹™é‚è¼¯ | æ¸¬è©¦èˆ‡ç¨‹å¼è€¦åˆ | é‚è¼¯æ”¾æ‡‰ç”¨å±¤,Step åªåšé€£æ¥ |
| æ²’æœ‰æŒçºŒç¶­è­· Feature Files | æ–‡ä»¶èˆ‡ç¨‹å¼ä¸ä¸€è‡´ | Feature è¦–ç‚ºç”¢å“ç¨‹å¼ç¢¼ç¶­è­· |

---

#### ğŸ’¡ å¯¦å‹™å»ºè­°

**çµ¦ SA çš„å»ºè­°**:
1. Discovery æ˜¯æœ€é‡è¦çš„éšæ®µ,ä¸è¦çœç•¥
2. Example Mapping éœ€è¦ç·´ç¿’,å¾ç°¡å–® Story é–‹å§‹
3. Feature File æ˜¯æºé€šå·¥å…·,å„ªå…ˆè€ƒæ…®å¯è®€æ€§
4. èˆ‡é–‹ç™¼äººå“¡å”ä½œ,ç¢ºä¿ Feature å¯è‡ªå‹•åŒ–

**çµ¦ Dev çš„å»ºè­°**:
1. ç©æ¥µåƒèˆ‡ Discovery,æä¾›æŠ€è¡“è§€é»
2. Step Definitions è¦ä¿æŒç°¡æ½”èˆ‡å¯é‡ç”¨
3. å»ºç«‹è‰¯å¥½çš„æ¸¬è©¦è¼”åŠ©å±¤(Helper/Page Object)
4. å°‡ BDD æ¸¬è©¦æ•´åˆé€² CI/CD

**çµ¦ QA çš„å»ºè­°**:
1. åœ¨ Discovery éšæ®µè²¢ç»æ¸¬è©¦æ€ç¶­
2. å”åŠ© Review Feature Files çš„æ¸¬è©¦è¦†è“‹åº¦
3. åƒèˆ‡ Step Definitions çš„å¯¦ä½œ
4. ç›£æ§æ¸¬è©¦åŸ·è¡Œçµæœ,å›é¥‹å•é¡Œ

---

**ä¸‹ä¸€ç« é å‘Š**:
æˆ‘å€‘å°‡è©³ç´°ä»‹ç´¹ **BDD çš„æ ¸å¿ƒèªæ³•:Gherkin**,åŒ…æ‹¬å®Œæ•´çš„èªæ³•è¦å‰‡ã€å¸¸è¦‹æ¨¡å¼èˆ‡æœ€ä½³å¯¦å‹™,è®“ä½ èƒ½æ’°å¯«é«˜å“è³ªçš„ Feature Filesã€‚

---

## ç¬¬ä¸‰ç« ã€€BDD çš„æ ¸å¿ƒèªæ³•:Gherkin

Gherkin æ˜¯ BDD çš„æ¨™æº–èªè¨€,ç”¨æ–¼æ’°å¯«å¯åŸ·è¡Œè¦æ ¼ã€‚å®ƒç°¡å–®ã€çµæ§‹åŒ–,ä¸”æ˜“æ–¼éæŠ€è¡“äººå“¡ç†è§£,æ˜¯é€£æ¥æ¥­å‹™èˆ‡æŠ€è¡“çš„æ©‹æ¨‘ã€‚

### 3.1 Gherkin èªæ³•çµæ§‹èˆ‡è¦å‰‡

#### ä»€éº¼æ˜¯ Gherkin

**Gherkin** æ˜¯ä¸€ç¨®æ¥­å‹™å¯è®€çš„é ˜åŸŸç‰¹å®šèªè¨€(DSL),å…·æœ‰ä»¥ä¸‹ç‰¹é»:

- ğŸ“ ä½¿ç”¨è‡ªç„¶èªè¨€(æ”¯æ´å¤šåœ‹èªè¨€)
- ğŸ“ çµæ§‹åŒ–æ ¼å¼(é—œéµå­— + æè¿°)
- ğŸ“ æ˜“æ–¼ç†è§£(éç¨‹å¼è¨­è¨ˆå¸«ä¹Ÿèƒ½è®€å¯«)
- ğŸ“ å¯è¢«æ©Ÿå™¨è§£æ(è‡ªå‹•åŒ–æ¡†æ¶å¯åŸ·è¡Œ)

#### Gherkin çš„è¨­è¨ˆç†å¿µ

```mermaid
graph TB
    Gherkin[Gherkin]
    
    Gherkin --> A[å¯è®€æ€§]
    A --> A1[è‡ªç„¶èªè¨€]
    A --> A2[çµæ§‹æ¸…æ™°]
    A --> A3[éæŠ€è¡“äººå“¡å‹å–„]
    
    Gherkin --> B[å¯åŸ·è¡Œæ€§]
    B --> B1[æ©Ÿå™¨å¯è§£æ]
    B --> B2[è‡ªå‹•åŒ–æ¡†æ¶]
    B --> B3[CI/CD æ•´åˆ]
    
    Gherkin --> C[å”ä½œæ€§]
    C --> C1[å…±é€šèªè¨€]
    C --> C2[æºé€šæ©‹æ¨‘]
    C --> C3[æ´»æ–‡ä»¶]
    
    Gherkin --> D[è¡¨é”åŠ›]
    D --> D1[ç¯„ä¾‹é©…å‹•]
    D --> D2[è³‡æ–™é©…å‹•]
    D --> D3[æƒ…å¢ƒå®Œæ•´]
    
    style Gherkin fill:#9cf,stroke:#333,stroke-width:4px
```

#### Gherkin åŸºæœ¬çµæ§‹

```gherkin
# åŠŸèƒ½ (Feature)
Feature: åŠŸèƒ½æ¨™é¡Œ
  åŠŸèƒ½èªªæ˜
  å¯ä»¥æ˜¯å¤šè¡Œ

  # èƒŒæ™¯ (Background) - å¯é¸
  Background: å…±åŒå‰ç½®æ¢ä»¶
    Given å…±åŒçš„è¨­å®š
  
  # å ´æ™¯ (Scenario)
  Scenario: å ´æ™¯æè¿°
    Given å‰ç½®æ¢ä»¶
    And æ›´å¤šå‰ç½®æ¢ä»¶
    When åŸ·è¡Œæ“ä½œ
    And æ›´å¤šæ“ä½œ
    Then é æœŸçµæœ
    And æ›´å¤šçµæœ
    But ä¸æ‡‰è©²ç™¼ç”Ÿçš„äº‹
  
  # å ´æ™¯å¤§ç¶± (Scenario Outline)
  Scenario Outline: å ´æ™¯æ¨¡æ¿
    Given <åƒæ•¸1>
    When <åƒæ•¸2>
    Then <åƒæ•¸3>
    
    Examples:
      | åƒæ•¸1 | åƒæ•¸2 | åƒæ•¸3 |
      | å€¼1   | å€¼2   | å€¼3   |
```

#### Gherkin é—œéµå­—èªªæ˜

**1. Feature (åŠŸèƒ½)**

å®šç¾©ä¸€å€‹åŠŸèƒ½æˆ–åŠŸèƒ½é›†åˆã€‚

```gherkin
Feature: ä½¿ç”¨è€…ç™»å…¥
  ä½œç‚ºè¨»å†Šæœƒå“¡
  æˆ‘æƒ³è¦ç™»å…¥ç³»çµ±
  ä»¥ä¾¿ä½¿ç”¨æœƒå“¡å°ˆå±¬åŠŸèƒ½
```

**çµæ§‹**:
- ç¬¬ä¸€è¡Œ:**Feature:** + ç°¡çŸ­æ¨™é¡Œ
- å¾ŒçºŒè¡Œ:åŠŸèƒ½èªªæ˜(å¯é¸,ä½†å»ºè­°åŠ ä¸Š)
- é€šå¸¸ä½¿ç”¨ User Story æ ¼å¼

**2. Background (èƒŒæ™¯)**

å®šç¾©æ‰€æœ‰ Scenario å…±åŒçš„å‰ç½®æ¢ä»¶,é¿å…é‡è¤‡ã€‚

```gherkin
Feature: è½‰å¸³åŠŸèƒ½

  Background: ä½¿ç”¨è€…å·²ç™»å…¥
    Given æˆ‘å·²ç¶“ç™»å…¥ç¶²è·¯éŠ€è¡Œ
    And ç³»çµ±å·²é€£ç·šæ­£å¸¸
```

**ä½¿ç”¨æ™‚æ©Ÿ**:
- âœ… æ‰€æœ‰ Scenario éƒ½éœ€è¦ç›¸åŒçš„è¨­å®š
- âœ… æ¸›å°‘ Scenario çš„é‡è¤‡ç¨‹å¼ç¢¼
- âŒ é¿å…åœ¨ Background æ”¾å¤ªå¤šé‚è¼¯

**3. Scenario (å ´æ™¯)**

æè¿°ä¸€å€‹å…·é«”çš„æ¸¬è©¦æ¡ˆä¾‹ã€‚

```gherkin
Scenario: æˆåŠŸç™»å…¥
  Given æˆ‘åœ¨ç™»å…¥é é¢
  And æˆ‘æœ‰æœ‰æ•ˆçš„å¸³è™Ÿå¯†ç¢¼
  When æˆ‘è¼¸å…¥æ­£ç¢ºçš„å¸³è™Ÿå¯†ç¢¼
  And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
  Then æˆ‘æ‡‰è©²çœ‹åˆ°æœƒå“¡é¦–é 
  And é é¢æ‡‰è©²é¡¯ç¤ºæˆ‘çš„åå­—
```

**å‘½åå»ºè­°**:
- ä½¿ç”¨æ¥­å‹™èªè¨€,é¿å…æŠ€è¡“è¡“èª
- æè¿°å ´æ™¯çš„ç›®æ¨™æˆ–çµæœ
- ç°¡æ½”ä½†å…·æè¿°æ€§

**4. Given-When-Then (å‰æ-ç•¶-é‚£éº¼)**

BDD çš„æ ¸å¿ƒçµæ§‹,æè¿°æ¸¬è©¦çš„ä¸‰å€‹éšæ®µã€‚

```mermaid
graph LR
    A[Given<br/>å‰ç½®æ¢ä»¶] --> B[When<br/>åŸ·è¡Œå‹•ä½œ]
    B --> C[Then<br/>é æœŸçµæœ]
    
    A -.è¨­å®šç‹€æ…‹.-> A1[æº–å‚™æ¸¬è©¦è³‡æ–™<br/>è¨­å®šç³»çµ±ç‹€æ…‹]
    B -.åŸ·è¡Œæ“ä½œ.-> B1[ä½¿ç”¨è€…è¡Œç‚º<br/>ç³»çµ±äº‹ä»¶]
    C -.é©—è­‰çµæœ.-> C1[æª¢æŸ¥è¼¸å‡º<br/>ç¢ºèªç‹€æ…‹æ”¹è®Š]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#c8e6c9
```

**Given(å‰æ)**:
- æè¿°æ¸¬è©¦çš„èµ·å§‹ç‹€æ…‹
- è¨­å®šæ¸¬è©¦è³‡æ–™
- æº–å‚™ç³»çµ±ç’°å¢ƒ

```gherkin
Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ
And ä»Šå¤©æ˜¯ 2025-01-15
And ç³»çµ±åŒ¯ç‡ç‚º 1 USD = 30 TWD
```

**When(ç•¶)**:
- æè¿°ä½¿ç”¨è€…çš„æ“ä½œ
- è§¸ç™¼çš„ç³»çµ±äº‹ä»¶
- åŸ·è¡Œçš„æ¥­å‹™é‚è¼¯

```gherkin
When æˆ‘è½‰å¸³ 5000 å…ƒçµ¦æœ‹å‹
And æˆ‘ç¢ºèªäº¤æ˜“
```

**Then(é‚£éº¼)**:
- æè¿°é æœŸçš„çµæœ
- ç³»çµ±ç‹€æ…‹çš„æ”¹è®Š
- ä½¿ç”¨è€…çœ‹åˆ°çš„è¼¸å‡º

```gherkin
Then æˆ‘çš„å¸³æˆ¶é¤˜é¡æ‡‰è©²æ˜¯ 5000 å…ƒ
And æˆ‘æ‡‰è©²æ”¶åˆ°è½‰å¸³æˆåŠŸé€šçŸ¥
And äº¤æ˜“è¨˜éŒ„æ‡‰è©²é¡¯ç¤ºæ­¤ç­†è½‰å¸³
```

**5. And / But (å’Œ / ä½†æ˜¯)**

é€£æ¥è©,è®“ Scenario æ›´æµæš¢æ˜“è®€ã€‚

```gherkin
# And:å¢åŠ ç›¸åŒé¡å‹çš„æ­¥é©Ÿ
Given æˆ‘å·²ç™»å…¥
And æˆ‘åœ¨è½‰å¸³é é¢
And æˆ‘çš„å¸³æˆ¶æœ‰ 10000 å…ƒ

# But:æè¿°ä¸æ‡‰è©²ç™¼ç”Ÿçš„äº‹
Then è½‰å¸³æ‡‰è©²æˆåŠŸ
But å°æ–¹ä¸æ‡‰è©²æ”¶åˆ°ç°¡è¨Šé€šçŸ¥
```

**ç­‰åƒ¹é—œä¿‚**:
- **And** åœ¨ Given å€å¡Š = **Given**
- **And** åœ¨ When å€å¡Š = **When**
- **And** åœ¨ Then å€å¡Š = **Then**
- **But** = **And**,åªæ˜¯èªæ„ä¸åŒ

**6. Scenario Outline (å ´æ™¯å¤§ç¶±)**

è³‡æ–™é©…å‹•æ¸¬è©¦,ç”¨ç›¸åŒé‚è¼¯æ¸¬è©¦å¤šçµ„è³‡æ–™ã€‚

```gherkin
Scenario Outline: è½‰å¸³é‡‘é¡é©—è­‰
  Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º <é¤˜é¡> å…ƒ
  When æˆ‘è½‰å¸³ <é‡‘é¡> å…ƒ
  Then çµæœæ‡‰è©²æ˜¯ <çµæœ>
  And é¤˜é¡æ‡‰è©²æ˜¯ <å‰©é¤˜> å…ƒ
  
  Examples:
    | é¤˜é¡  | é‡‘é¡  | çµæœ | å‰©é¤˜ |
    | 10000 | 5000  | æˆåŠŸ | 5000 |
    | 10000 | 10000 | æˆåŠŸ | 0    |
    | 5000  | 10000 | å¤±æ•— | 5000 |
    | 1000  | 999   | æˆåŠŸ | 1    |
```

**ä½¿ç”¨æ™‚æ©Ÿ**:
- âœ… ç›¸åŒé‚è¼¯,ä¸åŒè³‡æ–™
- âœ… é‚Šç•Œå€¼æ¸¬è©¦
- âœ… ç­‰åƒ¹é¡åŠƒåˆ†æ¸¬è©¦

**7. Examples (ç¯„ä¾‹è³‡æ–™è¡¨)**

ç‚º Scenario Outline æä¾›æ¸¬è©¦è³‡æ–™ã€‚

```gherkin
Examples: æ­£å¸¸æƒ…æ³
  | é¤˜é¡  | é‡‘é¡ | çµæœ |
  | 10000 | 100  | æˆåŠŸ |
  | 5000  | 200  | æˆåŠŸ |

Examples: ç•°å¸¸æƒ…æ³
  | é¤˜é¡ | é‡‘é¡  | çµæœ |
  | 100  | 1000  | å¤±æ•— |
  | 0    | 100   | å¤±æ•— |
```

**å¯ä»¥æœ‰å¤šå€‹ Examples å€å¡Š**,ç”¨æ–¼çµ„ç¹”ä¸åŒé¡å‹çš„æ¸¬è©¦è³‡æ–™ã€‚

---

#### Gherkin èªæ³•è¦å‰‡

**1. ç¸®æ’è¦å‰‡**

```gherkin
Feature: åŠŸèƒ½åç¨±         # ä¸ç¸®æ’
  èªªæ˜æ–‡å­—              # ç¸®æ’ 2 ç©ºæ ¼(å¯é¸)
  
  Background:           # ç¸®æ’ 2 ç©ºæ ¼
    Given æ­¥é©Ÿ          # ç¸®æ’ 4 ç©ºæ ¼
    
  Scenario: å ´æ™¯       # ç¸®æ’ 2 ç©ºæ ¼
    Given æ­¥é©Ÿ          # ç¸®æ’ 4 ç©ºæ ¼
    When æ­¥é©Ÿ           # ç¸®æ’ 4 ç©ºæ ¼
    Then æ­¥é©Ÿ           # ç¸®æ’ 4 ç©ºæ ¼
```

**æ³¨æ„**:ç¸®æ’ä¸å½±éŸ¿åŸ·è¡Œ,ä½†å½±éŸ¿å¯è®€æ€§ã€‚

**2. è¨»è§£**

```gherkin
# é€™æ˜¯è¨»è§£,æœƒè¢«è§£æå™¨å¿½ç•¥

Feature: è½‰å¸³åŠŸèƒ½  # è¡Œå°¾è¨»è§£ä¹Ÿå¯ä»¥

# Scenario: é€™å€‹å ´æ™¯è¢«è¨»è§£æ‰äº†
#   Given æ­¥é©Ÿ
#   When æ­¥é©Ÿ
```

**3. å¤šè¡Œæ–‡å­— (Doc Strings)**

ä½¿ç”¨ä¸‰å¼•è™ŸåŒ…åœå¤šè¡Œæ–‡å­—ã€‚

```gherkin
Scenario: ç™¼é€é€šçŸ¥éƒµä»¶
  When ç³»çµ±ç™¼é€éƒµä»¶å…§å®¹ç‚º:
    """
    è¦ªæ„›çš„å®¢æˆ¶:
    
    æ‚¨çš„è½‰å¸³å·²æˆåŠŸå®Œæˆã€‚
    é‡‘é¡:5000 å…ƒ
    æ™‚é–“:2025-01-15 10:30
    
    æ„Ÿè¬æ‚¨çš„ä½¿ç”¨ã€‚
    """
  Then éƒµä»¶æ‡‰è©²æˆåŠŸç™¼é€
```

**4. è³‡æ–™è¡¨æ ¼ (Data Tables)**

åœ¨æ­¥é©Ÿä¸­ä½¿ç”¨è¡¨æ ¼è³‡æ–™ã€‚

```gherkin
Scenario: æ‰¹æ¬¡è½‰å¸³
  Given æˆ‘æœ‰ä»¥ä¸‹è½‰å¸³æ¸…å–®:
    | æ”¶æ¬¾äºº   | å¸³è™Ÿ       | é‡‘é¡ |
    | å¼µä¸‰     | 1234567890 | 1000 |
    | æå››     | 0987654321 | 2000 |
    | ç‹äº”     | 5555555555 | 1500 |
  When æˆ‘åŸ·è¡Œæ‰¹æ¬¡è½‰å¸³
  Then æ‰€æœ‰è½‰å¸³æ‡‰è©²æˆåŠŸ
```

**5. æ¨™ç±¤ (Tags)**

ç”¨æ–¼çµ„ç¹”ã€ç¯©é¸ã€åŸ·è¡Œç‰¹å®šå ´æ™¯ã€‚

```gherkin
@smoke @critical
Feature: ç™»å…¥åŠŸèƒ½

@happy_path
Scenario: æ­£å¸¸ç™»å…¥

@error_handling @slow
Scenario: å¯†ç¢¼éŒ¯èª¤

@wip
Scenario: é–‹ç™¼ä¸­çš„åŠŸèƒ½
```

**å¸¸è¦‹æ¨™ç±¤ç”¨é€”**:
- `@smoke`:ç…™éœ§æ¸¬è©¦
- `@regression`:å›æ­¸æ¸¬è©¦
- `@wip`:Work In Progress(é–‹ç™¼ä¸­)
- `@skip`:è·³éåŸ·è¡Œ
- `@slow`:åŸ·è¡Œç·©æ…¢çš„æ¸¬è©¦
- `@critical`:é—œéµåŠŸèƒ½

**åŸ·è¡Œç‰¹å®šæ¨™ç±¤**:
```bash
# åªåŸ·è¡Œæœ‰ @smoke æ¨™ç±¤çš„å ´æ™¯
cucumber --tags @smoke

# æ’é™¤ @wip æ¨™ç±¤
cucumber --tags "not @wip"

# çµ„åˆæ¢ä»¶
cucumber --tags "@smoke and not @slow"
```

---

### ğŸ“ ç¬¬ä¸‰ç« ç¬¬ä¸€éƒ¨åˆ†ç¸½çµ

#### æœ¬ç¯€é‡é»

âœ… **Gherkin çš„æ ¸å¿ƒå…ƒç´ **
- Feature:åŠŸèƒ½æè¿°
- Background:å…±åŒå‰ç½®æ¢ä»¶
- Scenario:å…·é«”å ´æ™¯
- Given-When-Then:æ¸¬è©¦çµæ§‹
- Scenario Outline + Examples:è³‡æ–™é©…å‹•

âœ… **Gherkin çš„è¼”åŠ©åŠŸèƒ½**
- And/But:é€£æ¥è©
- è¨»è§£:èªªæ˜æ–‡å­—
- Doc Strings:å¤šè¡Œæ–‡å­—
- Data Tables:è¡¨æ ¼è³‡æ–™
- Tags:å ´æ™¯æ¨™è¨˜

âœ… **Gherkin çš„è¨­è¨ˆåŸå‰‡**
- ä½¿ç”¨è‡ªç„¶èªè¨€
- çµæ§‹åŒ–æ¸…æ™°
- æ¥­å‹™å¯è®€
- æ©Ÿå™¨å¯åŸ·è¡Œ

---

#### ğŸ¯ å¿«é€Ÿåƒè€ƒ

**åŸºæœ¬ Scenario æ¨¡æ¿**:
```gherkin
Scenario: [å ´æ™¯æè¿°]
  Given [å‰ç½®æ¢ä»¶]
  When [åŸ·è¡Œå‹•ä½œ]
  Then [é æœŸçµæœ]
```

**è³‡æ–™é©…å‹•æ¨¡æ¿**:
```gherkin
Scenario Outline: [å ´æ™¯æè¿°]
  Given [å‰ç½®æ¢ä»¶] <åƒæ•¸>
  When [åŸ·è¡Œå‹•ä½œ] <åƒæ•¸>
  Then [é æœŸçµæœ] <åƒæ•¸>
  
  Examples:
    | åƒæ•¸ |
    | å€¼1  |
    | å€¼2  |
```

---

### 3.2 Featureã€Scenarioã€Scenario Outline é€²éšæ‡‰ç”¨

#### 3.2.1 Feature çš„æ’°å¯«æŠ€å·§

**Feature çš„å®Œæ•´çµæ§‹**

```gherkin
@feature_tag
Feature: åŠŸèƒ½ç°¡çŸ­æ¨™é¡Œ
  ä½œç‚º [ä½¿ç”¨è€…è§’è‰²]
  æˆ‘æƒ³è¦ [åŠŸèƒ½æè¿°]
  ä»¥ä¾¿ [é”æˆçš„åƒ¹å€¼æˆ–ç›®æ¨™]
  
  # é¡å¤–èªªæ˜(å¯é¸)
  é€™å€‹åŠŸèƒ½ç”¨æ–¼è™•ç†...
  ç›¸é—œæ¥­å‹™è¦å‰‡åŒ…æ‹¬...
  
  # æ¥­å‹™è¦å‰‡èªªæ˜
  Business Rules:
  - è¦å‰‡ 1
  - è¦å‰‡ 2
  
  Background:
    # å…±åŒå‰ç½®æ¢ä»¶
  
  Scenario: å ´æ™¯ 1
  Scenario: å ´æ™¯ 2
```

**Feature å‘½åæœ€ä½³å¯¦å‹™**

```gherkin
# âœ… å¥½çš„å‘½å:ç°¡æ½”ã€æ¥­å‹™å°å‘
Feature: ä½¿ç”¨è€…ç™»å…¥
Feature: éŠ€è¡Œè½‰å¸³
Feature: è³¼ç‰©è»Šçµå¸³
Feature: è¨‚å–®é€€æ¬¾è™•ç†

# âŒ ä¸å¥½çš„å‘½å:å¤ªæŠ€è¡“ã€å¤ªé•·ã€ä¸æ¸…æ¥š
Feature: LoginController.login() æ–¹æ³•æ¸¬è©¦
Feature: ä½¿ç”¨è€…å¯ä»¥é€éè¼¸å…¥å¸³è™Ÿå¯†ç¢¼ä¸¦é»æ“Šç™»å…¥æŒ‰éˆ•ä¾†ç™»å…¥ç³»çµ±
Feature: æ¸¬è©¦
Feature: Feature1
```

**Feature æè¿°çš„ä¸‰ç¨®é¢¨æ ¼**

**é¢¨æ ¼ 1:User Story æ ¼å¼(æ¨è–¦)**

```gherkin
Feature: ç·šä¸Šé€€è²¨ç”³è«‹
  ä½œç‚º å·²è³¼è²·å•†å“çš„å®¢æˆ¶
  æˆ‘æƒ³è¦ é€éç¶²ç«™ç”³è«‹é€€è²¨
  ä»¥ä¾¿ å¿«é€Ÿè™•ç†é€€æ¬¾,ç„¡éœ€é›»è©±è¯ç¹«å®¢æœ
```

**é¢¨æ ¼ 2:æ¥­å‹™åƒ¹å€¼æè¿°**

```gherkin
Feature: å³æ™‚åº«å­˜æŸ¥è©¢
  æä¾›å®¢æˆ¶å³æ™‚çš„å•†å“åº«å­˜è³‡è¨Š,
  é¿å…ä¸‹å–®å¾Œæ‰ç™¼ç¾ç¼ºè²¨,
  æå‡å®¢æˆ¶è³¼ç‰©é«”é©—èˆ‡æ»¿æ„åº¦ã€‚
```

**é¢¨æ ¼ 3:ç°¡æ½”æè¿°**

```gherkin
Feature: å¯†ç¢¼é‡è¨­
  å…è¨±å¿˜è¨˜å¯†ç¢¼çš„ä½¿ç”¨è€…é€éé›»å­éƒµä»¶é‡è¨­å¯†ç¢¼ã€‚
```

**Feature çš„çµ„ç¹”åŸå‰‡**

```mermaid
graph TB
    subgraph Organization[Feature çµ„ç¹”æ–¹å¼]
        A[æŒ‰åŠŸèƒ½æ¨¡çµ„]
        B[æŒ‰ä½¿ç”¨è€…è§’è‰²]
        C[æŒ‰æ¥­å‹™æµç¨‹]
        D[æŒ‰ç³»çµ±å±¤ç´š]
    end
    
    A --> A1[features/login/]
    A --> A2[features/transfer/]
    A --> A3[features/checkout/]
    
    B --> B1[features/customer/]
    B --> B2[features/admin/]
    B --> B3[features/manager/]
    
    C --> C1[features/order_process/]
    C --> C2[features/payment_flow/]
    
    D --> D1[features/api/]
    D --> D2[features/ui/]
    D --> D3[features/batch/]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#e7f5e1
    style D fill:#ffe1e1
```

---

#### 3.2.2 Scenario çš„è¨­è¨ˆæ¨¡å¼

**æ¨¡å¼ 1:å–®ä¸€è·è²¬ Scenario**

æ¯å€‹ Scenario åªé©—è­‰ä¸€å€‹æ¥­å‹™è¡Œç‚ºã€‚

```gherkin
# âœ… å¥½çš„ç¯„ä¾‹:è·è²¬å–®ä¸€
Scenario: é¤˜é¡è¶³å¤ æ™‚è½‰å¸³æˆåŠŸ
  Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ
  When æˆ‘è½‰å¸³ 5000 å…ƒçµ¦æœ‹å‹
  Then è½‰å¸³æ‡‰è©²æˆåŠŸ
  And æˆ‘çš„é¤˜é¡æ‡‰è©²æ˜¯ 5000 å…ƒ

Scenario: é¤˜é¡ä¸è¶³æ™‚è½‰å¸³å¤±æ•—
  Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 3000 å…ƒ
  When æˆ‘è½‰å¸³ 5000 å…ƒçµ¦æœ‹å‹
  Then æ‡‰è©²é¡¯ç¤ºã€Œé¤˜é¡ä¸è¶³ã€éŒ¯èª¤
  And æˆ‘çš„é¤˜é¡æ‡‰è©²ä»æ˜¯ 3000 å…ƒ

# âŒ ä¸å¥½çš„ç¯„ä¾‹:æ··åˆå¤šå€‹è·è²¬
Scenario: è½‰å¸³æ¸¬è©¦
  Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ
  When æˆ‘è½‰å¸³ 5000 å…ƒ
  Then è½‰å¸³æˆåŠŸ
  When æˆ‘å†è½‰å¸³ 6000 å…ƒ
  Then è½‰å¸³å¤±æ•—
  When æˆ‘æŸ¥è©¢é¤˜é¡
  Then é¤˜é¡æ˜¯ 5000 å…ƒ
```

**æ¨¡å¼ 2:Happy Path å„ªå…ˆ**

å…ˆæ’°å¯«æ­£å¸¸æµç¨‹,å†è£œå……ç•°å¸¸æƒ…æ³ã€‚

```gherkin
Feature: å•†å“ä¸‹å–®

  # 1. å…ˆå¯« Happy Path
  @happy_path
  Scenario: æˆåŠŸä¸‹å–®ä¸¦ä»˜æ¬¾
    Given æˆ‘å·²ç™»å…¥
    And è³¼ç‰©è»Šæœ‰å•†å“ç¸½åƒ¹ 1000 å…ƒ
    When æˆ‘é¸æ“‡ä¿¡ç”¨å¡ä»˜æ¬¾ä¸¦ç¢ºèªè¨‚å–®
    Then è¨‚å–®æ‡‰è©²å»ºç«‹æˆåŠŸ
    And æˆ‘æ‡‰è©²æ”¶åˆ°è¨‚å–®ç¢ºèªéƒµä»¶
  
  # 2. å†è£œå……ç•°å¸¸æµç¨‹
  @error_handling
  Scenario: æœªç™»å…¥æ™‚ç„¡æ³•ä¸‹å–®
    Given æˆ‘æœªç™»å…¥
    And è³¼ç‰©è»Šæœ‰å•†å“
    When æˆ‘å˜—è©¦ä¸‹å–®
    Then æ‡‰è©²å°å‘ç™»å…¥é é¢
  
  @error_handling
  Scenario: è³¼ç‰©è»Šç‚ºç©ºæ™‚ç„¡æ³•ä¸‹å–®
    Given æˆ‘å·²ç™»å…¥
    And è³¼ç‰©è»Šæ˜¯ç©ºçš„
    When æˆ‘å˜—è©¦ä¸‹å–®
    Then æ‡‰è©²é¡¯ç¤ºã€Œè³¼ç‰©è»Šç‚ºç©ºã€éŒ¯èª¤
```

**æ¨¡å¼ 3:ä½¿ç”¨ Background æ¸›å°‘é‡è¤‡**

```gherkin
Feature: æœƒå“¡é»æ•¸æŸ¥è©¢

  Background: æœƒå“¡å·²ç™»å…¥
    Given æˆ‘ä»¥æœƒå“¡èº«åˆ†ç™»å…¥
    And æˆ‘åœ¨æœƒå“¡ä¸­å¿ƒé é¢
  
  Scenario: æŸ¥è©¢ç›®å‰é»æ•¸
    When æˆ‘æŸ¥çœ‹é»æ•¸é¤˜é¡
    Then æ‡‰è©²é¡¯ç¤ºæˆ‘çš„é»æ•¸ç‚º 500 é»
  
  Scenario: æŸ¥è©¢é»æ•¸æ­·å²è¨˜éŒ„
    When æˆ‘æŸ¥çœ‹é»æ•¸æ­·å²
    Then æ‡‰è©²é¡¯ç¤ºæœ€è¿‘ 10 ç­†é»æ•¸ç•°å‹•è¨˜éŒ„
  
  Scenario: æŸ¥è©¢é»æ•¸å³å°‡åˆ°æœŸè³‡è¨Š
    Given æˆ‘æœ‰ 200 é»å°‡åœ¨ 30 å¤©å…§åˆ°æœŸ
    When æˆ‘æŸ¥çœ‹é»æ•¸åˆ°æœŸæé†’
    Then æ‡‰è©²é¡¯ç¤ºåˆ°æœŸé»æ•¸è­¦å‘Š
```

**Background ä½¿ç”¨åŸå‰‡**:

- âœ… æ‰€æœ‰ Scenario éƒ½éœ€è¦çš„å‰ç½®æ¢ä»¶
- âœ… å¹«åŠ©è®€è€…ç†è§£å ´æ™¯ä¸Šä¸‹æ–‡
- âŒ é¿å…åœ¨ Background æ”¾å¤ªå¤šæ­¥é©Ÿ(å»ºè­° â‰¤ 5 æ­¥)
- âŒ é¿å…åœ¨ Background æ”¾å ´æ™¯ç‰¹å®šçš„è¨­å®š

**æ¨¡å¼ 4:ä½¿ç”¨æè¿°æ€§çš„ Scenario åç¨±**

```gherkin
# âœ… å¥½çš„å‘½å:æè¿°æ¥­å‹™è¡Œç‚ºèˆ‡çµæœ
Scenario: é¦–æ¬¡è³¼è²·äº«æœ‰æ–°å®¢å„ªæƒ 
Scenario: é€£çºŒç™»å…¥å¤±æ•—ä¸‰æ¬¡å¾Œå¸³è™Ÿé–å®š
Scenario: VIP æœƒå“¡å…é‹è²»
Scenario: è¶…éé€€è²¨æœŸé™ç„¡æ³•ç”³è«‹é€€è²¨

# âŒ ä¸å¥½çš„å‘½å:å¤ªç°¡ç•¥æˆ–å¤ªæŠ€è¡“
Scenario: æ¸¬è©¦ 1
Scenario: æ­£å¸¸æƒ…æ³
Scenario: API å›å‚³ 200
Scenario: è³‡æ–™åº«æŸ¥è©¢æˆåŠŸ
```

---

#### 3.2.3 Scenario Outline çš„è³‡æ–™é©…å‹•æŠ€å·§

**åŸºæœ¬ç”¨æ³•**

```gherkin
Scenario Outline: é©—è­‰è½‰å¸³é‡‘é¡é™åˆ¶
  Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º <é¤˜é¡> å…ƒ
  When æˆ‘è½‰å¸³ <é‡‘é¡> å…ƒ
  Then çµæœæ‡‰ç‚º <çµæœ>
  And é¤˜é¡æ‡‰ç‚º <æœ€çµ‚é¤˜é¡> å…ƒ
  
  Examples:
    | é¤˜é¡  | é‡‘é¡  | çµæœ | æœ€çµ‚é¤˜é¡ |
    | 10000 | 5000  | æˆåŠŸ | 5000     |
    | 10000 | 10000 | æˆåŠŸ | 0        |
    | 5000  | 10000 | å¤±æ•— | 5000     |
```

**é€²éšæŠ€å·§ 1:å¤šå€‹ Examples å€å¡Š**

ç”¨æ–¼çµ„ç¹”ä¸åŒé¡å‹çš„æ¸¬è©¦è³‡æ–™ã€‚

```gherkin
Scenario Outline: ä½¿ç”¨è€…è¨»å†Šé©—è­‰
  Given æˆ‘åœ¨è¨»å†Šé é¢
  When æˆ‘è¼¸å…¥é›»å­éƒµä»¶ "<email>"
  Then çµæœæ‡‰ç‚º "<çµæœ>"
  
  Examples: æœ‰æ•ˆçš„é›»å­éƒµä»¶
    | email                  | çµæœ |
    | user@example.com       | æˆåŠŸ |
    | user.name@example.com  | æˆåŠŸ |
    | user+tag@example.co.uk | æˆåŠŸ |
  
  Examples: ç„¡æ•ˆçš„é›»å­éƒµä»¶
    | email           | çµæœ             |
    | invalid         | æ ¼å¼éŒ¯èª¤         |
    | @example.com    | æ ¼å¼éŒ¯èª¤         |
    | user@           | æ ¼å¼éŒ¯èª¤         |
    | user @email.com | æ ¼å¼éŒ¯èª¤         |
  
  Examples: å·²è¨»å†Šçš„é›»å­éƒµä»¶
    | email              | çµæœ         |
    | existing@email.com | é›»å­éƒµä»¶å·²å­˜åœ¨ |
```

**é€²éšæŠ€å·§ 2:é‚Šç•Œå€¼æ¸¬è©¦**

```gherkin
Scenario Outline: è½‰å¸³é‡‘é¡é‚Šç•Œæ¸¬è©¦
  Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ
  When æˆ‘è½‰å¸³ <é‡‘é¡> å…ƒ
  Then çµæœæ‡‰ç‚º <çµæœ>
  
  Examples: é‚Šç•Œå€¼åˆ†æ
    | é‡‘é¡  | çµæœ         | èªªæ˜           |
    | 0     | å¤±æ•—         | æœ€å°å€¼ä»¥ä¸‹     |
    | 1     | æˆåŠŸ         | æœ€å°æœ‰æ•ˆå€¼     |
    | 9999  | æˆåŠŸ         | æœ€å¤§å€¼ä»¥ä¸‹     |
    | 10000 | æˆåŠŸ         | æœ€å¤§æœ‰æ•ˆå€¼     |
    | 10001 | å¤±æ•—(é¤˜é¡ä¸è¶³)| æœ€å¤§å€¼ä»¥ä¸Š     |
    | 50001 | å¤±æ•—(è¶…éé™é¡)| é è¶…éæœ€å¤§å€¼   |
```

**é€²éšæŠ€å·§ 3:çµ„åˆæ¸¬è©¦**

```gherkin
Scenario Outline: è¨‚å–®æŠ˜æ‰£è¨ˆç®—
  Given æˆ‘æ˜¯ <æœƒå“¡ç­‰ç´š> æœƒå“¡
  And è³¼ç‰©è»Šå•†å“ç¸½åƒ¹ <åŸåƒ¹> å…ƒ
  And ä½¿ç”¨å„ªæƒ ç¢¼ "<å„ªæƒ ç¢¼>"
  When æˆ‘çµå¸³
  Then æŠ˜æ‰£é‡‘é¡æ‡‰ç‚º <æŠ˜æ‰£> å…ƒ
  And å¯¦ä»˜é‡‘é¡æ‡‰ç‚º <å¯¦ä»˜> å…ƒ
  
  Examples:
    | æœƒå“¡ç­‰ç´š | åŸåƒ¹ | å„ªæƒ ç¢¼    | æŠ˜æ‰£ | å¯¦ä»˜ |
    | ä¸€èˆ¬     | 1000 | ç„¡        | 0    | 1000 |
    | ä¸€èˆ¬     | 1000 | SAVE100   | 100  | 900  |
    | VIP      | 1000 | ç„¡        | 100  | 900  |
    | VIP      | 1000 | SAVE100   | 200  | 800  |
    | VIP      | 5000 | VIP500    | 1000 | 4000 |
```

**é€²éšæŠ€å·§ 4:ä½¿ç”¨è¡¨æ ¼åƒæ•¸**

```gherkin
Scenario: æ‰¹æ¬¡å»ºç«‹ä½¿ç”¨è€…
  When æˆ‘æ‰¹æ¬¡å»ºç«‹ä»¥ä¸‹ä½¿ç”¨è€…:
    | å§“å   | é›»å­éƒµä»¶          | è§’è‰²   |
    | å¼µä¸‰   | zhang@email.com   | ç®¡ç†å“¡ |
    | æå››   | li@email.com      | ç·¨è¼¯   |
    | ç‹äº”   | wang@email.com    | æª¢è¦–è€… |
  Then æ‡‰è©²æˆåŠŸå»ºç«‹ 3 å€‹ä½¿ç”¨è€…
  And æ¯å€‹ä½¿ç”¨è€…æ‡‰è©²æ”¶åˆ°æ­¡è¿éƒµä»¶
```

**Scenario vs Scenario Outline é¸æ“‡æŒ‡å—**

```mermaid
graph TD
    Start{éœ€è¦æ¸¬è©¦<br/>å¤šçµ„è³‡æ–™?}
    Start -->|æ˜¯| Q1{è³‡æ–™é‚è¼¯<br/>ç›¸åŒ?}
    Start -->|å¦| UseScenario[ä½¿ç”¨ Scenario]
    
    Q1 -->|æ˜¯| Q2{è³‡æ–™çµ„æ•¸<br/>>3çµ„?}
    Q1 -->|å¦| UseScenario
    
    Q2 -->|æ˜¯| UseOutline[ä½¿ç”¨ Scenario Outline]
    Q2 -->|å¦| Both[å…©è€…çš†å¯<br/>å»ºè­° Scenario<br/>å¯è®€æ€§è¼ƒå¥½]
    
    style UseScenario fill:#e7f5e1
    style UseOutline fill:#e1f5ff
    style Both fill:#fff4e1
```

---

### 3.3 ç¯„ä¾‹:å¾éœ€æ±‚æ•˜è¿°è½‰ç‚º Gherkin è¦æ ¼

#### å¯¦æˆ°æ¼”ç·´:éœ€æ±‚è½‰æ›æµç¨‹

**åŸå§‹éœ€æ±‚æ•˜è¿°**

```
éœ€æ±‚:æœƒå“¡è³¼ç‰©æŠ˜æ‰£ç³»çµ±

ç³»çµ±éœ€è¦æ ¹æ“šæœƒå“¡ç­‰ç´šæä¾›ä¸åŒçš„è³¼ç‰©æŠ˜æ‰£:
- ä¸€èˆ¬æœƒå“¡:ç„¡æŠ˜æ‰£
- éŠ€å¡æœƒå“¡:9æŠ˜
- é‡‘å¡æœƒå“¡:85æŠ˜
- ç™½é‡‘å¡æœƒå“¡:8æŠ˜

å¦å¤–,å¦‚æœè¨‚å–®é‡‘é¡è¶…é3000å…ƒ,é¡å¤–å†äº«95æŠ˜ã€‚
é€™å€‹æŠ˜æ‰£æ˜¯åœ¨æœƒå“¡æŠ˜æ‰£ä¹‹å¾Œå†è¨ˆç®—çš„ã€‚

ç‰¹æ®Šæƒ…æ³:
- æŠ˜æ‰£å¾Œé‡‘é¡ä¸å¾—ä½æ–¼100å…ƒ
- å·²ä½¿ç”¨å„ªæƒ ç¢¼çš„è¨‚å–®ä¸å†äº«æœ‰æœƒå“¡æŠ˜æ‰£
```

**Step 1:è­˜åˆ¥æ¥­å‹™è¦å‰‡**

é€é Example Mapping æå–è¦å‰‡:

```
ğŸŸ¦ è¦å‰‡ 1:æœƒå“¡ç­‰ç´šæŠ˜æ‰£
ğŸŸ¦ è¦å‰‡ 2:æ»¿é¡å„ªæƒ (>3000 å…ƒäº« 95 æŠ˜)
ğŸŸ¦ è¦å‰‡ 3:æœ€ä½æ¶ˆè²»é‡‘é¡é™åˆ¶(â‰¥100 å…ƒ)
ğŸŸ¦ è¦å‰‡ 4:å„ªæƒ ç¢¼èˆ‡æœƒå“¡æŠ˜æ‰£äº’æ–¥
```

**Step 2:ç”¢ç”Ÿå…·é«”ç¯„ä¾‹**

```
ğŸŸ© ä¸€èˆ¬æœƒå“¡,è¨‚å–® 1000 å…ƒ â†’ 1000 å…ƒ
ğŸŸ© éŠ€å¡æœƒå“¡,è¨‚å–® 1000 å…ƒ â†’ 900 å…ƒ
ğŸŸ© é‡‘å¡æœƒå“¡,è¨‚å–® 2000 å…ƒ â†’ 1700 å…ƒ
ğŸŸ© é‡‘å¡æœƒå“¡,è¨‚å–® 4000 å…ƒ â†’ 3230 å…ƒ(4000Ã—0.85Ã—0.95)
ğŸŸ© ç™½é‡‘å¡æœƒå“¡,è¨‚å–® 200 å…ƒ â†’ 160 å…ƒ
ğŸŸ© ç™½é‡‘å¡æœƒå“¡,è¨‚å–® 120 å…ƒ â†’ 100 å…ƒ(æœ€ä½é™åˆ¶)
ğŸŸ© ä½¿ç”¨å„ªæƒ ç¢¼çš„è¨‚å–® â†’ ä¸äº«æœƒå“¡æŠ˜æ‰£
```

**Step 3:æ’°å¯« Feature File**

```gherkin
Feature: æœƒå“¡è³¼ç‰©æŠ˜æ‰£ç³»çµ±
  ä½œç‚º é›»å•†ç³»çµ±
  æˆ‘éœ€è¦ æ ¹æ“šæœƒå“¡ç­‰ç´šè¨ˆç®—æŠ˜æ‰£
  ä»¥ä¾¿ æä¾›æœƒå“¡å°ˆå±¬å„ªæƒ ä¸¦é¼“å‹µæ¶ˆè²»
  
  Business Rules:
  - æœƒå“¡ç­‰ç´šæŠ˜æ‰£:ä¸€èˆ¬(ç„¡)ã€éŠ€å¡(9æŠ˜)ã€é‡‘å¡(85æŠ˜)ã€ç™½é‡‘å¡(8æŠ˜)
  - æ»¿é¡å„ªæƒ :è¨‚å–® >3000 å…ƒé¡å¤–äº« 95 æŠ˜
  - æœ€ä½æ¶ˆè²»:æŠ˜æ‰£å¾Œä¸å¾—ä½æ–¼ 100 å…ƒ
  - å„ªæƒ ç¢¼èˆ‡æœƒå“¡æŠ˜æ‰£äº’æ–¥

  Background:
    Given è³¼ç‰©è»Šæœ‰å•†å“
    And æº–å‚™çµå¸³

  @happy_path
  Scenario Outline: æ ¹æ“šæœƒå“¡ç­‰ç´šè¨ˆç®—æŠ˜æ‰£
    Given æˆ‘æ˜¯ <æœƒå“¡ç­‰ç´š> æœƒå“¡
    And è¨‚å–®é‡‘é¡ç‚º <åŸåƒ¹> å…ƒ
    When ç³»çµ±è¨ˆç®—æŠ˜æ‰£
    Then æŠ˜æ‰£å¾Œé‡‘é¡æ‡‰ç‚º <æœ€çµ‚é‡‘é¡> å…ƒ
    
    Examples: åŸºæœ¬æœƒå“¡æŠ˜æ‰£
      | æœƒå“¡ç­‰ç´š | åŸåƒ¹ | æœ€çµ‚é‡‘é¡ | èªªæ˜              |
      | ä¸€èˆ¬     | 1000 | 1000     | ç„¡æŠ˜æ‰£            |
      | éŠ€å¡     | 1000 | 900      | 9æŠ˜               |
      | é‡‘å¡     | 2000 | 1700     | 85æŠ˜              |
      | ç™½é‡‘å¡   | 1000 | 800      | 8æŠ˜               |

  @complex_discount
  Scenario Outline: æœƒå“¡æŠ˜æ‰£åŠ ä¸Šæ»¿é¡å„ªæƒ 
    Given æˆ‘æ˜¯ <æœƒå“¡ç­‰ç´š> æœƒå“¡
    And è¨‚å–®é‡‘é¡ç‚º <åŸåƒ¹> å…ƒ
    When ç³»çµ±è¨ˆç®—æŠ˜æ‰£
    Then æœƒå“¡æŠ˜æ‰£å¾Œç‚º <æœƒå“¡æŠ˜æ‰£å¾Œ> å…ƒ
    And å†äº«æ»¿é¡å„ªæƒ ç‚º <æ»¿é¡å„ªæƒ å¾Œ> å…ƒ
    And æœ€çµ‚é‡‘é¡ç‚º <æœ€çµ‚é‡‘é¡> å…ƒ
    
    Examples: æ»¿é¡å„ªæƒ è¨ˆç®—
      | æœƒå“¡ç­‰ç´š | åŸåƒ¹ | æœƒå“¡æŠ˜æ‰£å¾Œ | æ»¿é¡å„ªæƒ å¾Œ | æœ€çµ‚é‡‘é¡ |
      | é‡‘å¡     | 4000 | 3400       | 3230       | 3230     |
      | ç™½é‡‘å¡   | 5000 | 4000       | 3800       | 3800     |
      | éŠ€å¡     | 3500 | 3150       | 2993       | 2993     |

  @boundary
  Scenario: æŠ˜æ‰£å¾Œé‡‘é¡ä¸å¾—ä½æ–¼æœ€ä½æ¶ˆè²»
    Given æˆ‘æ˜¯ç™½é‡‘å¡æœƒå“¡
    And è¨‚å–®é‡‘é¡ç‚º 120 å…ƒ
    When ç³»çµ±è¨ˆç®—æŠ˜æ‰£
    Then æŒ‰æœƒå“¡ç­‰ç´šæ‡‰æŠ˜æ‰£ç‚º 96 å…ƒ
    But å› æœ€ä½æ¶ˆè²»é™åˆ¶,æœ€çµ‚é‡‘é¡ç‚º 100 å…ƒ
    And æ‡‰è©²é¡¯ç¤ºæç¤ºã€Œå·²é”æœ€ä½æ¶ˆè²»é‡‘é¡ã€

  @business_rule
  Scenario: ä½¿ç”¨å„ªæƒ ç¢¼æ™‚ä¸äº«æœƒå“¡æŠ˜æ‰£
    Given æˆ‘æ˜¯é‡‘å¡æœƒå“¡
    And è¨‚å–®é‡‘é¡ç‚º 2000 å…ƒ
    And æˆ‘ä½¿ç”¨äº†å„ªæƒ ç¢¼ "SPECIAL200"
    When ç³»çµ±è¨ˆç®—æŠ˜æ‰£
    Then æ‡‰è©²å¥—ç”¨å„ªæƒ ç¢¼æŠ˜æ‰£ 200 å…ƒ
    And ä¸æ‡‰è©²å¥—ç”¨æœƒå“¡æŠ˜æ‰£
    And æœ€çµ‚é‡‘é¡ç‚º 1800 å…ƒ

  @error_handling
  Scenario: å˜—è©¦åŒæ™‚ä½¿ç”¨å„ªæƒ ç¢¼èˆ‡æœƒå“¡æŠ˜æ‰£
    Given æˆ‘æ˜¯é‡‘å¡æœƒå“¡
    And è¨‚å–®é‡‘é¡ç‚º 2000 å…ƒ
    And æˆ‘ä½¿ç”¨äº†å„ªæƒ ç¢¼ "SAVE100"
    When ç³»çµ±å˜—è©¦åŒæ™‚å¥—ç”¨å…©ç¨®æŠ˜æ‰£
    Then æ‡‰è©²é¡¯ç¤ºè¨Šæ¯ã€Œå„ªæƒ ç¢¼èˆ‡æœƒå“¡æŠ˜æ‰£åƒ…èƒ½æ“‡ä¸€ä½¿ç”¨ã€
    And æç¤ºæˆ‘é¸æ“‡è¼ƒå„ªæƒ çš„æ–¹æ¡ˆ
```

**Step 4:è£œå……é‚Šç•Œèˆ‡ä¾‹å¤–æƒ…æ³**

```gherkin
  @edge_cases
  Scenario Outline: é‚Šç•Œå€¼æ¸¬è©¦
    Given æˆ‘æ˜¯é‡‘å¡æœƒå“¡
    And è¨‚å–®é‡‘é¡ç‚º <åŸåƒ¹> å…ƒ
    When ç³»çµ±è¨ˆç®—æŠ˜æ‰£
    Then æœ€çµ‚é‡‘é¡ç‚º <æœ€çµ‚é‡‘é¡> å…ƒ
    
    Examples: æ»¿é¡å„ªæƒ è‡¨ç•Œé»
      | åŸåƒ¹ | æœ€çµ‚é‡‘é¡ | èªªæ˜                    |
      | 2999 | 2549     | æœªæ»¿3000,ç„¡æ»¿é¡å„ªæƒ      |
      | 3000 | 2423     | å‰›å¥½3000,äº«æ»¿é¡å„ªæƒ      |
      | 3001 | 2423     | è¶…é3000,äº«æ»¿é¡å„ªæƒ      |
    
    Examples: æœ€ä½æ¶ˆè²»è‡¨ç•Œé»
      | åŸåƒ¹ | æœ€çµ‚é‡‘é¡ | èªªæ˜                    |
      | 117  | 100      | æŠ˜æ‰£å¾Œ<100,å–æœ€ä½æ¶ˆè²»   |
      | 118  | 100      | æŠ˜æ‰£å¾Œ=100,å‰›å¥½æœ€ä½æ¶ˆè²» |
      | 119  | 101      | æŠ˜æ‰£å¾Œ>100,æ­£å¸¸è¨ˆç®—     |
```

---

### 3.4 å¸¸è¦‹éŒ¯èª¤èˆ‡æœ€ä½³å¯¦å‹™

#### å¸¸è¦‹éŒ¯èª¤é¡å‹

**éŒ¯èª¤ 1:éæ–¼æŠ€è¡“åŒ–**

```gherkin
# âŒ éŒ¯èª¤:å……æ»¿æŠ€è¡“ç´°ç¯€
Scenario: æ¸¬è©¦ API
  Given è³‡æ–™åº«æœ‰ä¸€ç­† id=123 çš„ user è¨˜éŒ„
  When ç™¼é€ POST /api/transfer 
    And request body = {"from":123,"to":456,"amount":5000}
  Then HTTP status code = 200
  And response.data.balance = 5000

# âœ… æ­£ç¢º:ä½¿ç”¨æ¥­å‹™èªè¨€
Scenario: æˆåŠŸè½‰å¸³çµ¦æœ‹å‹
  Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ
  When æˆ‘è½‰å¸³ 5000 å…ƒçµ¦æœ‹å‹çš„å¸³æˆ¶
  Then è½‰å¸³æ‡‰è©²æˆåŠŸ
  And æˆ‘çš„å¸³æˆ¶é¤˜é¡æ‡‰è©²æ˜¯ 5000 å…ƒ
```

**éŒ¯èª¤ 2:éåº¦é—œæ³¨ UI ç´°ç¯€**

```gherkin
# âŒ éŒ¯èª¤:ç¶å®š UI å¯¦ä½œ
Scenario: ç™»å…¥ç³»çµ±
  Given æˆ‘æ‰“é–‹ç€è¦½å™¨è¨ªå• http://example.com/login
  When æˆ‘åœ¨ id="username" çš„è¼¸å…¥æ¡†è¼¸å…¥ "user123"
  And æˆ‘åœ¨ç¬¬äºŒå€‹è¼¸å…¥æ¡†è¼¸å…¥å¯†ç¢¼
  And æˆ‘é»æ“Š class="btn-primary" çš„è—è‰²æŒ‰éˆ•
  Then æ‡‰è©²è·³è½‰åˆ° /dashboard é é¢

# âœ… æ­£ç¢º:é—œæ³¨æ¥­å‹™è¡Œç‚º
Scenario: æˆåŠŸç™»å…¥ç³»çµ±
  Given æˆ‘åœ¨ç™»å…¥é é¢
  When æˆ‘è¼¸å…¥æœ‰æ•ˆçš„å¸³è™Ÿå¯†ç¢¼
  And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
  Then æ‡‰è©²é€²å…¥æœƒå“¡é¦–é 
  And æ‡‰è©²çœ‹åˆ°æ­¡è¿è¨Šæ¯
```

**éŒ¯èª¤ 3:æ­¥é©Ÿå¤ªå¤§,ç¼ºä¹æ˜ç¢ºæ€§**

```gherkin
# âŒ éŒ¯èª¤:æ­¥é©Ÿå¤ªç± çµ±
Scenario: è³¼ç‰©
  Given ä½¿ç”¨è€…
  When è²·æ±è¥¿
  Then æˆåŠŸ

# âœ… æ­£ç¢º:æ­¥é©Ÿæ˜ç¢ºå…·é«”
Scenario: æˆåŠŸå®Œæˆå•†å“è³¼è²·
  Given æˆ‘å·²ç™»å…¥ç‚ºè¨»å†Šæœƒå“¡
  And è³¼ç‰©è»Šæœ‰ 2 ä»¶å•†å“,ç¸½åƒ¹ 1500 å…ƒ
  When æˆ‘é¸æ“‡ä¿¡ç”¨å¡ä»˜æ¬¾
  And æˆ‘ç¢ºèªè¨‚å–®
  Then è¨‚å–®æ‡‰è©²å»ºç«‹æˆåŠŸ
  And æˆ‘æ‡‰è©²æ”¶åˆ°è¨‚å–®ç·¨è™Ÿ
  And æ‡‰è©²æ”¶åˆ°è¨‚å–®ç¢ºèªéƒµä»¶
```

**éŒ¯èª¤ 4:æ··åˆå¤šå€‹æ¸¬è©¦ç›®çš„**

```gherkin
# âŒ éŒ¯èª¤:ä¸€å€‹ Scenario æ¸¬è©¦å¤ªå¤šæ±è¥¿
Scenario: å®Œæ•´çš„è³¼ç‰©æµç¨‹
  Given æˆ‘è¨»å†Šæ–°å¸³è™Ÿ
  When æˆ‘ç™»å…¥
  And æˆ‘ç€è¦½å•†å“
  And æˆ‘åŠ å…¥è³¼ç‰©è»Š
  And æˆ‘ä¿®æ”¹æ•¸é‡
  And æˆ‘ä½¿ç”¨å„ªæƒ ç¢¼
  And æˆ‘çµå¸³
  And æˆ‘ä»˜æ¬¾
  And æˆ‘æŸ¥è©¢è¨‚å–®
  Then ä¸€åˆ‡æ­£å¸¸

# âœ… æ­£ç¢º:æ‹†åˆ†ç‚ºå¤šå€‹ Scenario
Scenario: æ–°æœƒå“¡è¨»å†Š
Scenario: æœƒå“¡ç™»å…¥
Scenario: å°‡å•†å“åŠ å…¥è³¼ç‰©è»Š
Scenario: ä½¿ç”¨å„ªæƒ ç¢¼çµå¸³
Scenario: æŸ¥è©¢è¨‚å–®ç‹€æ…‹
```

**éŒ¯èª¤ 5:Given-When-Then é †åºéŒ¯èª¤**

```gherkin
# âŒ éŒ¯èª¤:é †åºæ··äº‚
Scenario: è½‰å¸³
  When æˆ‘è½‰å¸³ 5000 å…ƒ
  Then è½‰å¸³æˆåŠŸ
  Given æˆ‘çš„å¸³æˆ¶æœ‰ 10000 å…ƒ

# âœ… æ­£ç¢º:éµå¾ªæ­£ç¢ºé †åº
Scenario: é¤˜é¡è¶³å¤ æ™‚è½‰å¸³æˆåŠŸ
  Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ
  When æˆ‘è½‰å¸³ 5000 å…ƒçµ¦æœ‹å‹
  Then è½‰å¸³æ‡‰è©²æˆåŠŸ
  And æˆ‘çš„é¤˜é¡æ‡‰è©²æ˜¯ 5000 å…ƒ
```

---

#### æœ€ä½³å¯¦å‹™ç¸½çµ

##### âœ… DO:æ‡‰è©²åšçš„

1. **ä½¿ç”¨é ˜åŸŸèªè¨€**
   - ç”¨æ¥­å‹™è¡“èª,ä¸ç”¨æŠ€è¡“è¡“èª
   - è®“éæŠ€è¡“äººå“¡ä¹Ÿèƒ½ç†è§£

2. **ä¿æŒç°¡æ½”**
   - æ¯å€‹ Scenario 5-10 æ­¥ç‚ºå®œ
   - è¶…éå‰‡è€ƒæ…®æ‹†åˆ†

3. **æè¿°æ€§å‘½å**
   - Scenario åç¨±èªªæ˜é æœŸè¡Œç‚º
   - Feature åç¨±ç°¡çŸ­æœ‰æ„ç¾©

4. **ä¸€å€‹ Scenario ä¸€å€‹ç›®çš„**
   - å–®ä¸€è·è²¬åŸå‰‡
   - æ¸¬è©¦å¤±æ•—æ™‚æ˜“æ–¼å®šä½å•é¡Œ

5. **ä½¿ç”¨ Background æ¶ˆé™¤é‡è¤‡**
   - å…±åŒå‰ç½®æ¢ä»¶æ”¾ Background
   - ä¿æŒ Scenario ç°¡æ½”

6. **é©ç•¶ä½¿ç”¨ Scenario Outline**
   - ç›¸åŒé‚è¼¯ä¸åŒè³‡æ–™æ™‚ä½¿ç”¨
   - ç”¨å¤šå€‹ Examples çµ„ç¹”è³‡æ–™

7. **åŠ ä¸Šæ¨™ç±¤çµ„ç¹”**
   - ä½¿ç”¨ @smokeã€@regression ç­‰æ¨™ç±¤
   - æ–¹ä¾¿ç¯©é¸åŸ·è¡Œ

##### âŒ DON'T:ä¸æ‡‰è©²åšçš„

1. **é¿å…æŠ€è¡“å¯¦ä½œç´°ç¯€**
   - ä¸æ API endpointã€SQLã€HTML id

2. **é¿å… UI ç¶å®š**
   - ä¸æè¿°æŒ‰éˆ•é¡è‰²ã€ä½ç½®

3. **é¿å…å¤ªé•·çš„ Scenario**
   - è¶…é 15 æ­¥è€ƒæ…®æ‹†åˆ†

4. **é¿å…æ¨¡ç³Šä¸æ¸…çš„æè¿°**
   - ä¸ç”¨ã€Œæ‡‰è©²æ­£å¸¸ã€ã€ã€Œæ¸¬è©¦åŠŸèƒ½ã€

5. **é¿å…é‡è¤‡çš„å‰ç½®æ¢ä»¶**
   - ç”¨ Background å–ä»£

6. **é¿å…éåº¦ä½¿ç”¨ Scenario Outline**
   - è³‡æ–™å·®ç•°å¤§æ™‚,ç”¨å¤šå€‹ Scenario

---

### ğŸ“ ç¬¬ä¸‰ç« ç¸½çµèˆ‡å¯¦å‹™è¦é»

#### é—œéµè¦é»å›é¡§

âœ… **Gherkin èªæ³•åŸºç¤**
- Feature/Scenario/Scenario Outline çµæ§‹
- Given-When-Then ä¸‰æ®µå¼æè¿°
- Background/Examples/Tags è¼”åŠ©åŠŸèƒ½

âœ… **é€²éšæ‡‰ç”¨æŠ€å·§**
- Feature çš„ä¸‰ç¨®æè¿°é¢¨æ ¼
- Scenario çš„è¨­è¨ˆæ¨¡å¼
- Scenario Outline çš„è³‡æ–™é©…å‹•ç­–ç•¥

âœ… **éœ€æ±‚è½‰æ›æµç¨‹**
- å¾éœ€æ±‚æ•˜è¿°æå–æ¥­å‹™è¦å‰‡
- ä½¿ç”¨ Example Mapping ç”¢ç”Ÿç¯„ä¾‹
- è½‰æ›ç‚ºçµæ§‹åŒ– Gherkin è¦æ ¼

âœ… **å¸¸è¦‹éŒ¯èª¤èˆ‡æœ€ä½³å¯¦å‹™**
- é¿å…æŠ€è¡“åŒ–èˆ‡ UI ç¶å®š
- ä¿æŒç°¡æ½”èˆ‡å–®ä¸€è·è²¬
- ä½¿ç”¨é ˜åŸŸèªè¨€èˆ‡æè¿°æ€§å‘½å

---

#### ğŸ¯ æª¢æŸ¥æ¸…å–®:æ’°å¯«é«˜å“è³ª Gherkin

**Feature å±¤ç´š**:
- [ ] Feature åç¨±ç°¡æ½”ä¸”æ¥­å‹™å°å‘
- [ ] åŒ…å« User Story æˆ–æ¥­å‹™åƒ¹å€¼èªªæ˜
- [ ] æ¥­å‹™è¦å‰‡æ¸…æ¥šåˆ—å‡º(å¦‚é©ç”¨)
- [ ] ä½¿ç”¨é©ç•¶çš„æ¨™ç±¤çµ„ç¹”

**Scenario å±¤ç´š**:
- [ ] Scenario åç¨±æè¿°é æœŸè¡Œç‚º
- [ ] éµå¾ª Given-When-Then çµæ§‹
- [ ] æ¯å€‹ Scenario è·è²¬å–®ä¸€
- [ ] æ­¥é©Ÿæ•¸é‡é©ä¸­(5-10æ­¥)
- [ ] ä½¿ç”¨æ¥­å‹™èªè¨€,é¿å…æŠ€è¡“ç´°ç¯€

**å¯è®€æ€§**:
- [ ] éæŠ€è¡“äººå“¡èƒ½ç†è§£
- [ ] ä¸æ¶‰åŠ UI å¯¦ä½œç´°ç¯€
- [ ] ä¸æ¶‰åŠæŠ€è¡“æ¶æ§‹ç´°ç¯€
- [ ] ä½¿ç”¨é ˜åŸŸå°ˆç”¨è¡“èª

**å¯ç¶­è­·æ€§**:
- [ ] ä½¿ç”¨ Background æ¶ˆé™¤é‡è¤‡
- [ ] é©ç•¶ä½¿ç”¨ Scenario Outline
- [ ] æ¨™ç±¤æœ‰åŠ©æ–¼æ¸¬è©¦çµ„ç¹”
- [ ] æ˜“æ–¼ä¿®æ”¹èˆ‡æ“´å±•

---

#### ğŸ’¡ Gherkin æ’°å¯«é»ƒé‡‘æ³•å‰‡

**Rule 1:æ¥­å‹™å„ªå…ˆ**
```
æ’°å¯«çµ¦æ¥­å‹™äººå“¡çœ‹çš„è¦æ ¼,è€Œéçµ¦ç¨‹å¼è¨­è¨ˆå¸«çœ‹çš„æ¸¬è©¦ç¨‹å¼ç¢¼
```

**Rule 2:ç¯„ä¾‹å‹æ–¼æè¿°**
```
ç”¨å…·é«”ç¯„ä¾‹èªªæ˜,å‹éæŠ½è±¡çš„è¦å‰‡æè¿°
```

**Rule 3:ç°¡æ½”å‹æ–¼å®Œæ•´**
```
80% æ­£ç¢ºä¸”æ˜“è®€çš„è¦æ ¼,å‹é 100% å®Œæ•´ä½†è¤‡é›œçš„è¦æ ¼
```

**Rule 4:å¯åŸ·è¡Œçš„æ´»æ–‡ä»¶**
```
Feature Files ä¸æ˜¯æ–‡ä»¶,æ˜¯å¯åŸ·è¡Œçš„è¦æ ¼
```

**Rule 5:æŒçºŒæ”¹å–„**
```
éš¨è‘—ç†è§£åŠ æ·±,ä¸æ–·ç²¾ç…‰èˆ‡é‡æ§‹ Feature Files
```

---

#### ğŸ“š Gherkin ç¯„ä¾‹æ¨¡æ¿åº«

**æ¨¡æ¿ 1:åŸºæœ¬ Feature**
```gherkin
Feature: [åŠŸèƒ½åç¨±]
  ä½œç‚º [è§’è‰²]
  æˆ‘æƒ³è¦ [åŠŸèƒ½]
  ä»¥ä¾¿ [åƒ¹å€¼]

  Scenario: [æ­£å¸¸æƒ…æ³]
    Given [å‰ç½®æ¢ä»¶]
    When [åŸ·è¡Œå‹•ä½œ]
    Then [é æœŸçµæœ]
  
  Scenario: [ç•°å¸¸æƒ…æ³]
    Given [å‰ç½®æ¢ä»¶]
    When [åŸ·è¡Œå‹•ä½œ]
    Then [éŒ¯èª¤è™•ç†]
```

**æ¨¡æ¿ 2:è³‡æ–™é©…å‹• Feature**
```gherkin
Feature: [åŠŸèƒ½åç¨±]

  Scenario Outline: [å ´æ™¯æè¿°]
    Given [å‰ç½®] <åƒæ•¸1>
    When [å‹•ä½œ] <åƒæ•¸2>
    Then [çµæœ] <åƒæ•¸3>
    
    Examples:
      | åƒæ•¸1 | åƒæ•¸2 | åƒæ•¸3 |
      | å€¼1   | å€¼2   | å€¼3   |
```

**æ¨¡æ¿ 3:è¤‡é›œæ¥­å‹™æµç¨‹**
```gherkin
Feature: [åŠŸèƒ½åç¨±]

  Background:
    Given [å…±åŒå‰ç½®æ¢ä»¶]
  
  @happy_path
  Scenario: [ä¸»è¦æˆåŠŸè·¯å¾‘]
  
  @alternative_path
  Scenario: [æ›¿ä»£è·¯å¾‘]
  
  @error_handling
  Scenario: [éŒ¯èª¤è™•ç†]
  
  @boundary
  Scenario Outline: [é‚Šç•Œæ¸¬è©¦]
```

---

**ä¸‹ä¸€ç« é å‘Š**:
æˆ‘å€‘å°‡å­¸ç¿’å¦‚ä½•å°‡ **BDD æ•´åˆåˆ°ç³»çµ±åˆ†æå·¥ä½œ**ä¸­,åŒ…æ‹¬å¾æ¥­å‹™éœ€æ±‚è½‰åŒ–ç‚ºå¯åŸ·è¡Œè¡Œç‚ºã€èˆ‡åˆ©å®³é—œä¿‚äººå…±å‰µç¯„ä¾‹ã€User Story èˆ‡ BDD çš„çµåˆæ–¹å¼ç­‰å¯¦å‹™æŠ€å·§ã€‚

---

## ç¬¬å››ç« ã€€BDD èˆ‡ç³»çµ±åˆ†æçš„æ•´åˆæ‡‰ç”¨

ç³»çµ±åˆ†æå¸«(SA)åœ¨ BDD æµç¨‹ä¸­æ‰®æ¼”é—œéµè§’è‰²ã€‚æœ¬ç« å°‡èªªæ˜å¦‚ä½•å°‡ BDD æ–¹æ³•è«–æ•´åˆåˆ°æ—¥å¸¸çš„ç³»çµ±åˆ†æå·¥ä½œä¸­,å¾éœ€æ±‚æ”¶é›†åˆ°è¦æ ¼å®šç¾©çš„å®Œæ•´æµç¨‹ã€‚

### 4.1 å¦‚ä½•å°‡æ¥­å‹™éœ€æ±‚è½‰åŒ–ç‚ºå¯åŸ·è¡Œè¡Œç‚º

#### 4.1.1 éœ€æ±‚åˆ†æçš„å‚³çµ±å›°å¢ƒ

```mermaid
graph TB
    subgraph Traditional[å‚³çµ±éœ€æ±‚åˆ†æå•é¡Œ]
        P1[éœ€æ±‚æ–‡ä»¶å†—é•·] --> P2[é–±è®€è² æ“”é‡]
        P2 --> P3[ç†è§£ä¸ä¸€è‡´]
        P3 --> P4[å¯¦ä½œåé›¢éœ€æ±‚]
        P4 --> P5[æ¸¬è©¦èˆ‡éœ€æ±‚è„«ç¯€]
        P5 --> P6[æ–‡ä»¶éæ™‚ç„¡ç”¨]
    end
    
    subgraph BDD_Solution[BDD è§£æ±ºæ–¹æ¡ˆ]
        S1[å¯åŸ·è¡Œç¯„ä¾‹] --> S2[æ˜“æ–¼ç†è§£]
        S2 --> S3[å…±äº«ç†è§£]
        S3 --> S4[å¯¦ä½œç¬¦åˆè¦æ ¼]
        S4 --> S5[æ¸¬è©¦å³è¦æ ¼]
        S5 --> S6[æ´»æ–‡ä»¶]
    end
    
    Traditional -.BDDè½‰æ›.-> BDD_Solution
    
    style Traditional fill:#ffe1e1
    style BDD_Solution fill:#e7f5e1
```

#### 4.1.2 éœ€æ±‚è½‰æ›çš„äº”å€‹æ­¥é©Ÿ

**Step 1:éœ€æ±‚æ”¶é›†èˆ‡ç†è§£**

å‚³çµ±åšæ³• vs BDD åšæ³•:

```
å‚³çµ±åšæ³•:
1. æ”¶é›†ä½¿ç”¨è€…éœ€æ±‚
2. æ’°å¯«éœ€æ±‚è¦æ ¼æ›¸(SRS)
3. è©•å¯©èˆ‡ç°½æ ¸
4. äº¤ä»˜é–‹ç™¼åœ˜éšŠ

BDD åšæ³•:
1. æ”¶é›†ä½¿ç”¨è€…éœ€æ±‚
2. è­˜åˆ¥é—œéµä½¿ç”¨è€…æ•…äº‹
3. Discovery Workshop(å”ä½œæ¢ç´¢)
4. ç”¢å‡º Example Map èˆ‡ Feature Files
5. æŒçºŒå”ä½œèˆ‡èª¿æ•´
```

**Step 2:è­˜åˆ¥è¡Œç‚ºèˆ‡è¦å‰‡**

å°‡éœ€æ±‚æ‹†è§£ç‚ºå¯è§€å¯Ÿçš„è¡Œç‚ºã€‚

**åŸå§‹éœ€æ±‚ç¯„ä¾‹**:
```
éœ€æ±‚:ç³»çµ±æ‡‰è©²æ”¯æ´ä½¿ç”¨è€…ç®¡ç†åŠŸèƒ½,
åŒ…æ‹¬æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤ä½¿ç”¨è€…,
ä¸¦ä¸”éœ€è¦æ¬Šé™æ§ç®¡ã€‚
```

**è¡Œç‚ºè­˜åˆ¥**:
```mermaid
graph LR
    Req[ä½¿ç”¨è€…ç®¡ç†éœ€æ±‚] --> B1[è¡Œç‚º1:å»ºç«‹ä½¿ç”¨è€…]
    Req --> B2[è¡Œç‚º2:ä¿®æ”¹ä½¿ç”¨è€…è³‡è¨Š]
    Req --> B3[è¡Œç‚º3:åˆªé™¤ä½¿ç”¨è€…]
    Req --> B4[è¡Œç‚º4:æ¬Šé™é©—è­‰]
    
    B1 --> R1[è¦å‰‡:å¸³è™Ÿå”¯ä¸€]
    B1 --> R2[è¦å‰‡:å¿…å¡«æ¬„ä½]
    B4 --> R3[è¦å‰‡:åƒ…ç®¡ç†å“¡å¯æ“ä½œ]
    
    style Req fill:#e1f5ff
    style B1 fill:#fff4e1
    style B2 fill:#fff4e1
    style B3 fill:#fff4e1
    style B4 fill:#fff4e1
    style R1 fill:#c8e6c9
    style R2 fill:#c8e6c9
    style R3 fill:#c8e6c9
```

**Step 3:å»ºç«‹å…·é«”ç¯„ä¾‹**

ç‚ºæ¯å€‹è¡Œç‚ºèˆ‡è¦å‰‡ç”¢ç”Ÿå…·é«”ç¯„ä¾‹ã€‚

```
è¡Œç‚º:å»ºç«‹ä½¿ç”¨è€…
è¦å‰‡:å¸³è™Ÿå¿…é ˆå”¯ä¸€

ç¯„ä¾‹:
âœ… ç•¶å¸³è™Ÿä¸å­˜åœ¨æ™‚,æˆåŠŸå»ºç«‹ä½¿ç”¨è€…
âŒ ç•¶å¸³è™Ÿå·²å­˜åœ¨æ™‚,é¡¯ç¤ºã€Œå¸³è™Ÿå·²å­˜åœ¨ã€éŒ¯èª¤
âŒ ç•¶å¸³è™Ÿæ ¼å¼ä¸æ­£ç¢ºæ™‚,é¡¯ç¤ºã€Œå¸³è™Ÿæ ¼å¼éŒ¯èª¤ã€
```

**Step 4:æ’°å¯« Feature Files**

å°‡ç¯„ä¾‹è½‰æ›ç‚º Gherkin è¦æ ¼ã€‚

```gherkin
Feature: ä½¿ç”¨è€…ç®¡ç† - å»ºç«‹ä½¿ç”¨è€…
  ä½œç‚º ç³»çµ±ç®¡ç†å“¡
  æˆ‘æƒ³è¦ å»ºç«‹æ–°çš„ä½¿ç”¨è€…å¸³è™Ÿ
  ä»¥ä¾¿ è®“æ–°å“¡å·¥å¯ä»¥ä½¿ç”¨ç³»çµ±

  Background:
    Given æˆ‘ä»¥ç®¡ç†å“¡èº«åˆ†ç™»å…¥
    And æˆ‘åœ¨ä½¿ç”¨è€…ç®¡ç†é é¢

  @happy_path
  Scenario: æˆåŠŸå»ºç«‹æ–°ä½¿ç”¨è€…
    When æˆ‘å»ºç«‹ä½¿ç”¨è€…,è³‡æ–™å¦‚ä¸‹:
      | å¸³è™Ÿ     | email@example.com |
      | å§“å     | å¼µä¸‰              |
      | éƒ¨é–€     | è³‡è¨Šéƒ¨            |
      | è§’è‰²     | ä¸€èˆ¬ä½¿ç”¨è€…        |
    Then ä½¿ç”¨è€…æ‡‰è©²å»ºç«‹æˆåŠŸ
    And ç³»çµ±æ‡‰è©²ç™¼é€æ­¡è¿éƒµä»¶åˆ° email@example.com
    And ä½¿ç”¨è€…æ¸…å–®æ‡‰è©²é¡¯ç¤ºæ–°ä½¿ç”¨è€…

  @validation
  Scenario: å¸³è™Ÿå·²å­˜åœ¨æ™‚ç„¡æ³•å»ºç«‹
    Given ç³»çµ±å·²æœ‰å¸³è™Ÿ "existing@example.com"
    When æˆ‘å˜—è©¦å»ºç«‹å¸³è™Ÿ "existing@example.com"
    Then æ‡‰è©²é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ "å¸³è™Ÿå·²å­˜åœ¨"
    And ä½¿ç”¨è€…ä¸æ‡‰è©²è¢«å»ºç«‹

  @validation
  Scenario Outline: é©—è­‰å¿…å¡«æ¬„ä½
    When æˆ‘å»ºç«‹ä½¿ç”¨è€…,ä½† <æ¬„ä½> ç‚ºç©º
    Then æ‡‰è©²é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ "<éŒ¯èª¤è¨Šæ¯>"
    
    Examples:
      | æ¬„ä½ | éŒ¯èª¤è¨Šæ¯           |
      | å¸³è™Ÿ | å¸³è™Ÿç‚ºå¿…å¡«æ¬„ä½     |
      | å§“å | å§“åç‚ºå¿…å¡«æ¬„ä½     |
      | éƒ¨é–€ | éƒ¨é–€ç‚ºå¿…å¡«æ¬„ä½     |

  @authorization
  Scenario: éç®¡ç†å“¡ç„¡æ³•å»ºç«‹ä½¿ç”¨è€…
    Given æˆ‘ä»¥ä¸€èˆ¬ä½¿ç”¨è€…èº«åˆ†ç™»å…¥
    When æˆ‘å˜—è©¦å»ºç«‹æ–°ä½¿ç”¨è€…
    Then æ‡‰è©²é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ "æ¬Šé™ä¸è¶³"
    And æ‡‰è©²å°å‘é¦–é 
```

**Step 5:é©—è­‰èˆ‡ç²¾ç…‰**

èˆ‡åœ˜éšŠ Review,ç¢ºä¿:
- âœ… æ¶µè“‹æ‰€æœ‰é‡è¦å ´æ™¯
- âœ… æ¥­å‹™äººå“¡èƒ½ç†è§£
- âœ… é–‹ç™¼äººå“¡å¯å¯¦ä½œ
- âœ… æ¸¬è©¦äººå“¡å¯é©—è­‰

---

#### 4.1.3 ä¸åŒé¡å‹éœ€æ±‚çš„è½‰æ›ç­–ç•¥

**é¡å‹ 1:åŠŸèƒ½æ€§éœ€æ±‚**

```
åŸå§‹éœ€æ±‚:
ä½¿ç”¨è€…æ‡‰è©²èƒ½å¤ é‡è¨­å¿˜è¨˜çš„å¯†ç¢¼

è½‰æ›ç‚º BDD:
Feature: å¯†ç¢¼é‡è¨­
  Scenario: é€éé›»å­éƒµä»¶é‡è¨­å¯†ç¢¼
    Given æˆ‘å¿˜è¨˜äº†å¯†ç¢¼
    When æˆ‘åœ¨ç™»å…¥é é¢é»æ“Šã€Œå¿˜è¨˜å¯†ç¢¼ã€
    And æˆ‘è¼¸å…¥è¨»å†Šçš„é›»å­éƒµä»¶
    Then æˆ‘æ‡‰è©²æ”¶åˆ°å¯†ç¢¼é‡è¨­é€£çµ
    When æˆ‘é»æ“Šé€£çµä¸¦è¼¸å…¥æ–°å¯†ç¢¼
    Then å¯†ç¢¼æ‡‰è©²æ›´æ–°æˆåŠŸ
    And æˆ‘æ‡‰è©²èƒ½ç”¨æ–°å¯†ç¢¼ç™»å…¥
```

**é¡å‹ 2:æ¥­å‹™è¦å‰‡**

```
åŸå§‹éœ€æ±‚:
è¨‚å–®é‡‘é¡è¶…é 1000 å…ƒå…é‹è²»,
æœªæ»¿ 1000 å…ƒé‹è²» 100 å…ƒ

è½‰æ›ç‚º BDD:
Feature: é‹è²»è¨ˆç®—è¦å‰‡
  Scenario Outline: æ ¹æ“šè¨‚å–®é‡‘é¡è¨ˆç®—é‹è²»
    Given è³¼ç‰©è»Šå•†å“ç¸½åƒ¹ç‚º <é‡‘é¡> å…ƒ
    When ç³»çµ±è¨ˆç®—é‹è²»
    Then é‹è²»æ‡‰ç‚º <é‹è²»> å…ƒ
    And è¨‚å–®ç¸½é‡‘é¡æ‡‰ç‚º <ç¸½é¡> å…ƒ
    
    Examples:
      | é‡‘é¡ | é‹è²» | ç¸½é¡ |
      | 500  | 100  | 600  |
      | 999  | 100  | 1099 |
      | 1000 | 0    | 1000 |
      | 1500 | 0    | 1500 |
```

**é¡å‹ 3:æ•´åˆéœ€æ±‚**

```
åŸå§‹éœ€æ±‚:
ç•¶è¨‚å–®æˆç«‹æ™‚,ç³»çµ±éœ€è¦é€šçŸ¥å€‰å„²ç³»çµ±é€²è¡Œå‡ºè²¨

è½‰æ›ç‚º BDD:
Feature: è¨‚å–®èˆ‡å€‰å„²ç³»çµ±æ•´åˆ
  Scenario: è¨‚å–®æˆç«‹å¾Œé€šçŸ¥å€‰å„²ç³»çµ±
    Given è³¼ç‰©è»Šæœ‰å•†å“
    When æˆ‘å®Œæˆè¨‚å–®ä¸¦ä»˜æ¬¾æˆåŠŸ
    Then è¨‚å–®ç‹€æ…‹æ‡‰ç‚ºã€Œå¾…å‡ºè²¨ã€
    And ç³»çµ±æ‡‰è©²ç™¼é€å‡ºè²¨é€šçŸ¥åˆ°å€‰å„²ç³»çµ±
    And å€‰å„²ç³»çµ±æ‡‰è©²æ¥æ”¶åˆ°ä»¥ä¸‹è³‡è¨Š:
      | è¨‚å–®ç·¨è™Ÿ | ORD-20250107-001 |
      | æ”¶ä»¶äºº   | å¼µä¸‰             |
      | æ”¶ä»¶åœ°å€ | å°åŒ—å¸‚...        |
      | å•†å“æ¸…å–® | [å•†å“æ˜ç´°]       |
```

**é¡å‹ 4:éåŠŸèƒ½éœ€æ±‚**

```
åŸå§‹éœ€æ±‚:
ç³»çµ±å›æ‡‰æ™‚é–“æ‡‰åœ¨ 2 ç§’å…§

è½‰æ›ç‚º BDD:
Feature: ç³»çµ±æ•ˆèƒ½è¦æ±‚
  @performance
  Scenario: æŸ¥è©¢ä½¿ç”¨è€…æ¸…å–®çš„å›æ‡‰æ™‚é–“
    Given è³‡æ–™åº«æœ‰ 10000 ç­†ä½¿ç”¨è€…è³‡æ–™
    When æˆ‘æŸ¥è©¢ä½¿ç”¨è€…æ¸…å–®(ç¬¬ä¸€é ,æ¯é 50ç­†)
    Then å›æ‡‰æ™‚é–“æ‡‰å°‘æ–¼ 2 ç§’
    And æ‡‰è©²å›å‚³ 50 ç­†ä½¿ç”¨è€…è³‡æ–™
```

---

### 4.2 èˆ‡åˆ©å®³é—œä¿‚äººå…±å‰µç¯„ä¾‹(Example Mapping)

#### 4.2.1 åˆ©å®³é—œä¿‚äººçš„é¡å‹èˆ‡è§’è‰²

```mermaid
graph TB
    subgraph Stakeholders[åˆ©å®³é—œä¿‚äºº]
        A[æ¥­å‹™è² è²¬äºº<br/>Product Owner]
        B[é ˜åŸŸå°ˆå®¶<br/>Domain Expert]
        C[ä½¿ç”¨è€…ä»£è¡¨<br/>End User]
        D[ç³»çµ±åˆ†æå¸«<br/>SA/BA]
        E[é–‹ç™¼äººå“¡<br/>Developer]
        F[æ¸¬è©¦äººå“¡<br/>QA]
    end
    
    A -->|æä¾›æ¥­å‹™ç›®æ¨™| Workshop
    B -->|æä¾›å°ˆæ¥­çŸ¥è­˜| Workshop
    C -->|æä¾›å¯¦éš›ä½¿ç”¨ç¶“é©—| Workshop
    D -->|å¼•å°èˆ‡è¨˜éŒ„| Workshop[Example Mapping<br/>Workshop]
    E -->|æä¾›æŠ€è¡“è§€é»| Workshop
    F -->|æä¾›æ¸¬è©¦æ€ç¶­| Workshop
    
    Workshop --> Output[ç”¢å‡º:<br/>Example Map<br/>Feature Files<br/>å…±äº«ç†è§£]
    
    style Workshop fill:#fff4e1
    style Output fill:#e7f5e1
```

#### 4.2.2 Example Mapping Workshop å¯¦æ–½æŒ‡å—

**å‰ç½®æº–å‚™(Workshop å‰ 1-2 å¤©)**

**SA çš„æº–å‚™å·¥ä½œ**:
```
â–¡ é¸æ“‡è¦æ¢ç´¢çš„ User Story
â–¡ æº–å‚™ Story çš„èƒŒæ™¯è³‡æ–™
â–¡ é å…ˆè­˜åˆ¥å¯èƒ½çš„æ¥­å‹™è¦å‰‡
â–¡ æº–å‚™å¹¾å€‹åˆæ­¥ç¯„ä¾‹
â–¡ é ç´„æœƒè­°å®¤/ç·šä¸Šæœƒè­°
â–¡ æº–å‚™å·¥å…·(ä¾¿åˆ©è²¼ã€ç™½æ¿ or Miro)
â–¡ ç™¼é€æœƒè­°é‚€è«‹èˆ‡å‰ç½®è³‡æ–™
```

**æœƒè­°é‚€è«‹ç¯„æœ¬**:
```
æœƒè­°:Example Mapping Workshop - [Story åç¨±]
æ™‚é–“:60 åˆ†é˜
åƒèˆ‡è€…:POã€é ˜åŸŸå°ˆå®¶ã€SAã€Devã€QA

ç›®æ¨™:
1. ç†è§£ Story çš„æ¥­å‹™éœ€æ±‚
2. è­˜åˆ¥æ¥­å‹™è¦å‰‡
3. ç”¢ç”Ÿå…·é«”ç¯„ä¾‹
4. é”æˆå…±è­˜

è«‹æ”œå¸¶:
- å°æ­¤åŠŸèƒ½çš„ä»»ä½•å•é¡Œ
- ç›¸é—œçš„æ¥­å‹™çŸ¥è­˜èˆ‡ç¶“é©—

å‰ç½®è³‡æ–™:[é€£çµ]
```

**Workshop åŸ·è¡Œæµç¨‹(60 åˆ†é˜)**

**Phase 1:Story èªªæ˜(5 åˆ†é˜)**

ç”± PO æˆ– BA èªªæ˜:
```
1. Story èƒŒæ™¯:ç‚ºä»€éº¼éœ€è¦é€™å€‹åŠŸèƒ½?
2. ä½¿ç”¨è€…è§’è‰²:èª°æœƒä½¿ç”¨?
3. æ¥­å‹™åƒ¹å€¼:é”æˆä»€éº¼ç›®æ¨™?
4. åˆæ­¥é©—æ”¶æº–å‰‡
```

**Phase 2:è¦å‰‡æå–(15 åˆ†é˜)**

SA å¼•å°åœ˜éšŠè¨è«–:
```
å¼•å°å•å¥:
- ã€Œåœ¨ä»€éº¼æƒ…æ³ä¸‹æœƒ...?ã€
- ã€Œæœ‰å“ªäº›é™åˆ¶æˆ–æ¢ä»¶?ã€
- ã€Œä»€éº¼æ™‚å€™æœƒå¤±æ•—?ã€
- ã€Œæ˜¯å¦æœ‰ä¾‹å¤–æƒ…æ³?ã€
- ã€Œèˆ‡å…¶ä»–åŠŸèƒ½çš„é—œè¯?ã€

è¨˜éŒ„æ–¹å¼:
- æ¯å€‹è¦å‰‡å¯«åœ¨ä¸€å¼µè—è‰²å¡ç‰‡
- ç°¡æ½”æè¿°,ä¸€å¥è©±ç‚ºä¸»
- æ”¾åœ¨ Story å¡ç‰‡ä¸‹æ–¹
```

**Phase 3:ç¯„ä¾‹ç”¢ç”Ÿ(25 åˆ†é˜)**

é‡å°æ¯å€‹è¦å‰‡ç”¢ç”Ÿç¯„ä¾‹:
```
ç¯„ä¾‹ç”¢ç”ŸæŠ€å·§:
1. å…ˆå•ã€Œæ­£å¸¸æƒ…æ³æ˜¯ä»€éº¼?ã€
2. å†å•ã€Œä»€éº¼æ™‚å€™æœƒå‡ºéŒ¯?ã€
3. æ¢ç´¢é‚Šç•Œã€Œå‰›å¥½ã€çš„æƒ…æ³
4. è€ƒæ…®çµ„åˆæƒ…å¢ƒ

è¨˜éŒ„æ–¹å¼:
- æ¯å€‹ç¯„ä¾‹ä¸€å¼µç¶ è‰²å¡ç‰‡
- å¯«æ˜è¼¸å…¥èˆ‡é æœŸè¼¸å‡º
- æ”¾åœ¨å°æ‡‰è¦å‰‡ä¸‹æ–¹
```

**Phase 4:å•é¡Œè¨˜éŒ„(ç©¿æ’é€²è¡Œ)**

é‡åˆ°ä¸ç¢ºå®šçš„äº‹é …:
```
è¨˜éŒ„å•é¡Œ:
- ç„¡æ³•ç•¶å ´å›ç­”çš„å•é¡Œ
- éœ€è¦é€²ä¸€æ­¥èª¿æŸ¥çš„æŠ€è¡“é™åˆ¶
- éœ€è¦æ±ºç­–å±¤æ±ºå®šçš„äº‹é …
- èˆ‡å…¶ä»–åœ˜éšŠç¢ºèªçš„æ•´åˆé»

è¨˜éŒ„æ–¹å¼:
- ç´…è‰²å¡ç‰‡è¨˜éŒ„å•é¡Œ
- æ¨™è¨»è² è²¬äºº
- è¨­å®šå›è¦†æœŸé™
```

**Phase 5:ç¸½çµèˆ‡æ±ºç­–(10 åˆ†é˜)**

è©•ä¼° Story å°±ç·’ç¨‹åº¦:
```
è©•ä¼°æº–å‰‡:
âœ… Ready:
   - è¦å‰‡æ¸…æ¥š(< 8 å€‹)
   - ç¯„ä¾‹å……è¶³(æ¯å€‹è¦å‰‡è‡³å°‘ 2 å€‹)
   - ç´…è‰²å¡ç‰‡å°‘(< 3 å€‹)
   - åœ˜éšŠç†è§£ä¸€è‡´

âš ï¸ Need Work:
   - ç´…è‰²å¡ç‰‡å¤š(>= 3 å€‹)
   - è¦å‰‡æ¨¡ç³Šæˆ–è¡çª
   - ç¯„ä¾‹é›£ä»¥ç”¢ç”Ÿ
   â†’ å®‰æ’å¾ŒçºŒæœƒè­°

ğŸ”´ Too Big:
   - è¦å‰‡å¤ªå¤š(> 8 å€‹)
   - Workshop æ™‚é–“ä¸å¤ 
   â†’ æ‹†åˆ†ç‚ºå¤šå€‹ Story
```

**Phase 6:è¡Œå‹•é …ç›®(5 åˆ†é˜)**

åˆ†é…å¾ŒçºŒå·¥ä½œ:
```
SA çš„å·¥ä½œ:
â–¡ å°‡ Example Map è½‰ç‚º Feature File
â–¡ æ•´ç†æœƒè­°è¨˜éŒ„
â–¡ è¿½è¹¤ç´…è‰²å¡ç‰‡çš„å•é¡Œè§£æ±º

Dev çš„å·¥ä½œ:
â–¡ è©•ä¼°æŠ€è¡“å¯è¡Œæ€§
â–¡ æä¾›å¯¦ä½œæ™‚é–“ä¼°ç®—

QA çš„å·¥ä½œ:
â–¡ Review Feature File
â–¡ è£œå……æ¸¬è©¦å ´æ™¯

PO çš„å·¥ä½œ:
â–¡ è§£æ±ºæ¥­å‹™æ±ºç­–å•é¡Œ
â–¡ ç¢ºèªå„ªå…ˆé †åº
```

---

#### 4.2.3 Example Mapping å¯¦æˆ°æ¡ˆä¾‹

**æ¡ˆä¾‹:é›»å•†ä¿ƒéŠ·æ´»å‹•ç®¡ç†**

**åŸå§‹ User Story**:
```
èº«ç‚º è¡ŒéŠ·äººå“¡
æˆ‘æƒ³è¦ å»ºç«‹é™æ™‚ä¿ƒéŠ·æ´»å‹•
ä»¥ä¾¿ å¸å¼•å®¢æˆ¶ä¸‹å–®ä¸¦æå‡ç‡Ÿæ¥­é¡

é©—æ”¶æº–å‰‡:
- å¯è¨­å®šä¿ƒéŠ·æœŸé–“
- å¯é¸æ“‡é©ç”¨å•†å“
- å¯è¨­å®šæŠ˜æ‰£æ–¹å¼(ç™¾åˆ†æ¯”/å›ºå®šé‡‘é¡)
```

**Workshop ç”¢å‡ºçš„ Example Map**:

```
ğŸŸ¨ [Story] å»ºç«‹é™æ™‚ä¿ƒéŠ·æ´»å‹•

â”œâ”€ ğŸŸ¦ [Rule 1] ä¿ƒéŠ·æœŸé–“å¿…é ˆæ˜¯æœªä¾†æ™‚é–“
â”‚  â”œâ”€ ğŸŸ© é–‹å§‹æ™‚é–“=ä»Šå¤© 23:00,çµæŸ=æ˜å¤© 23:59 â†’ æˆåŠŸ
â”‚  â”œâ”€ ğŸŸ© é–‹å§‹æ™‚é–“=æ˜¨å¤©,çµæŸ=æ˜å¤© â†’ å¤±æ•—ã€Œé–‹å§‹æ™‚é–“ä¸å¯ç‚ºéå»ã€
â”‚  â””â”€ ğŸŸ¥ [Q] æ˜¯å¦å…è¨±å»ºç«‹ä½†æš«ä¸å•Ÿç”¨çš„æ´»å‹•?
â”‚
â”œâ”€ ğŸŸ¦ [Rule 2] çµæŸæ™‚é–“å¿…é ˆæ™šæ–¼é–‹å§‹æ™‚é–“
â”‚  â”œâ”€ ğŸŸ© é–‹å§‹=2025-01-10, çµæŸ=2025-01-15 â†’ æˆåŠŸ
â”‚  â”œâ”€ ğŸŸ© é–‹å§‹=2025-01-10 10:00, çµæŸ=2025-01-10 09:00 â†’ å¤±æ•—
â”‚  â””â”€ ğŸŸ© é–‹å§‹=çµæŸ â†’ å¤±æ•—ã€ŒçµæŸæ™‚é–“å¿…é ˆæ™šæ–¼é–‹å§‹æ™‚é–“ã€
â”‚
â”œâ”€ ğŸŸ¦ [Rule 3] å¿…é ˆé¸æ“‡è‡³å°‘ä¸€å€‹å•†å“
â”‚  â”œâ”€ ğŸŸ© é¸æ“‡ 3 å€‹å•†å“ â†’ æˆåŠŸ
â”‚  â”œâ”€ ğŸŸ© é¸æ“‡å…¨éƒ¨å•†å“ â†’ æˆåŠŸ
â”‚  â”œâ”€ ğŸŸ© æœªé¸æ“‡å•†å“ â†’ å¤±æ•—ã€Œè«‹é¸æ“‡è‡³å°‘ä¸€å€‹å•†å“ã€
â”‚  â””â”€ ğŸŸ¥ [Q] æ˜¯å¦æ”¯æ´é¸æ“‡å•†å“é¡åˆ¥?
â”‚
â”œâ”€ ğŸŸ¦ [Rule 4] æŠ˜æ‰£æ–¹å¼:ç™¾åˆ†æ¯”(1-99%)æˆ–å›ºå®šé‡‘é¡
â”‚  â”œâ”€ ğŸŸ© ç™¾åˆ†æ¯” 20% â†’ æˆåŠŸ
â”‚  â”œâ”€ ğŸŸ© å›ºå®šé‡‘é¡ 100 å…ƒ â†’ æˆåŠŸ
â”‚  â”œâ”€ ğŸŸ© ç™¾åˆ†æ¯” 0% â†’ å¤±æ•—ã€ŒæŠ˜æ‰£å¿…é ˆå¤§æ–¼0ã€
â”‚  â”œâ”€ ğŸŸ© ç™¾åˆ†æ¯” 100% â†’ å¤±æ•—ã€ŒæŠ˜æ‰£ä¸å¯ç‚º100%ã€
â”‚  â””â”€ ğŸŸ© å›ºå®šé‡‘é¡å¤§æ–¼å•†å“åƒ¹æ ¼ â†’ è­¦å‘Šã€ŒæŠ˜æ‰£é‡‘é¡ä¸æ‡‰è¶…éå•†å“åƒ¹æ ¼ã€
â”‚
â”œâ”€ ğŸŸ¦ [Rule 5] åŒä¸€å•†å“ä¸å¯æœ‰é‡ç–Šçš„ä¿ƒéŠ·æ´»å‹•
â”‚  â”œâ”€ ğŸŸ© å•†å“ A æ´»å‹• 1:1/1-1/10, æ´»å‹• 2:1/11-1/20 â†’ æˆåŠŸ
â”‚  â”œâ”€ ğŸŸ© å•†å“ A æ´»å‹• 1:1/1-1/10, æ´»å‹• 2:1/5-1/15 â†’ å¤±æ•—
â”‚  â””â”€ ğŸŸ¥ [Q] å¦‚æœé‡ç–Š,æ˜¯å¦è‡ªå‹•å¥—ç”¨è¼ƒå„ªæƒ çš„æ´»å‹•?
â”‚
â””â”€ ğŸŸ¥ [Q] æ˜¯å¦éœ€è¦æ´»å‹•é è¦½åŠŸèƒ½?
```

**è½‰æ›ç‚º Feature File**:

```gherkin
Feature: é›»å•†ä¿ƒéŠ·æ´»å‹•ç®¡ç†
  ä½œç‚º è¡ŒéŠ·äººå“¡
  æˆ‘æƒ³è¦ å»ºç«‹é™æ™‚ä¿ƒéŠ·æ´»å‹•
  ä»¥ä¾¿ å¸å¼•å®¢æˆ¶è³¼è²·ä¸¦æå‡ç‡Ÿæ¥­é¡

  Background:
    Given æˆ‘ä»¥è¡ŒéŠ·äººå“¡èº«åˆ†ç™»å…¥
    And æˆ‘åœ¨ä¿ƒéŠ·æ´»å‹•ç®¡ç†é é¢

  @happy_path
  Scenario: æˆåŠŸå»ºç«‹ä¿ƒéŠ·æ´»å‹•
    When æˆ‘å»ºç«‹ä¿ƒéŠ·æ´»å‹•,è³‡è¨Šå¦‚ä¸‹:
      | æ´»å‹•åç¨± | æ–°å¹´ç‰¹æƒ          |
      | é–‹å§‹æ™‚é–“ | 2025-01-10 00:00 |
      | çµæŸæ™‚é–“ | 2025-01-15 23:59 |
      | é©ç”¨å•†å“ | å•†å“A, å•†å“B     |
      | æŠ˜æ‰£æ–¹å¼ | ç™¾åˆ†æ¯” 20%       |
    Then æ´»å‹•æ‡‰è©²å»ºç«‹æˆåŠŸ
    And æ´»å‹•ç‹€æ…‹æ‡‰ç‚ºã€Œå¾…å•Ÿç”¨ã€
    And æ´»å‹•æ¸…å–®æ‡‰é¡¯ç¤ºæ–°æ´»å‹•

  @validation
  Scenario Outline: é©—è­‰ä¿ƒéŠ·æœŸé–“
    When æˆ‘è¨­å®šé–‹å§‹æ™‚é–“ç‚º <é–‹å§‹æ™‚é–“>
    And æˆ‘è¨­å®šçµæŸæ™‚é–“ç‚º <çµæŸæ™‚é–“>
    Then çµæœæ‡‰ç‚º <çµæœ>
    
    Examples: æ™‚é–“é©—è­‰
      | é–‹å§‹æ™‚é–“         | çµæŸæ™‚é–“         | çµæœ                     |
      | æ˜¨å¤©             | æ˜å¤©             | å¤±æ•—:é–‹å§‹æ™‚é–“ä¸å¯ç‚ºéå»   |
      | æ˜å¤©             | ä»Šå¤©             | å¤±æ•—:çµæŸæ™‚é–“å¿…é ˆæ™šæ–¼é–‹å§‹ |
      | ä»Šå¤© 10:00       | ä»Šå¤© 10:00       | å¤±æ•—:çµæŸæ™‚é–“å¿…é ˆæ™šæ–¼é–‹å§‹ |
      | æ˜å¤©             | å¾Œå¤©             | æˆåŠŸ                     |

  @validation
  Scenario Outline: é©—è­‰æŠ˜æ‰£è¨­å®š
    Given å•†å“åƒ¹æ ¼ç‚º 1000 å…ƒ
    When æˆ‘è¨­å®šæŠ˜æ‰£æ–¹å¼ç‚º <æŠ˜æ‰£æ–¹å¼> <æŠ˜æ‰£å€¼>
    Then çµæœæ‡‰ç‚º <çµæœ>
    And æŠ˜æ‰£å¾Œåƒ¹æ ¼æ‡‰ç‚º <æŠ˜æ‰£å¾Œåƒ¹æ ¼> å…ƒ
    
    Examples: æŠ˜æ‰£é©—è­‰
      | æŠ˜æ‰£æ–¹å¼ | æŠ˜æ‰£å€¼ | çµæœ     | æŠ˜æ‰£å¾Œåƒ¹æ ¼ |
      | ç™¾åˆ†æ¯”   | 20%    | æˆåŠŸ     | 800        |
      | ç™¾åˆ†æ¯”   | 0%     | å¤±æ•—     | -          |
      | ç™¾åˆ†æ¯”   | 100%   | å¤±æ•—     | -          |
      | å›ºå®šé‡‘é¡ | 100    | æˆåŠŸ     | 900        |
      | å›ºå®šé‡‘é¡ | 1000   | è­¦å‘Š     | 0          |
      | å›ºå®šé‡‘é¡ | 1500   | è­¦å‘Š     | -          |

  @business_rule
  Scenario: åŒä¸€å•†å“ä¸å¯æœ‰é‡ç–Šä¿ƒéŠ·æ´»å‹•
    Given å•†å“A å·²æœ‰ä¿ƒéŠ·æ´»å‹• "æ˜¥ç¯€ç‰¹æƒ " æœŸé–“ç‚º 2025-01-01 è‡³ 2025-01-10
    When æˆ‘å»ºç«‹æ–°æ´»å‹• "æ–°å¹´å„ªæƒ " æœŸé–“ç‚º 2025-01-05 è‡³ 2025-01-15
    And æˆ‘é¸æ“‡å•†å“A
    Then æ‡‰è©²é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ "å•†å“A åœ¨æ­¤æœŸé–“å·²æœ‰ä¿ƒéŠ·æ´»å‹•"
    And æ‡‰è©²åˆ—å‡ºè¡çªçš„æ´»å‹• "æ˜¥ç¯€ç‰¹æƒ "

  @edge_case
  Scenario: ä¿ƒéŠ·æ´»å‹•ä¸å¯é¸æ“‡å·²ä¸‹æ¶å•†å“
    Given å•†å“B å·²ä¸‹æ¶
    When æˆ‘å»ºç«‹ä¿ƒéŠ·æ´»å‹•ä¸¦é¸æ“‡å•†å“B
    Then æ‡‰è©²é¡¯ç¤ºè­¦å‘Š "å•†å“B å·²ä¸‹æ¶"
    And æ‡‰è©²è©¢å•æ˜¯å¦ç¹¼çºŒ
```

---

### ğŸ“ ç¬¬å››ç« ç¬¬ä¸€éƒ¨åˆ†ç¸½çµ

#### æœ¬ç¯€é‡é»

âœ… **éœ€æ±‚è½‰æ›æµç¨‹**
- è­˜åˆ¥è¡Œç‚ºèˆ‡è¦å‰‡
- å»ºç«‹å…·é«”ç¯„ä¾‹
- æ’°å¯« Feature Files
- é©—è­‰èˆ‡ç²¾ç…‰

âœ… **Example Mapping Workshop**
- å‰ç½®æº–å‚™èˆ‡æœƒè­°é‚€è«‹
- 60 åˆ†é˜æ¨™æº–æµç¨‹
- å››ç¨®å¡ç‰‡çš„ä½¿ç”¨
- å°±ç·’ç¨‹åº¦è©•ä¼°

âœ… **å¯¦æˆ°æ¡ˆä¾‹**
- å¾ User Story åˆ° Example Map
- Example Map åˆ° Feature File
- æ¶µè“‹é©—è­‰ã€é‚Šç•Œã€æ¥­å‹™è¦å‰‡

---

### 4.3 User Story èˆ‡ BDD çš„çµåˆæ–¹å¼

#### 4.3.1 User Story çš„çµæ§‹

æ¨™æº– User Story æ ¼å¼:

```
èº«ç‚º [ä½¿ç”¨è€…è§’è‰²]
æˆ‘æƒ³è¦ [åŠŸèƒ½/ç›®æ¨™]
ä»¥ä¾¿ [ç²å¾—çš„åƒ¹å€¼/åŸå› ]

é©—æ”¶æº–å‰‡:
- æº–å‰‡ 1
- æº–å‰‡ 2
- æº–å‰‡ 3
```

#### 4.3.2 å¾ User Story åˆ° BDD çš„æ˜ å°„é—œä¿‚

```mermaid
graph LR
    A[User Story] --> B[Feature æè¿°]
    C[é©—æ”¶æº–å‰‡] --> D[Scenario å ´æ™¯]
    E[ç¯„ä¾‹] --> F[Given-When-Then]
    
    B --> G[Feature File]
    D --> G
    F --> G
    
    style A fill:#e1f5ff
    style C fill:#fff4e1
    style E fill:#c8e6c9
    style G fill:#ffe1e1
```

**æ˜ å°„ç¯„ä¾‹**:

**User Story**:
```
èº«ç‚º ç¶²ç«™è¨ªå®¢
æˆ‘æƒ³è¦ è¨»å†Šæˆç‚ºæœƒå“¡
ä»¥ä¾¿ äº«æœ‰æœƒå“¡å°ˆå±¬å„ªæƒ èˆ‡æœå‹™

é©—æ”¶æº–å‰‡:
- å¿…é ˆæä¾›æœ‰æ•ˆçš„é›»å­éƒµä»¶
- å¯†ç¢¼è‡³å°‘ 8 å€‹å­—å…ƒ
- è¨»å†ŠæˆåŠŸå¾Œç™¼é€é©—è­‰éƒµä»¶
- é‡è¤‡çš„é›»å­éƒµä»¶ç„¡æ³•è¨»å†Š
```

**å°æ‡‰çš„ Feature File**:

```gherkin
Feature: æœƒå“¡è¨»å†Š
  èº«ç‚º ç¶²ç«™è¨ªå®¢
  æˆ‘æƒ³è¦ è¨»å†Šæˆç‚ºæœƒå“¡
  ä»¥ä¾¿ äº«æœ‰æœƒå“¡å°ˆå±¬å„ªæƒ èˆ‡æœå‹™

  @happy_path
  Scenario: æˆåŠŸè¨»å†Šæ–°æœƒå“¡
    Given æˆ‘åœ¨è¨»å†Šé é¢
    When æˆ‘è¼¸å…¥æœ‰æ•ˆçš„è¨»å†Šè³‡è¨Š:
      | é›»å­éƒµä»¶ | newuser@example.com |
      | å¯†ç¢¼     | SecurePass123       |
      | å§“å     | å¼µä¸‰                |
    And æˆ‘åŒæ„æœå‹™æ¢æ¬¾
    And æˆ‘é»æ“Šè¨»å†ŠæŒ‰éˆ•
    Then è¨»å†Šæ‡‰è©²æˆåŠŸ
    And æˆ‘æ‡‰è©²æ”¶åˆ°é©—è­‰éƒµä»¶åˆ° newuser@example.com
    And æ‡‰è©²é¡¯ç¤ºè¨Šæ¯ã€Œè«‹æª¢æŸ¥æ‚¨çš„é›»å­éƒµä»¶ä»¥é©—è­‰å¸³è™Ÿã€

  @validation
  Scenario Outline: é©—è­‰é›»å­éƒµä»¶æ ¼å¼
    Given æˆ‘åœ¨è¨»å†Šé é¢
    When æˆ‘è¼¸å…¥é›»å­éƒµä»¶ "<email>"
    Then é©—è­‰çµæœæ‡‰ç‚º "<çµæœ>"
    
    Examples:
      | email                | çµæœ     |
      | valid@example.com    | æœ‰æ•ˆ     |
      | invalid.email        | æ ¼å¼éŒ¯èª¤ |
      | @example.com         | æ ¼å¼éŒ¯èª¤ |
      | user@                | æ ¼å¼éŒ¯èª¤ |

  @validation
  Scenario Outline: é©—è­‰å¯†ç¢¼å¼·åº¦
    Given æˆ‘åœ¨è¨»å†Šé é¢
    When æˆ‘è¼¸å…¥å¯†ç¢¼ "<password>"
    Then é©—è­‰çµæœæ‡‰ç‚º "<çµæœ>"
    
    Examples:
      | password    | çµæœ                   |
      | Pass123     | å¤±æ•—:è‡³å°‘8å€‹å­—å…ƒ       |
      | Password    | å¤±æ•—:å¿…é ˆåŒ…å«æ•¸å­—      |
      | 12345678    | å¤±æ•—:å¿…é ˆåŒ…å«å­—æ¯      |
      | Pass1234    | æˆåŠŸ                   |

  @business_rule
  Scenario: é‡è¤‡é›»å­éƒµä»¶ç„¡æ³•è¨»å†Š
    Given ç³»çµ±å·²æœ‰æœƒå“¡ "existing@example.com"
    When æˆ‘å˜—è©¦è¨»å†Šå¸³è™Ÿ "existing@example.com"
    Then æ‡‰è©²é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ "æ­¤é›»å­éƒµä»¶å·²è¢«è¨»å†Š"
    And è¨»å†Šä¸æ‡‰è©²æˆåŠŸ
```

#### 4.3.3 INVEST åŸå‰‡åœ¨ BDD ä¸­çš„æ‡‰ç”¨

å¥½çš„ User Story éµå¾ª **INVEST** åŸå‰‡:

**I - Independent(ç¨ç«‹çš„)**

```gherkin
# âœ… å¥½:æ¯å€‹ Feature ç¨ç«‹
Feature: æœƒå“¡è¨»å†Š
Feature: æœƒå“¡ç™»å…¥
Feature: å¯†ç¢¼é‡è¨­

# âŒ ä¸å¥½:Feature ä¹‹é–“æœ‰ä¾è³´
Feature: æœƒå“¡ç®¡ç†
  Scenario: å…ˆè¨»å†Š
  Scenario: å†ç™»å…¥
  Scenario: ç„¶å¾Œä¿®æ”¹è³‡æ–™
```

**N - Negotiable(å¯å”å•†çš„)**

é€é Example Mapping æŒçºŒå”å•†èˆ‡èª¿æ•´ç¯„ä¾‹ã€‚

```
åœ¨ Discovery Workshop ä¸­:
- æ¥­å‹™:ã€Œè¨»å†Šå¾Œæ‡‰è©²ç«‹å³ç™»å…¥ã€
- Dev:ã€Œéœ€è¦å…ˆé©—è­‰é›»å­éƒµä»¶å—?ã€
- SA:ã€Œè®“æˆ‘å€‘åŠ å…¥é€™å…©å€‹å ´æ™¯ã€

ç”¢å‡º:
  Scenario: è¨»å†Šå¾Œè‡ªå‹•ç™»å…¥(æœªé©—è­‰ç‹€æ…‹)
  Scenario: é©—è­‰é›»å­éƒµä»¶å¾Œå•Ÿç”¨å®Œæ•´åŠŸèƒ½
```

**V - Valuable(æœ‰åƒ¹å€¼çš„)**

Feature æè¿°æ‡‰å¼·èª¿æ¥­å‹™åƒ¹å€¼ã€‚

```gherkin
# âœ… å¥½:çªé¡¯åƒ¹å€¼
Feature: å¿«é€Ÿçµå¸³
  ä½œç‚º å›è³¼å®¢æˆ¶
  æˆ‘æƒ³è¦ ä½¿ç”¨å…ˆå‰å„²å­˜çš„ä»˜æ¬¾è³‡è¨Š
  ä»¥ä¾¿ å¿«é€Ÿå®Œæˆçµå¸³,ä¸å¿…æ¯æ¬¡è¼¸å…¥

# âŒ ä¸å¥½:åªæè¿°åŠŸèƒ½
Feature: å„²å­˜ä¿¡ç”¨å¡è³‡è¨Š
  ç³»çµ±æ‡‰è©²å„²å­˜ä¿¡ç”¨å¡
```

**E - Estimable(å¯ä¼°ç®—çš„)**

é€éå…·é«”ç¯„ä¾‹,è®“ Dev èƒ½ä¼°ç®—å·¥ä½œé‡ã€‚

```gherkin
Feature: è¨‚å–®å–æ¶ˆ
  
  # æ¸…æ¥šçš„ç¯„ä¾‹è®“ä¼°ç®—æ›´æº–ç¢º
  Scenario: è¨‚å–®æˆç«‹30åˆ†é˜å…§å¯å–æ¶ˆ
  Scenario: å·²å‡ºè²¨çš„è¨‚å–®ç„¡æ³•å–æ¶ˆ
  Scenario: å–æ¶ˆè¨‚å–®å¾Œè‡ªå‹•é€€æ¬¾
  Scenario: VIPæœƒå“¡24å°æ™‚å…§å¯å–æ¶ˆ
  
  # å¾ç¯„ä¾‹æ•¸é‡èˆ‡è¤‡é›œåº¦å¯è©•ä¼°å·¥ä½œé‡
```

**S - Small(å°çš„)**

å¤§çš„ Story æ‡‰æ‹†åˆ†ç‚ºå¤šå€‹å° Featureã€‚

```gherkin
# âŒ å¤ªå¤§
Feature: å®Œæ•´çš„è¨‚å–®ç®¡ç†ç³»çµ±

# âœ… æ‹†åˆ†ç‚ºå° Feature
Feature: å»ºç«‹è¨‚å–®
Feature: ä¿®æ”¹è¨‚å–®
Feature: å–æ¶ˆè¨‚å–®
Feature: æŸ¥è©¢è¨‚å–®
Feature: è¨‚å–®ç‹€æ…‹è¿½è¹¤
```

**T - Testable(å¯æ¸¬è©¦çš„)**

Gherkin æœ¬èº«å°±æ˜¯å¯åŸ·è¡Œçš„æ¸¬è©¦è¦æ ¼ã€‚

```gherkin
# âœ… å¯æ¸¬è©¦:æ˜ç¢ºçš„è¼¸å…¥èˆ‡é æœŸè¼¸å‡º
Scenario: è¨ˆç®—è¨‚å–®æŠ˜æ‰£
  Given è³¼ç‰©è»Šç¸½åƒ¹ 1000 å…ƒ
  And ä½¿ç”¨å„ªæƒ ç¢¼ "SAVE100"
  When æˆ‘çµå¸³
  Then æŠ˜æ‰£é‡‘é¡æ‡‰ç‚º 100 å…ƒ
  And å¯¦ä»˜é‡‘é¡æ‡‰ç‚º 900 å…ƒ

# âŒ é›£æ¸¬è©¦:æ¨¡ç³Šä¸æ¸…
Scenario: å„ªæƒ è¨ˆç®—
  When ç”¨æˆ¶çµå¸³
  Then æ‡‰è©²æœ‰æŠ˜æ‰£
```

---

### 4.4 Acceptance Criteria(é©—æ”¶æº–å‰‡)çš„æ’°å¯«æŒ‡å¼•

#### 4.4.1 å‚³çµ± AC vs BDD Style AC

**å‚³çµ±é©—æ”¶æº–å‰‡**:

```
è¨‚å–®å–æ¶ˆåŠŸèƒ½é©—æ”¶æº–å‰‡:
1. ä½¿ç”¨è€…å¯ä»¥å–æ¶ˆè¨‚å–®
2. å–æ¶ˆå¾Œæ‡‰é€€æ¬¾
3. å·²å‡ºè²¨çš„è¨‚å–®ä¸èƒ½å–æ¶ˆ
4. ç³»çµ±æ‡‰è¨˜éŒ„å–æ¶ˆåŸå› 
```

**å•é¡Œ**:
- æ¨¡ç³Šä¸æ¸…(ã€Œæ‡‰è©²ã€ã€ã€Œå¯ä»¥ã€)
- æ²’æœ‰å…·é«”æƒ…å¢ƒ
- é›£ä»¥ç›´æ¥æ¸¬è©¦

**BDD Style é©—æ”¶æº–å‰‡**:

```gherkin
Feature: è¨‚å–®å–æ¶ˆ

  Scenario: è¨‚å–®æˆç«‹å¾Œ30åˆ†é˜å…§å¯å–æ¶ˆä¸¦å…¨é¡é€€æ¬¾
    Given æˆ‘çš„è¨‚å–®ç·¨è™Ÿç‚º "ORD001"
    And è¨‚å–®é‡‘é¡ç‚º 1500 å…ƒ
    And è¨‚å–®æˆç«‹æ™‚é–“ç‚º 15 åˆ†é˜å‰
    When æˆ‘å–æ¶ˆè¨‚å–®ä¸¦é¸æ“‡åŸå› ã€Œä¸æƒ³è²·äº†ã€
    Then è¨‚å–®ç‹€æ…‹æ‡‰è®Šæ›´ç‚ºã€Œå·²å–æ¶ˆã€
    And æ‡‰è©²å…¨é¡é€€æ¬¾ 1500 å…ƒåˆ°åŸä»˜æ¬¾æ–¹å¼
    And ç³»çµ±æ‡‰è¨˜éŒ„å–æ¶ˆåŸå› ã€Œä¸æƒ³è²·äº†ã€

  Scenario: è¶…é30åˆ†é˜å¾Œå–æ¶ˆéœ€æ‰£é™¤æ‰‹çºŒè²»
    Given æˆ‘çš„è¨‚å–®æˆç«‹æ–¼ 2 å°æ™‚å‰
    And è¨‚å–®é‡‘é¡ç‚º 1500 å…ƒ
    When æˆ‘ç”³è«‹å–æ¶ˆè¨‚å–®
    Then æ‡‰è©²é¡¯ç¤ºã€Œå°‡æ‰£é™¤10%æ‰‹çºŒè²»ã€
    When æˆ‘ç¢ºèªå–æ¶ˆ
    Then æ‡‰é€€æ¬¾ 1350 å…ƒ(æ‰£é™¤ 150 å…ƒæ‰‹çºŒè²»)

  Scenario: å·²å‡ºè²¨çš„è¨‚å–®ç„¡æ³•å–æ¶ˆ
    Given æˆ‘çš„è¨‚å–®ç‹€æ…‹ç‚ºã€Œå·²å‡ºè²¨ã€
    When æˆ‘å˜—è©¦å–æ¶ˆè¨‚å–®
    Then æ‡‰è©²é¡¯ç¤ºã€Œè¨‚å–®å·²å‡ºè²¨,ç„¡æ³•å–æ¶ˆã€
    And æ‡‰è©²æç¤ºã€Œæ‚¨å¯ä»¥ç”³è«‹é€€è²¨ã€
```

**å„ªé»**:
- âœ… å…·é«”æ˜ç¢ºçš„æƒ…å¢ƒ
- âœ… å¯ç›´æ¥è½‰ç‚ºæ¸¬è©¦
- âœ… åŒ…å«é‚Šç•Œæ¢ä»¶èˆ‡ä¾‹å¤–
- âœ… æ˜“æ–¼ç†è§£èˆ‡æºé€š

#### 4.4.2 æ’°å¯« AC çš„é»ƒé‡‘æ³•å‰‡

**Rule 1:ä½¿ç”¨ Given-When-Then çµæ§‹**

```gherkin
# âœ… çµæ§‹æ¸…æ™°
Given [å‰ç½®æ¢ä»¶]
When [ä½¿ç”¨è€…å‹•ä½œ]
Then [é æœŸçµæœ]

# âŒ çµæ§‹æ··äº‚
ã€Œä½¿ç”¨è€…æ‡‰è©²å¯ä»¥...ã€
ã€Œç³»çµ±æ‡‰è©²...ã€
```

**Rule 2:ä¸€å€‹ Scenario é©—è­‰ä¸€å€‹è¡Œç‚º**

```gherkin
# âœ… å–®ä¸€è¡Œç‚º
Scenario: VIPæœƒå“¡äº«å…é‹è²»
  Given æˆ‘æ˜¯VIPæœƒå“¡
  When æˆ‘çµå¸³
  Then é‹è²»æ‡‰ç‚º 0 å…ƒ

# âŒ å¤šå€‹è¡Œç‚ºæ··é›œ
Scenario: æœƒå“¡æ¬Šç›Š
  Given æˆ‘æ˜¯VIPæœƒå“¡
  Then äº«å…é‹è²»
  And äº«9æŠ˜
  And ç²å¾—é›™å€é»æ•¸
  And å„ªå…ˆå®¢æœ
  # æ‡‰æ‹†åˆ†ç‚º4å€‹ Scenario
```

**Rule 3:åŒ…å«æ­£å¸¸èˆ‡ç•°å¸¸æƒ…æ³**

```gherkin
Feature: è½‰å¸³åŠŸèƒ½
  
  # æ­£å¸¸æƒ…æ³
  @happy_path
  Scenario: é¤˜é¡è¶³å¤ æ™‚æˆåŠŸè½‰å¸³
  
  # ç•°å¸¸æƒ…æ³
  @error_handling
  Scenario: é¤˜é¡ä¸è¶³æ™‚è½‰å¸³å¤±æ•—
  Scenario: å¸³è™Ÿä¸å­˜åœ¨æ™‚è½‰å¸³å¤±æ•—
  Scenario: è¶…éæ¯æ—¥é™é¡æ™‚è½‰å¸³å¤±æ•—
  Scenario: ç³»çµ±ç¶­è­·æ™‚ç„¡æ³•è½‰å¸³
```

**Rule 4:æ˜ç¢ºçš„æ•¸æ“šèˆ‡æœŸæœ›**

```gherkin
# âœ… æ˜ç¢ºå…·é«”
Given æˆ‘çš„å¸³æˆ¶é¤˜é¡ç‚º 10000 å…ƒ
When æˆ‘è½‰å¸³ 5000 å…ƒ
Then æˆ‘çš„é¤˜é¡æ‡‰è©²æ˜¯ 5000 å…ƒ

# âŒ æ¨¡ç³Šä¸æ¸…
Given æˆ‘çš„å¸³æˆ¶æœ‰éŒ¢
When æˆ‘è½‰å¸³ä¸€äº›éŒ¢
Then é¤˜é¡æ‡‰è©²æ¸›å°‘
```

**Rule 5:ä½¿ç”¨æ¥­å‹™èªè¨€**

```gherkin
# âœ… æ¥­å‹™èªè¨€
Given æˆ‘æ˜¯éŠ€å¡æœƒå“¡
When è³¼ç‰©æ»¿ 1000 å…ƒ
Then äº«æœ‰ 9 æŠ˜å„ªæƒ 

# âŒ æŠ€è¡“èªè¨€
Given user.membership_level = 'SILVER'
When cart.total >= 1000
Then apply_discount(0.9)
```

---

### 4.5 å¾ BDD åˆ° Use Case çš„å°æ‡‰é—œä¿‚

#### 4.5.1 BDD èˆ‡ Use Case çš„æ¯”è¼ƒ

```mermaid
graph TB
    subgraph UseCase[Use Case æ–¹æ³•]
        UC1[Use Case æ–‡ä»¶]
        UC2[ä¸»è¦æµç¨‹]
        UC3[æ›¿ä»£æµç¨‹]
        UC4[ä¾‹å¤–æµç¨‹]
        UC5[å‰ç½®/å¾Œç½®æ¢ä»¶]
    end
    
    subgraph BDD[BDD æ–¹æ³•]
        B1[Feature File]
        B2[Happy Path Scenario]
        B3[Alternative Scenarios]
        B4[Error Scenarios]
        B5[Given / Then]
    end
    
    UC1 <--> B1
    UC2 <--> B2
    UC3 <--> B3
    UC4 <--> B4
    UC5 <--> B5
    
    style UseCase fill:#e1f5ff
    style BDD fill:#e7f5e1
```

**å°æ¯”è¡¨**:

| é …ç›® | Use Case | BDD Feature |
|------|----------|-------------|
| **æ ¼å¼** | è‡ªç”±æ ¼å¼æ–‡å­— | çµæ§‹åŒ– Gherkin |
| **å¯åŸ·è¡Œæ€§** | ä¸å¯åŸ·è¡Œ | å¯è‡ªå‹•åŒ–åŸ·è¡Œ |
| **è®€è€…** | æ¥­å‹™+æŠ€è¡“äººå“¡ | æ¥­å‹™+æŠ€è¡“äººå“¡ |
| **ç²’åº¦** | é€šå¸¸è¼ƒç²— | å¯ç²—å¯ç´° |
| **ç¯„ä¾‹** | å¯é¸ | æ ¸å¿ƒ(ç¯„ä¾‹é©…å‹•) |
| **ç¶­è­·** | æ˜“éæ™‚ | èˆ‡ç¨‹å¼ç¢¼åŒæ­¥ |

#### 4.5.2 Use Case è½‰æ›ç‚º Feature File

**Use Case ç¯„ä¾‹**:

```
Use Case: UC-001 æœƒå“¡ç™»å…¥

åƒèˆ‡è€…:è¨»å†Šæœƒå“¡

å‰ç½®æ¢ä»¶:
- æœƒå“¡å·²å®Œæˆè¨»å†Š
- æœƒå“¡æœªç™»å…¥

ä¸»è¦æµç¨‹:
1. æœƒå“¡é–‹å•Ÿç™»å…¥é é¢
2. ç³»çµ±é¡¯ç¤ºç™»å…¥è¡¨å–®
3. æœƒå“¡è¼¸å…¥å¸³è™Ÿå¯†ç¢¼
4. æœƒå“¡é»æ“Šç™»å…¥æŒ‰éˆ•
5. ç³»çµ±é©—è­‰å¸³è™Ÿå¯†ç¢¼
6. ç³»çµ±é¡¯ç¤ºæœƒå“¡é¦–é 

æ›¿ä»£æµç¨‹ 3a:å¯†ç¢¼éŒ¯èª¤
3a1. ç³»çµ±é¡¯ç¤ºã€Œå¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤ã€
3a2. å›åˆ°æ­¥é©Ÿ 3

æ›¿ä»£æµç¨‹ 3b:å¸³è™Ÿä¸å­˜åœ¨
3b1. ç³»çµ±é¡¯ç¤ºã€Œå¸³è™Ÿä¸å­˜åœ¨ã€
3b2. å›åˆ°æ­¥é©Ÿ 3

æ›¿ä»£æµç¨‹ 3c:å¸³è™Ÿè¢«é–å®š
3c1. ç³»çµ±é¡¯ç¤ºã€Œå¸³è™Ÿå·²è¢«é–å®š,è«‹è¯ç¹«å®¢æœã€
3c2. Use Case çµæŸ

å¾Œç½®æ¢ä»¶:
- æœƒå“¡æˆåŠŸç™»å…¥
- ç³»çµ±è¨˜éŒ„ç™»å…¥æ™‚é–“
```

**è½‰æ›ç‚º Feature File**:

```gherkin
Feature: æœƒå“¡ç™»å…¥
  ä½œç‚º è¨»å†Šæœƒå“¡
  æˆ‘æƒ³è¦ ç™»å…¥ç¶²ç«™
  ä»¥ä¾¿ ä½¿ç”¨æœƒå“¡å°ˆå±¬åŠŸèƒ½

  Background:
    Given æˆ‘å·²å®Œæˆè¨»å†Š
    And æˆ‘ç›®å‰æœªç™»å…¥ç‹€æ…‹
    And æˆ‘åœ¨ç™»å…¥é é¢

  @happy_path @UC-001
  Scenario: æˆåŠŸç™»å…¥ç³»çµ±
    When æˆ‘è¼¸å…¥æ­£ç¢ºçš„å¸³è™Ÿ "user@example.com"
    And æˆ‘è¼¸å…¥æ­£ç¢ºçš„å¯†ç¢¼ "SecurePass123"
    And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
    Then æˆ‘æ‡‰è©²æˆåŠŸç™»å…¥
    And æ‡‰è©²å°å‘æœƒå“¡é¦–é 
    And æ‡‰è©²é¡¯ç¤ºæ­¡è¿è¨Šæ¯ "æ­¡è¿å›ä¾†,å¼µä¸‰"
    And ç³»çµ±æ‡‰è©²è¨˜éŒ„ç™»å…¥æ™‚é–“

  @error_handling @UC-001-3a
  Scenario: å¯†ç¢¼éŒ¯èª¤ç„¡æ³•ç™»å…¥
    Given æˆ‘çš„æ­£ç¢ºå¯†ç¢¼æ˜¯ "CorrectPass"
    When æˆ‘è¼¸å…¥å¸³è™Ÿ "user@example.com"
    And æˆ‘è¼¸å…¥éŒ¯èª¤å¯†ç¢¼ "WrongPass"
    And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
    Then æ‡‰è©²é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ "å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤"
    And æˆ‘æ‡‰è©²ä»åœ¨ç™»å…¥é é¢
    And å¯†ç¢¼æ¬„ä½æ‡‰è©²è¢«æ¸…ç©º

  @error_handling @UC-001-3b
  Scenario: ä¸å­˜åœ¨çš„å¸³è™Ÿç„¡æ³•ç™»å…¥
    When æˆ‘è¼¸å…¥å¸³è™Ÿ "nonexist@example.com"
    And æˆ‘è¼¸å…¥å¯†ç¢¼ "AnyPassword"
    And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
    Then æ‡‰è©²é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ "å¸³è™Ÿä¸å­˜åœ¨"
    And æ‡‰è©²æä¾›ã€Œç«‹å³è¨»å†Šã€é€£çµ

  @error_handling @UC-001-3c
  Scenario: å¸³è™Ÿé–å®šæ™‚ç„¡æ³•ç™»å…¥
    Given æˆ‘çš„å¸³è™Ÿ "locked@example.com" å·²è¢«é–å®š
    When æˆ‘å˜—è©¦ç™»å…¥
    Then æ‡‰è©²é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ "å¸³è™Ÿå·²è¢«é–å®š,è«‹è¯ç¹«å®¢æœ"
    And æ‡‰è©²æä¾›å®¢æœè¯çµ¡æ–¹å¼
    And ä¸æ‡‰è©²å…è¨±ç¹¼çºŒå˜—è©¦ç™»å…¥

  @security
  Scenario: é€£çºŒ3æ¬¡å¯†ç¢¼éŒ¯èª¤å¾Œé–å®šå¸³è™Ÿ
    Given æˆ‘çš„å¸³è™Ÿæ˜¯ "user@example.com"
    And æˆ‘å·²ç¶“è¼¸å…¥éŒ¯èª¤å¯†ç¢¼ 2 æ¬¡
    When æˆ‘ç¬¬3æ¬¡è¼¸å…¥éŒ¯èª¤å¯†ç¢¼
    Then æ‡‰è©²é¡¯ç¤ºã€Œå¸³è™Ÿå·²è¢«é–å®š,è«‹ 30 åˆ†é˜å¾Œå†è©¦ã€
    And å¸³è™Ÿç‹€æ…‹æ‡‰è®Šæ›´ç‚ºã€Œæš«æ™‚é–å®šã€
    And æ‡‰è©²ç™¼é€é€šçŸ¥éƒµä»¶åˆ° user@example.com
```

#### 4.5.3 æ•´åˆ Use Case èˆ‡ BDD çš„å¯¦å‹™ç­–ç•¥

**ç­–ç•¥ 1:Use Case ä½œç‚º Feature çš„è£œå……æ–‡ä»¶**

```
å°ˆæ¡ˆçµæ§‹:
â”œâ”€ docs/
â”‚  â””â”€ use-cases/
â”‚     â”œâ”€ UC-001-æœƒå“¡ç™»å…¥.md
â”‚     â”œâ”€ UC-002-å•†å“æœå°‹.md
â”‚     â””â”€ UC-003-è¨‚å–®çµå¸³.md
â”‚
â”œâ”€ features/
â”‚  â”œâ”€ login.feature          # å°æ‡‰ UC-001
â”‚  â”œâ”€ product_search.feature # å°æ‡‰ UC-002
â”‚  â””â”€ checkout.feature       # å°æ‡‰ UC-003
â”‚
â””â”€ README.md
   èªªæ˜:Use Case æä¾›æ¥­å‹™èƒŒæ™¯,
        Feature File æ˜¯å¯åŸ·è¡Œè¦æ ¼
```

**ç­–ç•¥ 2:ä½¿ç”¨æ¨™ç±¤é—œè¯ Use Case**

```gherkin
@UC-001 @login
Feature: æœƒå“¡ç™»å…¥

  @UC-001-main @happy_path
  Scenario: ä¸»è¦æµç¨‹ - æˆåŠŸç™»å…¥

  @UC-001-3a @error_handling
  Scenario: æ›¿ä»£æµç¨‹ 3a - å¯†ç¢¼éŒ¯èª¤

  @UC-001-3b @error_handling
  Scenario: æ›¿ä»£æµç¨‹ 3b - å¸³è™Ÿä¸å­˜åœ¨
```

**ç­–ç•¥ 3:Use Case åœ–èˆ‡ Feature Map**

```mermaid
graph TB
    Actor[æœƒå“¡]
    
    Actor --> UC1[UC-001<br/>æœƒå“¡ç™»å…¥]
    Actor --> UC2[UC-002<br/>å•†å“æœå°‹]
    Actor --> UC3[UC-003<br/>åŠ å…¥è³¼ç‰©è»Š]
    Actor --> UC4[UC-004<br/>è¨‚å–®çµå¸³]
    
    UC1 --> F1[login.feature]
    UC2 --> F2[search.feature]
    UC3 --> F3[cart.feature]
    UC4 --> F4[checkout.feature]
    
    F1 --> S1[6 å€‹ Scenarios]
    F2 --> S2[8 å€‹ Scenarios]
    F3 --> S3[5 å€‹ Scenarios]
    F4 --> S4[12 å€‹ Scenarios]
    
    style Actor fill:#e1f5ff
    style UC1 fill:#fff4e1
    style UC2 fill:#fff4e1
    style UC3 fill:#fff4e1
    style UC4 fill:#fff4e1
    style F1 fill:#e7f5e1
    style F2 fill:#e7f5e1
    style F3 fill:#e7f5e1
    style F4 fill:#e7f5e1
```

---

### ğŸ“ ç¬¬å››ç« ç¸½çµèˆ‡å¯¦å‹™è¦é»

#### é—œéµè¦é»å›é¡§

âœ… **éœ€æ±‚è½‰åŒ–æµç¨‹**
- è­˜åˆ¥è¡Œç‚ºèˆ‡æ¥­å‹™è¦å‰‡
- å»ºç«‹å…·é«”ç¯„ä¾‹
- æ’°å¯«å¯åŸ·è¡Œè¦æ ¼
- æŒçºŒé©—è­‰èˆ‡ç²¾ç…‰

âœ… **Example Mapping å¯¦è¸**
- åˆ©å®³é—œä¿‚äººå”ä½œ
- 60åˆ†é˜æ¨™æº–æµç¨‹
- å››è‰²å¡ç‰‡çµ„ç¹”æ³•
- å°±ç·’ç¨‹åº¦è©•ä¼°

âœ… **User Story æ•´åˆ**
- User Story å°æ‡‰ Feature
- é©—æ”¶æº–å‰‡å°æ‡‰ Scenario
- INVEST åŸå‰‡æ‡‰ç”¨
- æ‹†åˆ†èˆ‡çµ„ç¹”ç­–ç•¥

âœ… **é©—æ”¶æº–å‰‡æ’°å¯«**
- Given-When-Then çµæ§‹
- æ˜ç¢ºå…·é«”çš„æ•¸æ“š
- æ­£å¸¸èˆ‡ç•°å¸¸æƒ…æ³
- æ¥­å‹™èªè¨€è¡¨é”

âœ… **Use Case å°æ‡‰**
- Use Case èˆ‡ Feature çš„é—œä¿‚
- ä¸»è¦/æ›¿ä»£/ä¾‹å¤–æµç¨‹æ˜ å°„
- æ¨™ç±¤é—œè¯è¿½è¹¤
- äº’è£œä½¿ç”¨ç­–ç•¥

---

#### ğŸ¯ æª¢æŸ¥æ¸…å–®:SA åœ¨ BDD ä¸­çš„è·è²¬

**éœ€æ±‚éšæ®µ**:
- [ ] çµ„ç¹”ä¸¦å¼•å° Discovery Workshop
- [ ] ä½¿ç”¨ Example Mapping æ¢ç´¢éœ€æ±‚
- [ ] è­˜åˆ¥æ¥­å‹™è¦å‰‡èˆ‡ç¯„ä¾‹
- [ ] è¨˜éŒ„å•é¡Œèˆ‡å‡è¨­

**åˆ†æéšæ®µ**:
- [ ] å°‡ Example Map è½‰ç‚º Feature Files
- [ ] æ’°å¯«æ¸…æ™°çš„ Given-When-Then
- [ ] ç¢ºä¿æ¶µè“‹æ­£å¸¸ã€ç•°å¸¸ã€é‚Šç•Œæƒ…æ³
- [ ] ä½¿ç”¨æ¥­å‹™èªè¨€,é¿å…æŠ€è¡“ç´°ç¯€

**å”ä½œéšæ®µ**:
- [ ] èˆ‡ BA/PO ç¢ºèªæ¥­å‹™é‚è¼¯
- [ ] èˆ‡ Dev ç¢ºèªæŠ€è¡“å¯è¡Œæ€§
- [ ] èˆ‡ QA ç¢ºèªæ¸¬è©¦è¦†è“‹åº¦
- [ ] èˆ‡ Stakeholder æºé€šé€²åº¦

**ç¶­è­·éšæ®µ**:
- [ ] éš¨éœ€æ±‚è®Šæ›´æ›´æ–° Feature Files
- [ ] é‡æ§‹éæ–¼è¤‡é›œçš„ Scenario
- [ ] ç§»é™¤éæ™‚çš„æ¸¬è©¦å ´æ™¯
- [ ] ä¿æŒ Feature èˆ‡ç¨‹å¼ç¢¼åŒæ­¥

---

#### ğŸ’¡ SA å¯¦å‹™å»ºè­°

**å»ºè­° 1:å¾å°è™•é–‹å§‹**
```
ä¸è¦ä¸€é–‹å§‹å°±å…¨é¢å°å…¥BDD
âœ… é¸æ“‡ 1-2 å€‹ç°¡å–®åŠŸèƒ½è©¦é»
âœ… ç´¯ç©ç¶“é©—å¾Œé€æ­¥æ“´å¤§
âœ… å»ºç«‹åœ˜éšŠä¿¡å¿ƒèˆ‡å…±è­˜
```

**å»ºè­° 2:é‡è¦–å”ä½œè€Œéå·¥å…·**
```
BDD çš„æ ¸å¿ƒæ˜¯å”ä½œ,ä¸æ˜¯å·¥å…·
âœ… å…ˆå»ºç«‹å”ä½œæ–‡åŒ–
âœ… å·¥å…·æ˜¯è¼”åŠ©,ä¸æ˜¯ç›®çš„
âœ… ç´™ç­†ä¹Ÿèƒ½åš Example Mapping
```

**å»ºè­° 3:å¹³è¡¡ç´°ç¯€èˆ‡é€Ÿåº¦**
```
ä¸è¦è¿½æ±‚å®Œç¾çš„è¦æ ¼
âœ… 80% æ­£ç¢ºå„ªæ–¼ 100% å®Œæ•´
âœ… å¯ä»¥æŒçºŒè¿­ä»£æ”¹é€²
âœ… å„ªå…ˆæ¶µè“‹æ ¸å¿ƒå ´æ™¯
```

**å»ºè­° 4:å»ºç«‹ç¯„æœ¬èˆ‡æŒ‡å¼•**
```
æ¨™æº–åŒ–å¯æå‡æ•ˆç‡
âœ… å»ºç«‹ Feature ç¯„æœ¬
âœ… æ•´ç†å¸¸ç”¨ç¯„ä¾‹æ¨¡å¼
âœ… åˆ†äº«æœ€ä½³å¯¦å‹™
```

---

**ä¸‹ä¸€ç« é å‘Š**:
æˆ‘å€‘å°‡æ·±å…¥æ¢è¨ **BDD é–‹ç™¼æµç¨‹èˆ‡è§’è‰²åˆ†å·¥**,åŒ…æ‹¬å®Œæ•´çš„ BDD å·¥ä½œæµã€ä¸‰æ–¹æœƒè«‡(Three Amigos)å¯¦è¸ã€å„è§’è‰²çš„è²¬ä»»èˆ‡ç”¢å‡º,ä»¥åŠç¶­è­·èˆ‡ç‰ˆæœ¬æ§ç®¡å¯¦å‹™ã€‚

---

## ç¬¬äº”ç« ã€€BDD é–‹ç™¼æµç¨‹èˆ‡è§’è‰²åˆ†å·¥

æœ¬ç« å°‡èªªæ˜ BDD åœ¨å¯¦éš›é–‹ç™¼æµç¨‹ä¸­çš„é‹ä½œæ–¹å¼,å„è§’è‰²çš„è·è²¬åˆ†å·¥,ä»¥åŠå¦‚ä½•åœ¨åœ˜éšŠä¸­å»ºç«‹æœ‰æ•ˆçš„ BDD å”ä½œæ©Ÿåˆ¶ã€‚

### 5.1 BDD å·¥ä½œæµ(Workflow)å…¨è²Œ

#### 5.1.1 å®Œæ•´çš„ BDD ç”Ÿå‘½é€±æœŸ

```mermaid
graph TB
    subgraph Discovery[Discovery éšæ®µ]
        D1[éœ€æ±‚æ”¶é›†] --> D2[Example Mapping]
        D2 --> D3[è­˜åˆ¥è¦å‰‡èˆ‡ç¯„ä¾‹]
        D3 --> D4[ç”¢å‡º Example Map]
    end
    
    subgraph Formulation[Formulation éšæ®µ]
        F1[æ’°å¯« Feature File] --> F2[Three Amigos Review]
        F2 --> F3[ç²¾ç…‰è¦æ ¼]
        F3 --> F4[Feature å°±ç·’]
    end
    
    subgraph Automation[Automation éšæ®µ]
        A1[å¯¦ä½œ Step Definitions] --> A2[TDD é–‹ç™¼]
        A2 --> A3[åŸ·è¡Œ BDD æ¸¬è©¦]
        A3 --> A4[åŠŸèƒ½å®Œæˆ]
    end
    
    subgraph Validation[é©—è­‰éšæ®µ]
        V1[é©—æ”¶æ¸¬è©¦] --> V2[å›æ­¸æ¸¬è©¦]
        V2 --> V3[ç”¢å‡ºå ±å‘Š]
        V3 --> V4[éƒ¨ç½²ä¸Šç·š]
    end
    
    Discovery --> Formulation
    Formulation --> Automation
    Automation --> Validation
    Validation -.å›é¥‹.-> Discovery
    
    style Discovery fill:#e1f5ff
    style Formulation fill:#fff4e1
    style Automation fill:#e7f5e1
    style Validation fill:#ffe1e1
```

#### 5.1.2 æ•æ· Sprint ä¸­çš„ BDD æ´»å‹•

**Sprint Planning(Sprint è¦åŠƒ)**

```mermaid
gantt
    title 2é€± Sprint ä¸­çš„ BDD æ´»å‹•
    dateFormat  YYYY-MM-DD
    section Sprint Planning
    é¸æ“‡ User Stories           :2025-01-01, 1d
    Discovery Workshop          :2025-01-01, 1d
    æ’°å¯« Feature Files          :2025-01-02, 1d
    
    section Development
    å¯¦ä½œ Step Definitions       :2025-01-03, 2d
    TDD é–‹ç™¼åŠŸèƒ½                :2025-01-03, 5d
    åŸ·è¡Œ BDD æ¸¬è©¦               :2025-01-05, 5d
    
    section Testing
    é©—æ”¶æ¸¬è©¦                    :2025-01-08, 2d
    ç¼ºé™·ä¿®å¾©                    :2025-01-10, 2d
    
    section Review
    Sprint Review               :2025-01-12, 1d
    Sprint Retrospective        :2025-01-12, 1d
```

**è©³ç´°æ™‚ç¨‹è¡¨**:

| æ™‚é–“ | æ´»å‹• | åƒèˆ‡è€… | ç”¢å‡º |
|------|------|--------|------|
| **Day 1** | Sprint Planning + Discovery | å…¨å“¡ | Sprint Backlog |
|  | Example Mapping Workshop | BA, SA, Dev, QA | Example Maps |
| **Day 2** | æ’°å¯« Feature Files | SA, QA | Feature Files |
|  | Three Amigos Review | BA, Dev, QA | ç¢ºèªçš„è¦æ ¼ |
| **Day 3-7** | é–‹ç™¼ Sprint | Dev | åŠŸèƒ½ç¨‹å¼ç¢¼ |
|  | å¯¦ä½œ Step Definitions | Dev, QA | è‡ªå‹•åŒ–æ¸¬è©¦ |
|  | TDD é–‹ç™¼ | Dev | Unit Tests |
|  | åŸ·è¡Œ BDD æ¸¬è©¦ | Dev, QA | æ¸¬è©¦çµæœ |
| **Day 8-10** | é©—æ”¶æ¸¬è©¦ | QA, BA | æ¸¬è©¦å ±å‘Š |
|  | ç¼ºé™·ä¿®å¾© | Dev | Bug Fixes |
| **Day 11-12** | Sprint Review | å…¨å“¡ + Stakeholder | Demo |
|  | Sprint Retrospective | å…¨å“¡ | æ”¹å–„è¡Œå‹• |

---

### 5.2 ä¸‰æ–¹æœƒè«‡(Three Amigos:BA/SAã€Devã€QA)

#### 5.2.1 ä»€éº¼æ˜¯ Three Amigos

**Three Amigos** æ˜¯ BDD çš„æ ¸å¿ƒå”ä½œå¯¦è¸,ç”±ä¸‰å€‹ä¸åŒè§’è‰²ä»£è¡¨çµ„æˆ:

```mermaid
graph TB
    subgraph ThreeAmigos[Three Amigos æœƒè­°]
        BA[æ¥­å‹™åˆ†æå¸« BA/SA<br/>ä»£è¡¨æ¥­å‹™è§€é»]
        Dev[é–‹ç™¼äººå“¡ Dev<br/>ä»£è¡¨æŠ€è¡“è§€é»]
        QA[æ¸¬è©¦äººå“¡ QA<br/>ä»£è¡¨å“è³ªè§€é»]
        
        BA <--> Dev
        Dev <--> QA
        QA <--> BA
    end
    
    Input[Input:<br/>User Story<br/>æ¥­å‹™éœ€æ±‚] --> ThreeAmigos
    ThreeAmigos --> Output[Output:<br/>Example Map<br/>Feature Files<br/>å…±äº«ç†è§£]
    
    style BA fill:#e1f5ff
    style Dev fill:#fff4e1
    style QA fill:#e7f5e1
```

**ç‚ºä»€éº¼éœ€è¦ä¸‰å€‹è§’è‰²?**

| è§’è‰² | é—œæ³¨é» | å…¸å‹æå• |
|------|--------|----------|
| **BA/SA** | æ¥­å‹™åƒ¹å€¼èˆ‡æ­£ç¢ºæ€§ | ã€Œé€™ç¬¦åˆæ¥­å‹™éœ€æ±‚å—?ã€<br/>ã€Œä½¿ç”¨è€…çœŸæ­£æƒ³è¦çš„æ˜¯?ã€ |
| **Dev** | æŠ€è¡“å¯è¡Œæ€§èˆ‡å¯¦ä½œ | ã€Œé€™æŠ€è¡“ä¸Šå¯è¡Œå—?ã€<br/>ã€Œéœ€è¦å¤šå°‘æ™‚é–“?ã€<br/>ã€Œæœ‰ä»€éº¼æŠ€è¡“é¢¨éšª?ã€ |
| **QA** | æ¸¬è©¦è¦†è“‹åº¦èˆ‡å“è³ª | ã€Œé‚Šç•Œæƒ…æ³æ˜¯?ã€<br/>ã€Œä¾‹å¤–è™•ç†å¦‚ä½•?ã€<br/>ã€Œå¦‚ä½•é©—è­‰?ã€ |

**ä¸‰æ–¹è¦–è§’çš„äº’è£œ**:

```mermaid
graph TB
    UserStory[User Story]
    
    UserStory --> BA[BA è¦–è§’]
    BA --> BA1[æ¥­å‹™åƒ¹å€¼]
    BA --> BA2[ä½¿ç”¨è€…éœ€æ±‚]
    BA --> BA3[æ¥­å‹™è¦å‰‡]
    BA --> BA4[å„ªå…ˆé †åº]
    
    UserStory --> Dev[Dev è¦–è§’]
    Dev --> Dev1[æŠ€è¡“å¯è¡Œæ€§]
    Dev --> Dev2[å¯¦ä½œè¤‡é›œåº¦]
    Dev --> Dev3[æŠ€è¡“ä¾è³´]
    Dev --> Dev4[æ•ˆèƒ½è€ƒé‡]
    
    UserStory --> QA[QA è¦–è§’]
    QA --> QA1[æ¸¬è©¦å ´æ™¯]
    QA --> QA2[é‚Šç•Œæ¢ä»¶]
    QA --> QA3[ä¾‹å¤–è™•ç†]
    QA --> QA4[é©—è­‰æ–¹å¼]
    
    style UserStory fill:#ff9,stroke:#333,stroke-width:4px
    style BA fill:#9f9,stroke:#333,stroke-width:2px
    style Dev fill:#99f,stroke:#333,stroke-width:2px
    style QA fill:#f99,stroke:#333,stroke-width:2px
```

#### 5.2.2 Three Amigos æœƒè­°å¯¦æ–½

**æœƒè­°é¡å‹èˆ‡é »ç‡**

| æœƒè­°é¡å‹ | æ™‚æ©Ÿ | æ™‚é•· | åƒèˆ‡è€… |
|---------|------|------|--------|
| **Discovery Session** | Story é€²å…¥é–‹ç™¼å‰ | 30-60min | BA, SA, Dev, QA |
| **Specification Review** | Feature æ’°å¯«å¾Œ | 15-30min | SA, Dev, QA |
| **Implementation Kick-off** | é–‹ç™¼é–‹å§‹å‰ | 15-30min | Dev, QA |
| **Ad-hoc Discussion** | é‡åˆ°å•é¡Œæ™‚ | éš¨æ™‚ | ç›¸é—œäººå“¡ |

**æ¨™æº– Three Amigos æœƒè­°æµç¨‹**

**Phase 1:æº–å‚™(æœƒå‰ 10 åˆ†é˜)**

```
â–¡ SA æº–å‚™:
  - åˆ—å°æˆ–åˆ†äº« User Story
  - æº–å‚™åˆæ­¥çš„ Example Map(å¦‚æœ‰)
  - æº–å‚™ä¾¿åˆ©è²¼èˆ‡ç™½æ¿

â–¡ åƒèˆ‡è€…æº–å‚™:
  - é–±è®€ User Story
  - æ€è€ƒå¯èƒ½çš„å•é¡Œ
```

**Phase 2:Story èªªæ˜(5 åˆ†é˜)**

```
BA/SA èªªæ˜:
1. Story èƒŒæ™¯èˆ‡æ¥­å‹™åƒ¹å€¼
2. ä¸»è¦ä½¿ç”¨è€…èˆ‡ä½¿ç”¨æƒ…å¢ƒ
3. å·²çŸ¥çš„é©—æ”¶æº–å‰‡
4. æ¥­å‹™å„ªå…ˆç´šèˆ‡æœŸæœ›
```

**Phase 3:æå•èˆ‡è¨è«–(20 åˆ†é˜)**

```
è¼ªæµæå•:
â†’ BA æå•:æ¾„æ¸…æ¥­å‹™é‚è¼¯
   ã€Œå¦‚æœä½¿ç”¨è€…æ˜¯ VIP,æµç¨‹æœ‰å·®ç•°å—?ã€
   ã€Œé€™å€‹æŠ˜æ‰£è¦å‰‡é©ç”¨æ‰€æœ‰å•†å“å—?ã€

â†’ Dev æå•:æŠ€è¡“å¯è¡Œæ€§
   ã€Œéœ€è¦æ•´åˆå…¶ä»–ç³»çµ±å—?ã€
   ã€Œé æœŸçš„è³‡æ–™é‡ç´šæ˜¯?ã€
   ã€Œæ•ˆèƒ½è¦æ±‚æ˜¯?ã€

â†’ QA æå•:æ¸¬è©¦å ´æ™¯
   ã€Œé‚Šç•Œå€¼æ˜¯å¤šå°‘?ã€
   ã€ŒåŒæ™‚ç™¼ç”Ÿæœƒå¦‚ä½•?ã€
   ã€Œå¤±æ•—å¾Œå¦‚ä½•å›å¾©?ã€
```

**Phase 4:å»ºç«‹ Example Map(20 åˆ†é˜)**

```
å”ä½œç”¢å‡º:
1. è­˜åˆ¥æ¥­å‹™è¦å‰‡(è—è‰²å¡ç‰‡)
2. ç‚ºæ¯å€‹è¦å‰‡ç”¢ç”Ÿç¯„ä¾‹(ç¶ è‰²å¡ç‰‡)
3. è¨˜éŒ„å•é¡Œèˆ‡å‡è¨­(ç´…è‰²å¡ç‰‡)
4. ç¢ºä¿ä¸‰æ–¹éƒ½ç†è§£èˆ‡åŒæ„
```

**Phase 5:æ±ºç­–èˆ‡è¡Œå‹•(10 åˆ†é˜)**

```
æ±ºå®š:
â–¡ Story æ˜¯å¦ Ready for Development
â–¡ éœ€è¦é€²ä¸€æ­¥æ¾„æ¸…çš„å•é¡Œ
â–¡ å¾ŒçºŒå·¥ä½œåˆ†é…:
  - SA: æ’°å¯« Feature File
  - Dev: è©•ä¼°æŠ€è¡“æ–¹æ¡ˆ
  - QA: æº–å‚™æ¸¬è©¦è³‡æ–™
â–¡ ä¸‹æ¬¡æœƒè­°æ™‚é–“(å¦‚éœ€è¦)
```

**Phase 6:æœƒå¾Œè·Ÿé€²**

```
SA å·¥ä½œ:
â–¡ å°‡ Example Map æ‹ç…§/æ•¸ä½åŒ–ä¿å­˜
â–¡ æ’°å¯« Feature File
â–¡ åˆ†äº«çµ¦åœ˜éšŠ Review

Dev å·¥ä½œ:
â–¡ ç ”ç©¶æŠ€è¡“æ–¹æ¡ˆ
â–¡ æä¾›å·¥ä½œé‡ä¼°ç®—

QA å·¥ä½œ:
â–¡ Review Feature File
â–¡ æº–å‚™æ¸¬è©¦ç’°å¢ƒèˆ‡è³‡æ–™
```

#### 5.2.3 Three Amigos å¯¦æˆ°æ¡ˆä¾‹

**æ¡ˆä¾‹:æœƒå“¡é»æ•¸å…Œæ›åŠŸèƒ½**

**User Story**:
```
èº«ç‚º è¨»å†Šæœƒå“¡
æˆ‘æƒ³è¦ ä½¿ç”¨é»æ•¸å…Œæ›å•†å“
ä»¥ä¾¿ ç²å¾—è³¼ç‰©å„ªæƒ 

é©—æ”¶æº–å‰‡:
- 100 é»å¯å…Œæ› 10 å…ƒæŠ˜æ‰£
- é»æ•¸ä¸è¶³æ™‚ç„¡æ³•å…Œæ›
- å…Œæ›å¾Œé»æ•¸ç«‹å³æ‰£é™¤
```

**Three Amigos å°è©±è¨˜éŒ„**:

```
BA:ã€Œé€™å€‹åŠŸèƒ½ä¸»è¦æ˜¯é¼“å‹µæœƒå“¡ç´¯ç©é»æ•¸,æå‡å¿ èª åº¦ã€

SA:ã€Œæˆ‘å€‘å…ˆç¢ºèªè¦å‰‡,100é»æ›10å…ƒ,é‚£200é»å¯ä»¥æ›20å…ƒå—?ã€

BA:ã€Œå°,æŒ‰æ¯”ä¾‹è¨ˆç®—,ä½†æœ‰å€‹ä¸Šé™,å–®ç­†è¨‚å–®æœ€å¤šç”¨1000é»ã€

QA:ã€Œå¦‚æœæˆ‘æœ‰1500é»,è¨‚å–®é‡‘é¡500å…ƒ,æœƒç™¼ç”Ÿä»€éº¼?ã€

BA:ã€Œæœ€å¤šç”¨1000é»,æ›100å…ƒ,æ‰€ä»¥å¯¦ä»˜400å…ƒ,å‰©ä¸‹500é»ã€

Dev:ã€Œé»æ•¸æ‰£é™¤çš„æ™‚æ©Ÿæ˜¯?ä¸‹å–®æ™‚?é‚„æ˜¯ä»˜æ¬¾æˆåŠŸå¾Œ?ã€

BA:ã€Œæ‡‰è©²æ˜¯ä»˜æ¬¾æˆåŠŸå¾Œæ‰æ‰£,å¦‚æœå–æ¶ˆè¨‚å–®è¦é‚„å›å»ã€

QA:ã€Œé‚£å¦‚æœä»˜æ¬¾å¤±æ•—å‘¢?é»æ•¸ä¸æ‰£?ã€

BA:ã€Œå°,ä»˜æ¬¾å¤±æ•—æˆ–å–æ¶ˆéƒ½ä¸æ‰£é»æ•¸ã€

Dev:ã€Œé€™éœ€è¦äº¤æ˜“æ©Ÿåˆ¶ç¢ºä¿ä¸€è‡´æ€§,æŠ€è¡“ä¸Šéœ€è¦...ã€

SA:ã€Œç­‰ç­‰,æˆ‘å€‘å…ˆæŠŠé€™äº›è¦å‰‡è¨˜ä¸‹ä¾†:
     è¦å‰‡1: é»æ•¸å…Œæ›æ¯”ä¾‹ 100:10
     è¦å‰‡2: å–®ç­†è¨‚å–®ä¸Šé™ 1000 é»
     è¦å‰‡3: ä»˜æ¬¾æˆåŠŸå¾Œæ‰æ‰£é»
     è¦å‰‡4: å–æ¶ˆè¨‚å–®é€€é‚„é»æ•¸ã€

QA:ã€Œé‚Šç•Œæƒ…æ³:å¦‚æœè¨‚å–®é‡‘é¡50å…ƒ,ä½†æˆ‘ç”¨1000é»å‘¢?ã€

BA:ã€Œå¥½å•é¡Œ!æŠ˜æ‰£ä¸èƒ½è¶…éè¨‚å–®é‡‘é¡,æ‰€ä»¥50å…ƒè¨‚å–®æœ€å¤šæ‰£500é»ã€

Dev:ã€Œæ•ˆèƒ½è€ƒé‡:é»æ•¸æŸ¥è©¢å’Œæ‰£é™¤éœ€è¦å³æ™‚å—?å¯æ¥å—çš„å»¶é²æ˜¯?ã€

BA:ã€ŒæŸ¥è©¢è¦å³æ™‚,æ‰£é™¤å¯ä»¥æœ‰å¹¾ç§’å»¶é²,ä½†è¦çµ¦ä½¿ç”¨è€…å›é¥‹ã€

SA:ã€Œæˆ‘è¨˜éŒ„ä¸€å€‹å•é¡Œ:é»æ•¸æœ‰æ•ˆæœŸé™å—?ã€

BA:ã€Œæœ‰,é»æ•¸1å¹´å¾ŒéæœŸ,é€™å¯èƒ½æ˜¯å¦ä¸€å€‹ Storyã€

QA:ã€Œä¸¦ç™¼å•é¡Œ:å…©å€‹è¨‚å–®åŒæ™‚ç”¨é»æ•¸æœƒä¸æœƒè¶…æ‰£?ã€

Dev:ã€Œéœ€è¦é–å®šæ©Ÿåˆ¶,é€™æ˜¯æŠ€è¡“ç´°ç¯€,æˆ‘å€‘å¯ä»¥è™•ç†ã€

SA:ã€Œå¥½,æˆ‘å€‘ç¾åœ¨æœ‰ 4 å€‹ä¸»è¦è¦å‰‡å’Œ 8 å€‹ç¯„ä¾‹,æˆ‘æœƒå¯«æˆ Featureã€
```

**ç”¢å‡ºçš„ Example Map**:

```
ğŸŸ¨ [Story] æœƒå“¡é»æ•¸å…Œæ›å•†å“

â”œâ”€ ğŸŸ¦ [Rule 1] é»æ•¸å…Œæ›æ¯”ä¾‹ 100:10(100é»æ›10å…ƒ)
â”‚  â”œâ”€ ğŸŸ© æœ‰ 1000é»,å…Œæ› 100å…ƒ â†’ æˆåŠŸ,å‰© 0é»
â”‚  â”œâ”€ ğŸŸ© æœ‰ 500é»,å…Œæ› 50å…ƒ â†’ æˆåŠŸ,å‰© 0é»
â”‚  â””â”€ ğŸŸ© æœ‰ 50é»,å˜—è©¦å…Œæ› â†’ å¤±æ•—ã€Œé»æ•¸ä¸è¶³ã€
â”‚
â”œâ”€ ğŸŸ¦ [Rule 2] å–®ç­†è¨‚å–®é»æ•¸ä½¿ç”¨ä¸Šé™ 1000é»
â”‚  â”œâ”€ ğŸŸ© æœ‰ 1500é»,è¨‚å–® 500å…ƒ,ç”¨ 1000é» â†’ æˆåŠŸ,æŠ˜æ‰£100å…ƒ,å‰©500é»
â”‚  â”œâ”€ ğŸŸ© æœ‰ 800é»,è¨‚å–® 500å…ƒ,ç”¨ 800é» â†’ æˆåŠŸ,æŠ˜æ‰£80å…ƒ,å‰©0é»
â”‚  â””â”€ ğŸŸ¥ [Q] å¦‚æœæœƒå“¡ç­‰ç´šä¸åŒ,ä¸Šé™æ˜¯å¦ä¸åŒ?
â”‚
â”œâ”€ ğŸŸ¦ [Rule 3] æŠ˜æ‰£ä¸å¾—è¶…éè¨‚å–®é‡‘é¡
â”‚  â”œâ”€ ğŸŸ© è¨‚å–® 50å…ƒ,æœ‰ 1000é» â†’ åªæ‰£ 500é»(æŠ˜æ‰£50å…ƒ),å‰©500é»
â”‚  â””â”€ ğŸŸ© è¨‚å–® 10å…ƒ,æœ‰ 100é» â†’ åªæ‰£ 100é»(æŠ˜æ‰£10å…ƒ),å‰©0é»
â”‚
â”œâ”€ ğŸŸ¦ [Rule 4] ä»˜æ¬¾æˆåŠŸå¾Œæ‰æ‰£é»æ•¸
â”‚  â”œâ”€ ğŸŸ© ä¸‹å–®ç”¨é» â†’ ä»˜æ¬¾æˆåŠŸ â†’ é»æ•¸æ‰£é™¤
â”‚  â”œâ”€ ğŸŸ© ä¸‹å–®ç”¨é» â†’ ä»˜æ¬¾å¤±æ•— â†’ é»æ•¸ä¸æ‰£
â”‚  â””â”€ ğŸŸ© ä¸‹å–®ç”¨é» â†’ å–æ¶ˆè¨‚å–® â†’ é»æ•¸é€€é‚„
â”‚
â””â”€ ğŸŸ¥ [Q] é»æ•¸æ‰£é™¤çš„å»¶é²å¯æ¥å—ç¯„åœ?(å·²ç¢ºèª:å¹¾ç§’å…§)
```

**æ’°å¯«çš„ Feature File**:

```gherkin
Feature: æœƒå“¡é»æ•¸å…Œæ›æŠ˜æ‰£
  ä½œç‚º è¨»å†Šæœƒå“¡
  æˆ‘æƒ³è¦ ä½¿ç”¨ç´¯ç©çš„é»æ•¸å…Œæ›æŠ˜æ‰£
  ä»¥ä¾¿ ç¯€çœè³¼ç‰©è²»ç”¨

  Business Rules:
  - å…Œæ›æ¯”ä¾‹:100 é» = 10 å…ƒ
  - å–®ç­†è¨‚å–®ä¸Šé™:1000 é»
  - æŠ˜æ‰£ä¸å¾—è¶…éè¨‚å–®é‡‘é¡
  - ä»˜æ¬¾æˆåŠŸå¾Œæ‰æ‰£é™¤é»æ•¸

  Background:
    Given æˆ‘å·²ç™»å…¥ç‚ºè¨»å†Šæœƒå“¡
    And æˆ‘åœ¨çµå¸³é é¢

  @happy_path
  Scenario: æˆåŠŸä½¿ç”¨é»æ•¸å…Œæ›æŠ˜æ‰£
    Given æˆ‘çš„é»æ•¸é¤˜é¡ç‚º 1000 é»
    And è³¼ç‰©è»Šå•†å“ç¸½åƒ¹ç‚º 500 å…ƒ
    When æˆ‘é¸æ“‡ä½¿ç”¨ 500 é»å…Œæ›
    Then æ‡‰è©²æŠ˜æ‰£ 50 å…ƒ
    And å¯¦ä»˜é‡‘é¡æ‡‰ç‚º 450 å…ƒ
    When æˆ‘å®Œæˆä»˜æ¬¾
    Then é»æ•¸é¤˜é¡æ‡‰ç‚º 500 é»

  @validation
  Scenario Outline: é»æ•¸å…Œæ›è¨ˆç®—
    Given æˆ‘çš„é»æ•¸é¤˜é¡ç‚º <é»æ•¸> é»
    And è³¼ç‰©è»Šå•†å“ç¸½åƒ¹ç‚º <è¨‚å–®é‡‘é¡> å…ƒ
    When æˆ‘é¸æ“‡ä½¿ç”¨ <ä½¿ç”¨é»æ•¸> é»å…Œæ›
    Then çµæœæ‡‰ç‚º <çµæœ>
    And æŠ˜æ‰£é‡‘é¡æ‡‰ç‚º <æŠ˜æ‰£> å…ƒ
    And å¯¦ä»˜é‡‘é¡æ‡‰ç‚º <å¯¦ä»˜> å…ƒ
    
    Examples:
      | é»æ•¸ | è¨‚å–®é‡‘é¡ | ä½¿ç”¨é»æ•¸ | çµæœ | æŠ˜æ‰£ | å¯¦ä»˜ |
      | 1000 | 500      | 500      | æˆåŠŸ | 50   | 450  |
      | 500  | 500      | 500      | æˆåŠŸ | 50   | 450  |
      | 100  | 500      | 500      | å¤±æ•— | 0    | 500  |

  @business_rule
  Scenario: å–®ç­†è¨‚å–®é»æ•¸ä½¿ç”¨ä¸Šé™ 1000 é»
    Given æˆ‘çš„é»æ•¸é¤˜é¡ç‚º 1500 é»
    And è³¼ç‰©è»Šå•†å“ç¸½åƒ¹ç‚º 500 å…ƒ
    When æˆ‘é¸æ“‡ä½¿ç”¨ 1500 é»å…Œæ›
    Then æ‡‰è©²é¡¯ç¤ºæç¤ºã€Œå–®ç­†è¨‚å–®æœ€å¤šä½¿ç”¨ 1000 é»ã€
    And æ‡‰è©²è‡ªå‹•èª¿æ•´ç‚º 1000 é»
    And æŠ˜æ‰£é‡‘é¡æ‡‰ç‚º 100 å…ƒ

  @business_rule
  Scenario: æŠ˜æ‰£é‡‘é¡ä¸å¾—è¶…éè¨‚å–®é‡‘é¡
    Given æˆ‘çš„é»æ•¸é¤˜é¡ç‚º 1000 é»
    And è³¼ç‰©è»Šå•†å“ç¸½åƒ¹ç‚º 50 å…ƒ
    When æˆ‘é¸æ“‡ä½¿ç”¨ 1000 é»å…Œæ›
    Then æ‡‰è©²é¡¯ç¤ºæç¤ºã€ŒæŠ˜æ‰£é‡‘é¡ä¸å¯è¶…éè¨‚å–®é‡‘é¡ã€
    And æ‡‰è©²è‡ªå‹•èª¿æ•´ç‚º 500 é»
    And æŠ˜æ‰£é‡‘é¡æ‡‰ç‚º 50 å…ƒ
    And å¯¦ä»˜é‡‘é¡æ‡‰ç‚º 0 å…ƒ

  @payment_flow
  Scenario: ä»˜æ¬¾æˆåŠŸå¾Œæ‰£é™¤é»æ•¸
    Given æˆ‘çš„é»æ•¸é¤˜é¡ç‚º 500 é»
    And æˆ‘é¸æ“‡ä½¿ç”¨ 300 é»å…Œæ›
    And è¨‚å–®é‡‘é¡ç‚º 400 å…ƒ(æŠ˜æ‰£30å…ƒå¾Œå¯¦ä»˜370å…ƒ)
    When æˆ‘å®Œæˆä¿¡ç”¨å¡ä»˜æ¬¾ä¸¦æˆåŠŸ
    Then é»æ•¸æ‡‰è©²æ‰£é™¤ 300 é»
    And é»æ•¸é¤˜é¡æ‡‰ç‚º 200 é»
    And æˆ‘æ‡‰è©²æ”¶åˆ°é»æ•¸ç•°å‹•é€šçŸ¥

  @payment_flow
  Scenario: ä»˜æ¬¾å¤±æ•—æ™‚ä¸æ‰£é»æ•¸
    Given æˆ‘çš„é»æ•¸é¤˜é¡ç‚º 500 é»
    And æˆ‘é¸æ“‡ä½¿ç”¨ 300 é»å…Œæ›
    When æˆ‘å˜—è©¦ä»˜æ¬¾ä½†å¤±æ•—
    Then é»æ•¸ä¸æ‡‰è©²è¢«æ‰£é™¤
    And é»æ•¸é¤˜é¡æ‡‰ä»ç‚º 500 é»
    And æ‡‰è©²é¡¯ç¤ºã€Œä»˜æ¬¾å¤±æ•—,é»æ•¸æœªä½¿ç”¨ã€

  @cancellation
  Scenario: å–æ¶ˆè¨‚å–®æ™‚é€€é‚„é»æ•¸
    Given æˆ‘çš„è¨‚å–®ä½¿ç”¨äº† 300 é»å…Œæ›
    And ä»˜æ¬¾å·²æˆåŠŸ,é»æ•¸å·²æ‰£é™¤
    When æˆ‘åœ¨ 30 åˆ†é˜å…§å–æ¶ˆè¨‚å–®
    Then 300 é»æ‡‰è©²é€€é‚„åˆ°æˆ‘çš„å¸³æˆ¶
    And æˆ‘æ‡‰è©²æ”¶åˆ°é»æ•¸é€€é‚„é€šçŸ¥
```

---

### ğŸ“ ç¬¬äº”ç« ç¬¬ä¸€éƒ¨åˆ†ç¸½çµ

#### æœ¬ç¯€é‡é»

âœ… **BDD å·¥ä½œæµ**
- Discovery â†’ Formulation â†’ Automation â†’ Validation
- åœ¨æ•æ· Sprint ä¸­çš„æ•´åˆ
- å„éšæ®µçš„æ´»å‹•èˆ‡ç”¢å‡º

âœ… **Three Amigos å”ä½œ**
- ä¸‰å€‹è§’è‰²çš„è¦–è§’èˆ‡è·è²¬
- æ¨™æº–æœƒè­°æµç¨‹(60åˆ†é˜)
- å¯¦æˆ°æ¡ˆä¾‹æ¼”ç·´

âœ… **å¾å°è©±åˆ°è¦æ ¼**
- é€éå°è©±å»ºç«‹å…±è­˜
- Example Map è¨˜éŒ„è¨è«–
- è½‰æ›ç‚º Feature File

---

### 5.3 SA åœ¨ BDD æµç¨‹ä¸­çš„è²¬ä»»èˆ‡ç”¢å‡º

#### 5.3.1 SA çš„è§’è‰²å®šä½

ç³»çµ±åˆ†æå¸«åœ¨ BDD ä¸­æ‰®æ¼”**æ©‹æ¨‘**è§’è‰²:

```mermaid
graph LR
    Business[æ¥­å‹™éœ€æ±‚<br/>Stakeholder/BA] --> SA[ç³»çµ±åˆ†æå¸« SA]
    SA --> Technical[æŠ€è¡“å¯¦ä½œ<br/>Dev/QA]
    
    SA --> D1[éœ€æ±‚æ¢ç´¢]
    SA --> D2[è¦æ ¼æ’°å¯«]
    SA --> D3[å”ä½œå¼•å°]
    SA --> D4[å“è³ªæŠŠé—œ]
    
    style SA fill:#fff4e1
    style Business fill:#e1f5ff
    style Technical fill:#e7f5e1
```

**SA çš„æ ¸å¿ƒè·è²¬**:

| éšæ®µ | SA è·è²¬ | é—œéµç”¢å‡º |
|------|---------|----------|
| **Discovery** | çµ„ç¹” Workshop<br/>å¼•å°è¨è«–<br/>è¨˜éŒ„ç¯„ä¾‹ | Example Map<br/>å•é¡Œæ¸…å–® |
| **Formulation** | æ’°å¯« Feature Files<br/>ç²¾ç…‰è¦æ ¼<br/>çµ„ç¹” Review | Feature Files<br/>Scenario è¦æ ¼ |
| **Automation** | å”åŠ©æ¾„æ¸…è¦æ ¼<br/>Review Step Definitions | è¦æ ¼èªªæ˜æ–‡ä»¶ |
| **Validation** | é©—æ”¶æ¸¬è©¦<br/>ç¼ºé™·ç¢ºèª<br/>æ–‡ä»¶æ›´æ–° | æ¸¬è©¦å ±å‘Š<br/>æ›´æ–°çš„è¦æ ¼ |

#### 5.3.2 SA çš„å·¥ä½œæµç¨‹

**æ¯æ—¥å·¥ä½œæµ**:

```
Morning (09:00-12:00)
â”œâ”€ 09:00-09:30  æª¢è¦–æ˜¨æ—¥æ¸¬è©¦çµæœ
â”œâ”€ 09:30-10:30  åƒèˆ‡ Daily Standup + æ¾„æ¸…å•é¡Œ
â”œâ”€ 10:30-11:30  æ’°å¯«/ç²¾ç…‰ Feature Files
â””â”€ 11:30-12:00  Review é–‹ç™¼ä¸­çš„ Step Definitions

Afternoon (13:00-18:00)
â”œâ”€ 13:00-14:00  Discovery Workshop(è¦–éœ€è¦)
â”œâ”€ 14:00-15:00  Three Amigos æœƒè­°
â”œâ”€ 15:00-17:00  æ’°å¯«æ–‡ä»¶/æ›´æ–°è¦æ ¼
â””â”€ 17:00-18:00  é©—æ”¶æ¸¬è©¦/ç¼ºé™·è¿½è¹¤
```

**æ¯é€±å·¥ä½œæµ**:

```
Week Overview:
â”œâ”€ Monday
â”‚  â”œâ”€ Sprint Planning(å¦‚é©ç”¨)
â”‚  â”œâ”€ é¸æ“‡æœ¬é€± Stories
â”‚  â””â”€ å®‰æ’ Discovery Workshops
â”‚
â”œâ”€ Tuesday-Thursday
â”‚  â”œâ”€ Discovery Workshops
â”‚  â”œâ”€ æ’°å¯« Feature Files
â”‚  â”œâ”€ Three Amigos Reviews
â”‚  â””â”€ æ”¯æ´é–‹ç™¼åœ˜éšŠ
â”‚
â””â”€ Friday
   â”œâ”€ é©—æ”¶æ¸¬è©¦
   â”œâ”€ é€±å ±å‘Šæ•´ç†
   â””â”€ Sprint Review(å¦‚é©ç”¨)
```

---

### 5.4 å¯¦å‹™æ–‡ä»¶ç”¢å‡ºç¯„ä¾‹

#### 5.4.1 Feature File æ¨™æº–æ¨¡æ¿

```gherkin
# features/[feature_name].feature
@[feature_tag] @[module]
Feature: [åŠŸèƒ½åç¨±]
  ä½œç‚º [ä½¿ç”¨è€…è§’è‰²]
  æˆ‘æƒ³è¦ [åŠŸèƒ½æè¿°]
  ä»¥ä¾¿ [æ¥­å‹™åƒ¹å€¼]
  
  # æ¥­å‹™è¦å‰‡èªªæ˜(å¯é¸)
  Business Rules:
  - è¦å‰‡ 1
  - è¦å‰‡ 2
  
  # ç›¸é—œæ–‡ä»¶(å¯é¸)
  References:
  - User Story: US-001
  - Use Case: UC-001
  - æ¥­å‹™æ–‡ä»¶: [é€£çµ]

  Background: [å…±åŒå‰ç½®æ¢ä»¶æè¿°]
    Given [æ­¥é©Ÿ 1]
    And [æ­¥é©Ÿ 2]

  @happy_path @[priority]
  Scenario: [æ­£å¸¸æƒ…æ³æè¿°]
    Given [å‰ç½®æ¢ä»¶]
    When [åŸ·è¡Œå‹•ä½œ]
    Then [é æœŸçµæœ]

  @validation @[tag]
  Scenario Outline: [é©—è­‰å ´æ™¯æè¿°]
    Given [å‰ç½®æ¢ä»¶] <åƒæ•¸>
    When [å‹•ä½œ] <åƒæ•¸>
    Then [çµæœ] <åƒæ•¸>
    
    Examples: [è³‡æ–™æè¿°]
      | åƒæ•¸1 | åƒæ•¸2 | åƒæ•¸3 |
      | å€¼1   | å€¼2   | å€¼3   |

  @error_handling
  Scenario: [ç•°å¸¸è™•ç†æè¿°]
    Given [å‰ç½®æ¢ä»¶]
    When [è§¸ç™¼ç•°å¸¸çš„å‹•ä½œ]
    Then [éŒ¯èª¤è™•ç†çµæœ]
```

#### 5.4.2 Example Map æ–‡ä»¶ç¯„æœ¬

```markdown
# Example Map: [Story åç¨±]

**æ—¥æœŸ**: 2025-01-15
**åƒèˆ‡è€…**: BA(å¼µä¸‰)ã€SA(æå››)ã€Dev(ç‹äº”)ã€QA(è¶™å…­)
**Story ID**: US-123

## User Story
```
èº«ç‚º [è§’è‰²]
æˆ‘æƒ³è¦ [åŠŸèƒ½]
ä»¥ä¾¿ [åƒ¹å€¼]
```

## æ¥­å‹™è¦å‰‡èˆ‡ç¯„ä¾‹

### è¦å‰‡ 1: [è¦å‰‡æè¿°]
- âœ… ç¯„ä¾‹ 1: [å…·é«”ç¯„ä¾‹]
- âœ… ç¯„ä¾‹ 2: [å…·é«”ç¯„ä¾‹]
- âœ… ç¯„ä¾‹ 3: [å…·é«”ç¯„ä¾‹]

### è¦å‰‡ 2: [è¦å‰‡æè¿°]
- âœ… ç¯„ä¾‹ 1: [å…·é«”ç¯„ä¾‹]
- âœ… ç¯„ä¾‹ 2: [å…·é«”ç¯„ä¾‹]

### è¦å‰‡ 3: [è¦å‰‡æè¿°]
- âœ… ç¯„ä¾‹ 1: [å…·é«”ç¯„ä¾‹]

## å¾…é‡æ¸…å•é¡Œ
1. â“ [å•é¡Œæè¿°] - è² è²¬äºº:[å§“å] - æœŸé™:[æ—¥æœŸ]
2. â“ [å•é¡Œæè¿°] - è² è²¬äºº:[å§“å] - æœŸé™:[æ—¥æœŸ]

## æŠ€è¡“è€ƒé‡
- [æŠ€è¡“é» 1]
- [æŠ€è¡“é» 2]

## æ±ºè­°
- [ ] Story ç‹€æ…‹: Ready / Need Work / Too Big
- [ ] å¾ŒçºŒè¡Œå‹•:
  - SA: æ’°å¯« Feature File
  - Dev: è©•ä¼°æŠ€è¡“æ–¹æ¡ˆ
  - QA: æº–å‚™æ¸¬è©¦è³‡æ–™

## é™„ä»¶
- Example Map ç…§ç‰‡: [é€£çµ]
- ç›¸é—œæ–‡ä»¶: [é€£çµ]
```

#### 5.4.3 Three Amigos æœƒè­°è¨˜éŒ„ç¯„æœ¬

```markdown
# Three Amigos æœƒè­°è¨˜éŒ„

**Story**: US-123 - [Story åç¨±]
**æ—¥æœŸ**: 2025-01-15 14:00-15:00
**åƒèˆ‡è€…**: 
- BA: å¼µä¸‰
- SA: æå››
- Dev: ç‹äº”ã€åŠ‰ä¸ƒ
- QA: è¶™å…­

## æœƒè­°ç›®æ¨™
Review Feature File ä¸¦ç¢ºèªå¯¦ä½œæ–¹å‘

## è¨è«–é‡é»

### 1. è¦å‰‡æ¾„æ¸…
**å•é¡Œ**: [æè¿°]
**è¨è«–**: [éç¨‹]
**çµè«–**: [æ±ºè­°]

### 2. æŠ€è¡“å¯è¡Œæ€§
**å•é¡Œ**: [æè¿°]
**Dev æ„è¦‹**: [èªªæ˜]
**æ±ºè­°**: [æ–¹æ¡ˆ]

### 3. æ¸¬è©¦å ´æ™¯è£œå……
**QA å»ºè­°**: [å ´æ™¯]
**æ±ºè­°**: æ–°å¢ Scenario: [åç¨±]

## è¡Œå‹•é …ç›®
- [ ] SA: æ›´æ–° Feature File - æœŸé™: 2025-01-16
- [ ] Dev: æä¾›æŠ€è¡“è¨­è¨ˆæ–‡ä»¶ - æœŸé™: 2025-01-17
- [ ] QA: æº–å‚™æ¸¬è©¦è³‡æ–™ - æœŸé™: 2025-01-18

## æ›´æ–°çš„ Feature File
[é€£çµæˆ–å…§åµŒ Feature File]

## ä¸‹æ¬¡æœƒè­°
æ™‚é–“: [æ—¥æœŸæ™‚é–“]
è­°é¡Œ: [ä¸»é¡Œ]
```

---

### 5.5 ç¶­è­·èˆ‡ç‰ˆæœ¬æ§ç®¡å¯¦å‹™

#### 5.5.1 Feature Files çš„ç‰ˆæœ¬æ§ç®¡

**å°ˆæ¡ˆçµæ§‹å»ºè­°**:

```
project/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ [æ‡‰ç”¨ç¨‹å¼ç¢¼]
â”‚
â”œâ”€â”€ features/                    # Feature Files ç›®éŒ„
â”‚   â”œâ”€â”€ authentication/
â”‚   â”‚   â”œâ”€â”€ login.feature
â”‚   â”‚   â”œâ”€â”€ logout.feature
â”‚   â”‚   â””â”€â”€ password_reset.feature
â”‚   â”‚
â”‚   â”œâ”€â”€ user_management/
â”‚   â”‚   â”œâ”€â”€ create_user.feature
â”‚   â”‚   â”œâ”€â”€ update_user.feature
â”‚   â”‚   â””â”€â”€ delete_user.feature
â”‚   â”‚
â”‚   â””â”€â”€ order_processing/
â”‚       â”œâ”€â”€ create_order.feature
â”‚       â”œâ”€â”€ cancel_order.feature
â”‚       â””â”€â”€ refund.feature
â”‚
â”œâ”€â”€ steps/                       # Step Definitions
â”‚   â”œâ”€â”€ authentication_steps.py
â”‚   â”œâ”€â”€ user_management_steps.py
â”‚   â””â”€â”€ order_steps.py
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ example_maps/           # Example Map è¨˜éŒ„
â”‚   â””â”€â”€ meeting_notes/          # æœƒè­°è¨˜éŒ„
â”‚
â””â”€â”€ README.md
```

**Git å·¥ä½œæµç¨‹**:

```bash
# 1. ç‚ºæ¯å€‹ Story å»ºç«‹åˆ†æ”¯
git checkout -b feature/US-123-user-login

# 2. æ’°å¯« Feature File
# ç·¨è¼¯ features/authentication/login.feature

# 3. æäº¤ Feature File
git add features/authentication/login.feature
git commit -m "feat: æ–°å¢ä½¿ç”¨è€…ç™»å…¥ Feature File (US-123)"

# 4. å¯¦ä½œ Step Definitions
git add steps/authentication_steps.py
git commit -m "feat: å¯¦ä½œç™»å…¥ Step Definitions (US-123)"

# 5. å¯¦ä½œåŠŸèƒ½ç¨‹å¼ç¢¼
git add src/authentication/
git commit -m "feat: å¯¦ä½œä½¿ç”¨è€…ç™»å…¥åŠŸèƒ½ (US-123)"

# 6. æ¨é€ä¸¦å»ºç«‹ Pull Request
git push origin feature/US-123-user-login
```

**Commit Message è¦ç¯„**:

```
æ ¼å¼:
<type>(<scope>): <subject>

é¡å‹(type):
- feat: æ–°åŠŸèƒ½(Feature æˆ–ç¨‹å¼ç¢¼)
- fix: ä¿®å¾©éŒ¯èª¤
- docs: æ–‡ä»¶æ›´æ–°(åŒ…å« Feature File)
- refactor: é‡æ§‹(Feature æˆ–ç¨‹å¼ç¢¼)
- test: æ¸¬è©¦ç›¸é—œ
- chore: é›œé …

ç¯„ä¾‹:
feat(login): æ–°å¢ä½¿ç”¨è€…ç™»å…¥ Feature File (US-123)
feat(login): å¯¦ä½œç™»å…¥ Step Definitions (US-123)
feat(login): å¯¦ä½œç™»å…¥ API endpoint (US-123)
docs(login): æ›´æ–°ç™»å…¥ Feature èªªæ˜ (US-123)
refactor(login): é‡æ§‹ç™»å…¥ Scenario,æ‹†åˆ†ç‚ºå¤šå€‹å°å ´æ™¯
fix(login): ä¿®æ­£å¯†ç¢¼é©—è­‰é‚è¼¯çš„ Feature æè¿°
```

#### 5.5.2 Feature Files ç¶­è­·åŸå‰‡

**åŸå‰‡ 1:Feature Files æ˜¯ç”¢å“ç¨‹å¼ç¢¼**

```
âœ… æ‡‰è©²åš:
- ç´å…¥ç‰ˆæœ¬æ§ç®¡
- Code Review
- è‡ªå‹•åŒ–åŸ·è¡Œ
- æŒçºŒç¶­è­·æ›´æ–°

âŒ ä¸æ‡‰è©²:
- ç•¶ä½œä¸€æ¬¡æ€§æ–‡ä»¶
- å…è¨±éæ™‚ä¸æ›´æ–°
- èˆ‡ç¨‹å¼ç¢¼åˆ†é–‹ç®¡ç†
```

**åŸå‰‡ 2:éš¨éœ€æ±‚è®Šæ›´åŒæ­¥æ›´æ–°**

```
éœ€æ±‚è®Šæ›´æµç¨‹:
1. BA æå‡ºè®Šæ›´éœ€æ±‚
2. å¬é–‹ Three Amigos è¨è«–
3. æ›´æ–° Feature File
4. Review ä¸¦ç¢ºèª
5. å¯¦ä½œè®Šæ›´
6. åŸ·è¡Œæ¸¬è©¦é©—è­‰
7. æäº¤è®Šæ›´(Feature + Code)
```

**åŸå‰‡ 3:å®šæœŸé‡æ§‹**

```
é‡æ§‹æ™‚æ©Ÿ:
â–¡ Scenario å¤ªé•·(>15 æ­¥)
â–¡ é‡è¤‡çš„æ­¥é©Ÿéå¤š
â–¡ Feature åŒ…å«å¤ªå¤š Scenario(>15 å€‹)
â–¡ Background éæ–¼è¤‡é›œ
â–¡ ä¸å†ä½¿ç”¨çš„èˆŠå ´æ™¯

é‡æ§‹æ–¹æ³•:
- æå–å…±ç”¨æ­¥é©Ÿåˆ° Background
- æ‹†åˆ†å¤§ Feature ç‚ºå¤šå€‹å° Feature
- ä½¿ç”¨ Scenario Outline åˆä½µç›¸ä¼¼å ´æ™¯
- ç§»é™¤å·²å»¢æ£„çš„å ´æ™¯
- æ›´æ–°éæ™‚çš„æ¥­å‹™è¡“èª
```

**åŸå‰‡ 4:æ¨™è¨˜ç‹€æ…‹**

```gherkin
# ä½¿ç”¨æ¨™ç±¤æ¨™è¨˜ç‹€æ…‹

@wip
Scenario: é–‹ç™¼ä¸­çš„åŠŸèƒ½
  # Work In Progress

@skip @bug-123
Scenario: æš«æ™‚è·³éçš„æ¸¬è©¦
  # ç­‰å¾… Bug-123 ä¿®å¾©

@deprecated
Scenario: å³å°‡ç§»é™¤çš„èˆŠåŠŸèƒ½
  # å°‡åœ¨ä¸‹å€‹ç‰ˆæœ¬ç§»é™¤

@manual
Scenario: æ‰‹å‹•æ¸¬è©¦å ´æ™¯
  # æš«æ™‚ç„¡æ³•è‡ªå‹•åŒ–

@slow
Scenario: åŸ·è¡Œç·©æ…¢çš„æ¸¬è©¦
  # åƒ…åœ¨å¤œé–“åŸ·è¡Œ
```

#### 5.5.3 Feature Files çš„ Review æ©Ÿåˆ¶

**Review Checklist**:

```markdown
## Feature File Review Checklist

### çµæ§‹èˆ‡æ ¼å¼
- [ ] Feature æè¿°æ¸…æ¥š,åŒ…å«æ¥­å‹™åƒ¹å€¼
- [ ] ä½¿ç”¨æ­£ç¢ºçš„ Gherkin èªæ³•
- [ ] ç¸®æ’èˆ‡æ ¼å¼ä¸€è‡´
- [ ] æ¨™ç±¤ä½¿ç”¨æ°ç•¶

### å…§å®¹å“è³ª
- [ ] ä½¿ç”¨æ¥­å‹™èªè¨€,é¿å…æŠ€è¡“ç´°ç¯€
- [ ] æ¯å€‹ Scenario è·è²¬å–®ä¸€
- [ ] Given-When-Then çµæ§‹æ­£ç¢º
- [ ] æ­¥é©Ÿæ˜ç¢ºä¸”å¯æ¸¬è©¦

### è¦†è“‹åº¦
- [ ] åŒ…å« Happy Path
- [ ] åŒ…å«ä¸»è¦ç•°å¸¸æƒ…æ³
- [ ] åŒ…å«é‚Šç•Œæ¢ä»¶
- [ ] åŒ…å«æ¥­å‹™è¦å‰‡é©—è­‰

### å¯ç¶­è­·æ€§
- [ ] Background ä½¿ç”¨æ°ç•¶
- [ ] Scenario Outline ä½¿ç”¨åˆç†
- [ ] æ²’æœ‰é‡è¤‡çš„å ´æ™¯
- [ ] æ˜“æ–¼ç†è§£èˆ‡ä¿®æ”¹

### æ•´åˆæ€§
- [ ] èˆ‡ User Story å°æ‡‰
- [ ] æ¨™ç±¤èˆ‡å°ˆæ¡ˆè¦ç¯„ä¸€è‡´
- [ ] èˆ‡ç¾æœ‰ Feature ç„¡è¡çª
- [ ] Step Definitions å¯å¯¦ä½œ

### å•†æ¥­é‚è¼¯
- [ ] ç¬¦åˆæ¥­å‹™éœ€æ±‚
- [ ] é©—æ”¶æº–å‰‡å®Œæ•´
- [ ] èˆ‡åˆ©å®³é—œä¿‚äººé”æˆå…±è­˜
```

---

### ğŸ“ ç¬¬äº”ç« ç¸½çµèˆ‡å¯¦å‹™è¦é»

#### é—œéµè¦é»å›é¡§

âœ… **BDD å®Œæ•´å·¥ä½œæµ**
- Discovery â†’ Formulation â†’ Automation â†’ Validation
- åœ¨æ•æ· Sprint çš„æ•´åˆ
- å„éšæ®µæ´»å‹•èˆ‡æ™‚ç¨‹å®‰æ’

âœ… **Three Amigos å”ä½œå¯¦è¸**
- ä¸‰å€‹è§’è‰²çš„è·è²¬èˆ‡è¦–è§’
- æ¨™æº–æœƒè­°æµç¨‹èˆ‡æŠ€å·§
- å¯¦æˆ°æ¡ˆä¾‹æ¼”ç·´

âœ… **SA çš„è²¬ä»»èˆ‡ç”¢å‡º**
- åœ¨ BDD æµç¨‹ä¸­çš„æ©‹æ¨‘è§’è‰²
- æ¯æ—¥/æ¯é€±å·¥ä½œæµç¨‹
- é—œéµæ–‡ä»¶ç”¢å‡º

âœ… **å¯¦å‹™æ–‡ä»¶ç¯„æœ¬**
- Feature File æ¨™æº–æ¨¡æ¿
- Example Map è¨˜éŒ„ç¯„æœ¬
- Three Amigos æœƒè­°è¨˜éŒ„

âœ… **ç¶­è­·èˆ‡ç‰ˆæœ¬æ§ç®¡**
- Git å·¥ä½œæµç¨‹
- Feature Files ç¶­è­·åŸå‰‡
- Review æ©Ÿåˆ¶èˆ‡ Checklist

---

#### ğŸ¯ æª¢æŸ¥æ¸…å–®:å»ºç«‹ BDD æµç¨‹

**åœ˜éšŠå±¤é¢**:
- [ ] å»ºç«‹ Three Amigos æœƒè­°æ©Ÿåˆ¶
- [ ] å®šç¾© Discovery Workshop æµç¨‹
- [ ] åˆ¶å®š Feature File æ’°å¯«è¦ç¯„
- [ ] å»ºç«‹ Review æ©Ÿåˆ¶
- [ ] æ•´åˆåˆ° Sprint æµç¨‹

**å·¥å…·å±¤é¢**:
- [ ] é¸æ“‡ BDD æ¡†æ¶
- [ ] è¨­å®šç‰ˆæœ¬æ§ç®¡
- [ ] å»ºç«‹ CI/CD Pipeline
- [ ] è¨­å®šæ¸¬è©¦å ±å‘Š
- [ ] æº–å‚™å”ä½œå·¥å…·

**æ–‡åŒ–å±¤é¢**:
- [ ] åŸ¹è¨“åœ˜éšŠæˆå“¡
- [ ] å»ºç«‹å”ä½œæ–‡åŒ–
- [ ] é¼“å‹µä¸»å‹•æºé€š
- [ ] æŒçºŒæ”¹å–„æµç¨‹
- [ ] åˆ†äº«æˆåŠŸç¶“é©—

---

#### ğŸ’¡ æˆåŠŸå¯¦æ–½ BDD çš„é—œéµ

**é—œéµ 1:å”ä½œå„ªå…ˆæ–¼å·¥å…·**
```
BDD çš„æ ¸å¿ƒæ˜¯å”ä½œ,ä¸æ˜¯è‡ªå‹•åŒ–æ¸¬è©¦
âœ… é‡è¦– Discovery èˆ‡ Three Amigos
âœ… å»ºç«‹è·¨è·èƒ½æºé€šæ–‡åŒ–
âœ… å·¥å…·æ˜¯è¼”åŠ©,ä¸æ˜¯ç›®çš„
```

**é—œéµ 2:å¾å°è™•é–‹å§‹**
```
ä¸è¦ä¸€æ¬¡å°å…¥æ‰€æœ‰æµç¨‹
âœ… é¸æ“‡ 1-2 å€‹åœ˜éšŠè©¦é»
âœ… é¸æ“‡ç°¡å–®åŠŸèƒ½ç·´ç¿’
âœ… ç´¯ç©ç¶“é©—å¾Œæ“´å¤§
```

**é—œéµ 3:æŒçºŒæ”¹å–„**
```
å®šæœŸå›é¡§èˆ‡èª¿æ•´æµç¨‹
âœ… Sprint Retrospective è¨è«– BDD
âœ… æ”¶é›†åœ˜éšŠå›é¥‹
âœ… å„ªåŒ–ç“¶é ¸ç’°ç¯€
```

**é—œéµ 4:ç®¡ç†å±¤æ”¯æŒ**
```
çˆ­å–ç®¡ç†å±¤çš„ç†è§£èˆ‡æ”¯æŒ
âœ… å±•ç¤º BDD çš„åƒ¹å€¼
âœ… æä¾›æ•¸æ“šè­‰æ˜æ•ˆç›Š
âœ… çµ¦äºˆåœ˜éšŠå­¸ç¿’æ™‚é–“
```

---

**ä¸‹ä¸€ç« é å‘Š**:
æˆ‘å€‘å°‡æ·±å…¥æ¢è¨ **BDD è‡ªå‹•åŒ–æ¸¬è©¦å¯¦ä½œ**,åŒ…æ‹¬å¸¸è¦‹ BDD å·¥å…·æ¯”è¼ƒã€ç’°å¢ƒå®‰è£ã€Feature èˆ‡ Step Definitions çš„é—œè¯ã€CI/CD æ•´åˆ,ä»¥åŠæ¸¬è©¦å ±å‘Šèˆ‡è¿½è¹¤æ©Ÿåˆ¶ã€‚

---

## ç¬¬å…­ç« ã€€BDD è‡ªå‹•åŒ–æ¸¬è©¦å¯¦ä½œ

æœ¬ç« å°‡èªªæ˜å¦‚ä½•å°‡ Feature Files è½‰æ›ç‚ºå¯åŸ·è¡Œçš„è‡ªå‹•åŒ–æ¸¬è©¦,åŒ…æ‹¬å·¥å…·é¸æ“‡ã€ç’°å¢ƒè¨­å®šã€å¯¦ä½œæŠ€å·§èˆ‡ CI/CD æ•´åˆã€‚

### 6.1 å¸¸è¦‹ BDD å·¥å…·æ¯”è¼ƒ

#### 6.1.1 ä¸»æµ BDD æ¡†æ¶æ¦‚è¦½

```mermaid
graph TB
    subgraph Ecosystem[BDD å·¥å…·ç”Ÿæ…‹ç³»]
        Java[Java ç”Ÿæ…‹]
        Python[Python ç”Ÿæ…‹]
        DotNet[.NET ç”Ÿæ…‹]
        JavaScript[JavaScript ç”Ÿæ…‹]
        Ruby[Ruby ç”Ÿæ…‹]
    end
    
    Java --> Cucumber_JVM[Cucumber-JVM<br/>JBehave<br/>Serenity BDD]
    Python --> Behave[Behave<br/>Pytest-BDD<br/>Lettuce]
    DotNet --> SpecFlow[SpecFlow<br/>LightBDD]
    JavaScript --> CucumberJS[Cucumber.js<br/>Jest-Cucumber]
    Ruby --> CucumberRuby[Cucumber Ruby]
    
    style Java fill:#e1f5ff
    style Python fill:#fff4e1
    style DotNet fill:#e7f5e1
    style JavaScript fill:#ffe1e1
    style Ruby fill:#f0e1ff
```

#### 6.1.2 å·¥å…·è©³ç´°æ¯”è¼ƒ

| æ¡†æ¶ | èªè¨€ | æˆç†Ÿåº¦ | ç¤¾ç¾¤æ”¯æŒ | å­¸ç¿’æ›²ç·š | æ¨è–¦åº¦ |
|------|------|--------|----------|----------|--------|
| **Cucumber** | Java/Ruby/JS | â­â­â­â­â­ | éå¸¸æ´»èº | ä¸­ç­‰ | â­â­â­â­â­ |
| **Behave** | Python | â­â­â­â­ | æ´»èº | å®¹æ˜“ | â­â­â­â­â­ |
| **SpecFlow** | .NET/C# | â­â­â­â­â­ | æ´»èº | ä¸­ç­‰ | â­â­â­â­â­ |
| **JBehave** | Java | â­â­â­â­ | ç©©å®š | è¼ƒé›£ | â­â­â­ |
| **Serenity BDD** | Java | â­â­â­â­ | æ´»èº | è¼ƒé›£ | â­â­â­â­ |
| **Pytest-BDD** | Python | â­â­â­ | ç©©å®š | å®¹æ˜“ | â­â­â­â­ |

**é¸æ“‡å»ºè­°**:

```
é¸æ“‡ Cucumber (Java/JS/Ruby):
âœ… éœ€è¦æœ€å»£æ³›çš„ç¤¾ç¾¤æ”¯æŒ
âœ… è±å¯Œçš„æ’ä»¶èˆ‡æ•´åˆ
âœ… è·¨èªè¨€åœ˜éšŠ
âœ… ä¼æ¥­ç´šå°ˆæ¡ˆ

é¸æ“‡ Behave (Python):
âœ… Python é–‹ç™¼åœ˜éšŠ
âœ… ç°¡å–®æ˜“å­¸
âœ… å¿«é€Ÿä¸Šæ‰‹
âœ… èˆ‡ Python æ¸¬è©¦å·¥å…·æ•´åˆ

é¸æ“‡ SpecFlow (.NET/C#):
âœ… .NET é–‹ç™¼åœ˜éšŠ
âœ… Visual Studio æ•´åˆ
âœ… ä¼æ¥­ç´š .NET æ‡‰ç”¨
âœ… éœ€è¦èˆ‡ Azure DevOps æ•´åˆ

é¸æ“‡ Serenity BDD (Java):
âœ… éœ€è¦ç²¾ç¾çš„æ¸¬è©¦å ±å‘Š
âœ… è¤‡é›œçš„æ¸¬è©¦å ´æ™¯
âœ… å¤šå±¤æ¬¡çš„æ¸¬è©¦æ¶æ§‹
âœ… èˆ‡ Jira æ•´åˆ
```

---

### 6.2 ç’°å¢ƒå®‰è£èˆ‡å°ˆæ¡ˆçµæ§‹

#### 6.2.1 Behave (Python) ç’°å¢ƒè¨­å®š

**å®‰è£æ­¥é©Ÿ**:

```bash
# 1. å»ºç«‹å°ˆæ¡ˆç›®éŒ„
mkdir bdd-demo
cd bdd-demo

# 2. å»ºç«‹è™›æ“¬ç’°å¢ƒ
python -m venv venv

# 3. å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate

# 4. å®‰è£ Behave
pip install behave

# 5. å®‰è£å…¶ä»–æ¸¬è©¦å·¥å…·(å¯é¸)
pip install selenium          # Web UI æ¸¬è©¦
pip install requests          # API æ¸¬è©¦
pip install allure-behave     # æ¸¬è©¦å ±å‘Š
pip install behave-html-formatter  # HTML å ±å‘Š

# 6. ç”¢ç”Ÿ requirements.txt
pip freeze > requirements.txt
```

**å°ˆæ¡ˆçµæ§‹**:

```
bdd-demo/
â”œâ”€â”€ features/
â”‚   â”œâ”€â”€ login.feature
â”‚   â”œâ”€â”€ search.feature
â”‚   â””â”€â”€ checkout.feature
â”‚
â”œâ”€â”€ features/steps/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ login_steps.py
â”‚   â”œâ”€â”€ search_steps.py
â”‚   â””â”€â”€ checkout_steps.py
â”‚
â”œâ”€â”€ features/environment.py    # æ¸¬è©¦ç’°å¢ƒè¨­å®š
â”‚
â”œâ”€â”€ features/pages/            # Page Object (Web UI)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base_page.py
â”‚   â”œâ”€â”€ login_page.py
â”‚   â””â”€â”€ search_page.py
â”‚
â”œâ”€â”€ features/support/          # è¼”åŠ©å·¥å…·
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py
â”‚   â”œâ”€â”€ database.py
â”‚   â””â”€â”€ api_client.py
â”‚
â”œâ”€â”€ reports/                   # æ¸¬è©¦å ±å‘Šç›®éŒ„
â”œâ”€â”€ venv/                      # è™›æ“¬ç’°å¢ƒ
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ behave.ini                 # Behave è¨­å®šæª”
â””â”€â”€ README.md
```

**behave.ini è¨­å®šæª”**:

```ini
[behave]
# è¼¸å‡ºæ ¼å¼
format = pretty
# è¼¸å‡ºé¡è‰²
color = true
# é¡¯ç¤ºåŸ·è¡Œæ™‚é–“
show_timings = true
# å¤±æ•—æ™‚åœæ­¢
stop = false
# æ¨™ç±¤è¡¨é”å¼
#tags = @smoke and not @skip
# å ±å‘Šè¼¸å‡º
junit = true
junit_directory = reports/junit
# ä¸¦è¡ŒåŸ·è¡Œ
#processes = 4
# æ—¥èªŒç´šåˆ¥
logging_level = INFO
```

#### 6.2.2 Cucumber (Java) ç’°å¢ƒè¨­å®š

**Maven å°ˆæ¡ˆè¨­å®š**:

```xml
<!-- pom.xml -->
<project>
    <properties>
        <cucumber.version>7.14.0</cucumber.version>
        <junit.version>5.10.0</junit.version>
    </properties>

    <dependencies>
        <!-- Cucumber Java -->
        <dependency>
            <groupId>io.cucumber</groupId>
            <artifactId>cucumber-java</artifactId>
            <version>${cucumber.version}</version>
        </dependency>

        <!-- Cucumber JUnit -->
        <dependency>
            <groupId>io.cucumber</groupId>
            <artifactId>cucumber-junit</artifactId>
            <version>${cucumber.version}</version>
            <scope>test</scope>
        </dependency>

        <!-- JUnit 5 -->
        <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>

        <!-- Selenium (Web UI æ¸¬è©¦) -->
        <dependency>
            <groupId>org.seleniumhq.selenium</groupId>
            <artifactId>selenium-java</artifactId>
            <version>4.15.0</version>
        </dependency>

        <!-- REST Assured (API æ¸¬è©¦) -->
        <dependency>
            <groupId>io.rest-assured</groupId>
            <artifactId>rest-assured</artifactId>
            <version>5.3.2</version>
        </dependency>
    </dependencies>
</project>
```

**å°ˆæ¡ˆçµæ§‹**:

```
cucumber-demo/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â””â”€â”€ java/
â”‚   â”‚       â””â”€â”€ com/example/app/
â”‚   â”‚           â””â”€â”€ [æ‡‰ç”¨ç¨‹å¼ç¢¼]
â”‚   â”‚
â”‚   â””â”€â”€ test/
â”‚       â”œâ”€â”€ java/
â”‚       â”‚   â””â”€â”€ com/example/test/
â”‚       â”‚       â”œâ”€â”€ runners/
â”‚       â”‚       â”‚   â””â”€â”€ TestRunner.java
â”‚       â”‚       â”œâ”€â”€ steps/
â”‚       â”‚       â”‚   â”œâ”€â”€ LoginSteps.java
â”‚       â”‚       â”‚   â”œâ”€â”€ SearchSteps.java
â”‚       â”‚       â”‚   â””â”€â”€ Hooks.java
â”‚       â”‚       â”œâ”€â”€ pages/
â”‚       â”‚       â”‚   â”œâ”€â”€ BasePage.java
â”‚       â”‚       â”‚   â””â”€â”€ LoginPage.java
â”‚       â”‚       â””â”€â”€ utils/
â”‚       â”‚           â””â”€â”€ TestContext.java
â”‚       â”‚
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ features/
â”‚               â”œâ”€â”€ login.feature
â”‚               â””â”€â”€ search.feature
â”‚
â”œâ”€â”€ target/                    # ç·¨è­¯è¼¸å‡º
â”‚   â””â”€â”€ cucumber-reports/     # æ¸¬è©¦å ±å‘Š
â”œâ”€â”€ pom.xml
â””â”€â”€ README.md
```

**TestRunner.java**:

```java
package com.example.test.runners;

import org.junit.runner.RunWith;
import io.cucumber.junit.Cucumber;
import io.cucumber.junit.CucumberOptions;

@RunWith(Cucumber.class)
@CucumberOptions(
    features = "src/test/resources/features",
    glue = {"com.example.test.steps"},
    tags = "@smoke and not @skip",
    plugin = {
        "pretty",
        "html:target/cucumber-reports/cucumber.html",
        "json:target/cucumber-reports/cucumber.json",
        "junit:target/cucumber-reports/cucumber.xml"
    },
    monochrome = true
)
public class TestRunner {
}
```

---

### 6.3 Feature èˆ‡ Step Definitions çš„é—œè¯

#### 6.3.1 Step Definitions å¯¦ä½œåŸç†

```mermaid
graph LR
    A[Feature File] -->|è§£æ| B[Gherkin Parser]
    B -->|åŒ¹é…| C[Step Definitions]
    C -->|åŸ·è¡Œ| D[æ¸¬è©¦ç¨‹å¼ç¢¼]
    D -->|äº’å‹•| E[æ‡‰ç”¨ç¨‹å¼]
    E -->|å›å‚³| F[æ¸¬è©¦çµæœ]
    
    style A fill:#e1f5ff
    style C fill:#fff4e1
    style E fill:#e7f5e1
    style F fill:#ffe1e1
```

**é‹ä½œæµç¨‹**:

```
1. Gherkin Parser è®€å– Feature File
2. è§£ææ¯å€‹ Step (Given/When/Then)
3. æ ¹æ“šæ­£å‰‡è¡¨é”å¼æˆ–è¨»è§£åŒ¹é… Step Definition
4. åŸ·è¡Œå°æ‡‰çš„æ¸¬è©¦ç¨‹å¼ç¢¼
5. æ”¶é›†åŸ·è¡Œçµæœ
6. ç”¢ç”Ÿæ¸¬è©¦å ±å‘Š
```

#### 6.3.2 Step Definitions å¯¦ä½œç¯„ä¾‹

**Feature File**:

```gherkin
# features/login.feature
Feature: ä½¿ç”¨è€…ç™»å…¥

  Scenario: æˆåŠŸç™»å…¥
    Given æˆ‘åœ¨ç™»å…¥é é¢
    When æˆ‘è¼¸å…¥å¸³è™Ÿ "user@example.com"
    And æˆ‘è¼¸å…¥å¯†ç¢¼ "SecurePass123"
    And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
    Then æˆ‘æ‡‰è©²çœ‹åˆ°æœƒå“¡é¦–é 
    And é é¢æ‡‰è©²é¡¯ç¤º "æ­¡è¿å›ä¾†"
```

**Step Definitions (Python/Behave)**:

```python
# features/steps/login_steps.py
from behave import given, when, then
from selenium import webdriver
from selenium.webdriver.common.by import By

@given('æˆ‘åœ¨ç™»å…¥é é¢')
def step_impl(context):
    context.driver = webdriver.Chrome()
    context.driver.get('https://example.com/login')

@when('æˆ‘è¼¸å…¥å¸³è™Ÿ "{username}"')
def step_impl(context, username):
    element = context.driver.find_element(By.ID, 'username')
    element.send_keys(username)

@when('æˆ‘è¼¸å…¥å¯†ç¢¼ "{password}"')
def step_impl(context, password):
    element = context.driver.find_element(By.ID, 'password')
    element.send_keys(password)

@when('æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•')
def step_impl(context):
    button = context.driver.find_element(By.ID, 'login-btn')
    button.click()

@then('æˆ‘æ‡‰è©²çœ‹åˆ°æœƒå“¡é¦–é ')
def step_impl(context):
    assert '/dashboard' in context.driver.current_url

@then('é é¢æ‡‰è©²é¡¯ç¤º "{text}"')
def step_impl(context, text):
    page_text = context.driver.find_element(By.TAG_NAME, 'body').text
    assert text in page_text
```

**Step Definitions (Java/Cucumber)**:

```java
// steps/LoginSteps.java
package com.example.test.steps;

import io.cucumber.java.en.Given;
import io.cucumber.java.en.When;
import io.cucumber.java.en.Then;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.By;
import org.openqa.selenium.WebElement;
import static org.junit.Assert.*;

public class LoginSteps {
    private WebDriver driver;
    
    @Given("æˆ‘åœ¨ç™»å…¥é é¢")
    public void i_am_on_login_page() {
        driver = new ChromeDriver();
        driver.get("https://example.com/login");
    }
    
    @When("æˆ‘è¼¸å…¥å¸³è™Ÿ {string}")
    public void i_enter_username(String username) {
        WebElement element = driver.findElement(By.id("username"));
        element.sendKeys(username);
    }
    
    @When("æˆ‘è¼¸å…¥å¯†ç¢¼ {string}")
    public void i_enter_password(String password) {
        WebElement element = driver.findElement(By.id("password"));
        element.sendKeys(password);
    }
    
    @When("æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•")
    public void i_click_login_button() {
        WebElement button = driver.findElement(By.id("login-btn"));
        button.click();
    }
    
    @Then("æˆ‘æ‡‰è©²çœ‹åˆ°æœƒå“¡é¦–é ")
    public void i_should_see_dashboard() {
        assertTrue(driver.getCurrentUrl().contains("/dashboard"));
    }
    
    @Then("é é¢æ‡‰è©²é¡¯ç¤º {string}")
    public void page_should_display(String text) {
        String pageText = driver.findElement(By.tagName("body")).getText();
        assertTrue(pageText.contains(text));
    }
}
```

#### 6.3.3 åƒæ•¸åŒ– Step Definitions

**ç¯„ä¾‹ 1:ç°¡å–®åƒæ•¸**

```gherkin
When æˆ‘è½‰å¸³ 5000 å…ƒçµ¦æœ‹å‹
```

```python
@when('æˆ‘è½‰å¸³ {amount:d} å…ƒçµ¦æœ‹å‹')
def step_impl(context, amount):
    context.result = context.account.transfer(amount, 'friend')
```

**ç¯„ä¾‹ 2:å¤šå€‹åƒæ•¸**

```gherkin
When æˆ‘è½‰å¸³ 5000 å…ƒçµ¦å¸³æˆ¶ "9876543210"
```

```python
@when('æˆ‘è½‰å¸³ {amount:d} å…ƒçµ¦å¸³æˆ¶ "{target}"')
def step_impl(context, amount, target):
    context.result = context.account.transfer(amount, target)
```

**ç¯„ä¾‹ 3:è¡¨æ ¼åƒæ•¸**

```gherkin
When æˆ‘å»ºç«‹ä½¿ç”¨è€…,è³‡æ–™å¦‚ä¸‹:
  | å¸³è™Ÿ     | test@example.com |
  | å§“å     | å¼µä¸‰             |
  | éƒ¨é–€     | è³‡è¨Šéƒ¨           |
```

```python
@when('æˆ‘å»ºç«‹ä½¿ç”¨è€…,è³‡æ–™å¦‚ä¸‹:')
def step_impl(context):
    data = {}
    for row in context.table:
        data[row[0]] = row[1]
    context.user = create_user(**data)
```

**ç¯„ä¾‹ 4:å¤šè¡Œæ–‡å­—åƒæ•¸**

```gherkin
When æˆ‘ç™¼é€éƒµä»¶å…§å®¹ç‚º:
  """
  è¦ªæ„›çš„å®¢æˆ¶:
  
  æ‚¨çš„è¨‚å–®å·²ç¢ºèªã€‚
  """
```

```python
@when('æˆ‘ç™¼é€éƒµä»¶å…§å®¹ç‚º:')
def step_impl(context):
    email_body = context.text
    send_email(body=email_body)
```

---

### ğŸ“ ç¬¬å…­ç« ç¬¬ä¸€éƒ¨åˆ†ç¸½çµ

#### æœ¬ç¯€é‡é»

âœ… **BDD å·¥å…·é¸æ“‡**
- ä¸»æµæ¡†æ¶æ¯”è¼ƒ(Cucumber/Behave/SpecFlow)
- æ ¹æ“šæŠ€è¡“æ£§é¸æ“‡åˆé©å·¥å…·
- å·¥å…·çš„æˆç†Ÿåº¦èˆ‡ç¤¾ç¾¤æ”¯æŒ

âœ… **ç’°å¢ƒè¨­å®š**
- Python/Behave ç’°å¢ƒå®‰è£
- Java/Cucumber å°ˆæ¡ˆçµæ§‹
- è¨­å®šæª”èˆ‡ä¾è³´ç®¡ç†

âœ… **Step Definitions å¯¦ä½œ**
- Feature èˆ‡ Step çš„åŒ¹é…æ©Ÿåˆ¶
- åƒæ•¸åŒ– Step Definitions
- è¡¨æ ¼èˆ‡å¤šè¡Œæ–‡å­—è™•ç†

---

**æ¥ä¸‹ä¾†**:æˆ‘å€‘å°‡ç¹¼çºŒæ¢è¨ BDD è‡ªå‹•åŒ–èˆ‡ CI/CD æ•´åˆã€æ¸¬è©¦å ±å‘Šèˆ‡è¿½è¹¤æ©Ÿåˆ¶,ä»¥åŠç¬¬ä¸ƒç« çš„å¯¦æˆ°æ¡ˆä¾‹ã€‚

---

### 6.4 CI/CD æ•´åˆå¯¦å‹™

#### 6.4.1 å°‡ BDD æ¸¬è©¦æ•´åˆåˆ° CI Pipeline

```mermaid
graph LR
    A[Code Commit] --> B[CI Trigger]
    B --> C[ç’°å¢ƒæº–å‚™]
    C --> D[åŸ·è¡Œ BDD æ¸¬è©¦]
    D --> E{æ¸¬è©¦çµæœ}
    E -->|Pass| F[éƒ¨ç½²åˆ°æ¸¬è©¦ç’°å¢ƒ]
    E -->|Fail| G[é€šçŸ¥åœ˜éšŠ]
    F --> H[åŸ·è¡Œæ•´åˆæ¸¬è©¦]
    H --> I[ç”¢ç”Ÿå ±å‘Š]
    
    style A fill:#e1f5ff
    style D fill:#fff4e1
    style E fill:#ffe1e1
    style F fill:#e7f5e1
```

**GitHub Actions ç¯„ä¾‹**:

```yaml
# .github/workflows/bdd-tests.yml
name: BDD Tests

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  bdd-tests:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        pip install -r requirements.txt
    
    - name: Run BDD tests
      run: |
        behave --tags=@smoke --format json -o reports/cucumber.json
      continue-on-error: true
    
    - name: Generate HTML report
      if: always()
      run: |
        behave --format html -o reports/report.html
    
    - name: Publish test results
      if: always()
      uses: actions/upload-artifact@v3
      with:
        name: bdd-test-reports
        path: reports/
    
    - name: Notify on failure
      if: failure()
      uses: 8398a7/action-slack@v3
      with:
        status: ${{ job.status }}
        text: 'BDD Tests Failed!'
        webhook_url: ${{ secrets.SLACK_WEBHOOK }}
```

**GitLab CI ç¯„ä¾‹**:

```yaml
# .gitlab-ci.yml
stages:
  - test
  - report

bdd_tests:
  stage: test
  image: python:3.11
  script:
    - pip install -r requirements.txt
    - behave --tags=@smoke --junit --junit-directory reports/
  artifacts:
    when: always
    paths:
      - reports/
    reports:
      junit: reports/*.xml
  only:
    - merge_requests
    - develop
    - main

generate_report:
  stage: report
  dependencies:
    - bdd_tests
  script:
    - behave --format html -o reports/report.html
  artifacts:
    paths:
      - reports/report.html
  when: always
```

**Jenkins Pipeline ç¯„ä¾‹**:

```groovy
// Jenkinsfile
pipeline {
    agent any
    
    stages {
        stage('Checkout') {
            steps {
                checkout scm
            }
        }
        
        stage('Setup Environment') {
            steps {
                sh '''
                    python -m venv venv
                    . venv/bin/activate
                    pip install -r requirements.txt
                '''
            }
        }
        
        stage('Run BDD Tests') {
            steps {
                sh '''
                    . venv/bin/activate
                    behave --tags=@smoke \
                           --format json -o reports/cucumber.json \
                           --junit --junit-directory reports/
                '''
            }
        }
        
        stage('Publish Results') {
            steps {
                junit 'reports/*.xml'
                publishHTML([
                    reportDir: 'reports',
                    reportFiles: 'report.html',
                    reportName: 'BDD Test Report'
                ])
            }
        }
    }
    
    post {
        failure {
            emailext(
                subject: "BDD Tests Failed: ${env.JOB_NAME}",
                body: "Build failed. Check console output.",
                to: "dev-team@example.com"
            )
        }
    }
}
```

#### 6.4.2 æ¸¬è©¦ç’°å¢ƒè¨­å®š

**Environment.py (Behave)**:

```python
# features/environment.py
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
import os

def before_all(context):
    """æ¸¬è©¦å¥—ä»¶é–‹å§‹å‰åŸ·è¡Œ"""
    context.config.setup_logging()
    context.base_url = os.getenv('BASE_URL', 'http://localhost:8000')
    context.api_url = os.getenv('API_URL', 'http://localhost:8000/api')

def before_scenario(context, scenario):
    """æ¯å€‹ Scenario é–‹å§‹å‰åŸ·è¡Œ"""
    # è¨­å®šç€è¦½å™¨
    chrome_options = Options()
    if os.getenv('HEADLESS', 'true') == 'true':
        chrome_options.add_argument('--headless')
    chrome_options.add_argument('--no-sandbox')
    chrome_options.add_argument('--disable-dev-shm-usage')
    
    context.driver = webdriver.Chrome(options=chrome_options)
    context.driver.implicitly_wait(10)
    context.driver.maximize_window()

def after_scenario(context, scenario):
    """æ¯å€‹ Scenario çµæŸå¾ŒåŸ·è¡Œ"""
    if hasattr(context, 'driver'):
        # æˆªåœ–(å¦‚æœå¤±æ•—)
        if scenario.status == 'failed':
            screenshot_name = f"reports/screenshots/{scenario.name}.png"
            context.driver.save_screenshot(screenshot_name)
            print(f"Screenshot saved: {screenshot_name}")
        
        context.driver.quit()

def after_all(context):
    """æ¸¬è©¦å¥—ä»¶çµæŸå¾ŒåŸ·è¡Œ"""
    # æ¸…ç†æ¸¬è©¦è³‡æ–™
    pass
```

**Hooks.java (Cucumber)**:

```java
// steps/Hooks.java
package com.example.test.steps;

import io.cucumber.java.Before;
import io.cucumber.java.After;
import io.cucumber.java.Scenario;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeOptions;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;

public class Hooks {
    private WebDriver driver;
    
    @Before
    public void setUp() {
        ChromeOptions options = new ChromeOptions();
        if (System.getenv("HEADLESS").equals("true")) {
            options.addArguments("--headless");
        }
        options.addArguments("--no-sandbox");
        options.addArguments("--disable-dev-shm-usage");
        
        driver = new ChromeDriver(options);
        TestContext.setDriver(driver);
    }
    
    @After
    public void tearDown(Scenario scenario) {
        if (scenario.isFailed()) {
            // æˆªåœ–
            byte[] screenshot = ((TakesScreenshot) driver)
                .getScreenshotAs(OutputType.BYTES);
            scenario.attach(screenshot, "image/png", scenario.getName());
        }
        
        if (driver != null) {
            driver.quit();
        }
    }
}
```

---

### 6.5 æ¸¬è©¦å ±å‘Šèˆ‡è¿½è¹¤æ©Ÿåˆ¶

#### 6.5.1 æ¸¬è©¦å ±å‘Šé¡å‹

**1. HTML å ±å‘Š**

```bash
# Behave HTML å ±å‘Š
behave --format html -o reports/report.html

# Allure å ±å‘Š(æ›´ç²¾ç¾)
behave -f allure_behave.formatter:AllureFormatter \
       -o reports/allure-results
allure serve reports/allure-results
```

**2. JSON å ±å‘Š**(ä¾›å…¶ä»–å·¥å…·è§£æ)

```bash
behave --format json -o reports/cucumber.json
```

**3. JUnit XML å ±å‘Š**(Jenkins/CI æ•´åˆ)

```bash
behave --junit --junit-directory reports/
```

#### 6.5.2 Allure å ±å‘Šæ•´åˆ

**å®‰è£èˆ‡è¨­å®š**:

```bash
# å®‰è£ Allure
pip install allure-behave

# åŸ·è¡Œæ¸¬è©¦ä¸¦ç”¢ç”Ÿ Allure çµæœ
behave -f allure_behave.formatter:AllureFormatter \
       -o reports/allure-results

# ç”¢ç”Ÿä¸¦é–‹å•Ÿ Allure å ±å‘Š
allure serve reports/allure-results
```

**Allure æ¨™è¨»å¢å¼·**:

```python
# features/steps/login_steps.py
import allure
from allure_commons.types import AttachmentType

@given('æˆ‘åœ¨ç™»å…¥é é¢')
@allure.step('é–‹å•Ÿç™»å…¥é é¢')
def step_impl(context):
    context.driver.get(context.base_url + '/login')
    # é™„åŠ æˆªåœ–
    allure.attach(
        context.driver.get_screenshot_as_png(),
        name='ç™»å…¥é é¢',
        attachment_type=AttachmentType.PNG
    )

@then('æˆ‘æ‡‰è©²çœ‹åˆ°æœƒå“¡é¦–é ')
@allure.step('é©—è­‰æœƒå“¡é¦–é é¡¯ç¤º')
def step_impl(context):
    assert '/dashboard' in context.driver.current_url
    # é™„åŠ é é¢ HTML
    allure.attach(
        context.driver.page_source,
        name='æœƒå“¡é¦–é  HTML',
        attachment_type=AttachmentType.HTML
    )
```

#### 6.5.3 èˆ‡ JIRA/Azure DevOps æ•´åˆ

**æ¨™ç±¤æ˜ å°„**:

```gherkin
@JIRA-123 @priority-high
Feature: ä½¿ç”¨è€…ç™»å…¥

  @JIRA-124 @smoke
  Scenario: æˆåŠŸç™»å…¥
    Given æˆ‘åœ¨ç™»å…¥é é¢
    When æˆ‘è¼¸å…¥æ­£ç¢ºçš„å¸³å¯†
    Then æˆ‘æ‡‰è©²çœ‹åˆ°æœƒå“¡é¦–é 
```

**è‡ªå‹•æ›´æ–° JIRA**:

```python
# features/environment.py
import requests

def after_scenario(context, scenario):
    """æ¸¬è©¦çµæŸå¾Œæ›´æ–° JIRA"""
    # è§£æ JIRA Issue ID
    jira_tags = [tag for tag in scenario.tags if tag.startswith('JIRA-')]
    
    if jira_tags:
        jira_id = jira_tags[0].replace('JIRA-', '')
        status = 'Pass' if scenario.status == 'passed' else 'Fail'
        
        # æ›´æ–° JIRA
        update_jira_test_result(jira_id, status, scenario.name)

def update_jira_test_result(issue_id, status, test_name):
    """æ›´æ–° JIRA æ¸¬è©¦çµæœ"""
    jira_api = os.getenv('JIRA_API_URL')
    auth = (os.getenv('JIRA_USER'), os.getenv('JIRA_TOKEN'))
    
    comment = f"BDD æ¸¬è©¦çµæœ: {status}\næ¸¬è©¦: {test_name}"
    
    requests.post(
        f"{jira_api}/rest/api/2/issue/{issue_id}/comment",
        auth=auth,
        json={"body": comment}
    )
```

---

### ğŸ“ ç¬¬å…­ç« ç¸½çµèˆ‡å¯¦å‹™è¦é»

#### é—œéµè¦é»å›é¡§

âœ… **BDD å·¥å…·é¸æ“‡**
- æ ¹æ“šæŠ€è¡“æ£§é¸æ“‡åˆé©æ¡†æ¶
- Cucumber/Behave/SpecFlow æ¯”è¼ƒ
- å·¥å…·æˆç†Ÿåº¦èˆ‡ç¤¾ç¾¤æ”¯æŒ

âœ… **ç’°å¢ƒè¨­å®š**
- Python/Behave å°ˆæ¡ˆçµæ§‹
- Java/Cucumber Maven è¨­å®š
- è¨­å®šæª”èˆ‡ä¾è³´ç®¡ç†

âœ… **Step Definitions å¯¦ä½œ**
- Feature èˆ‡ Step çš„åŒ¹é…
- åƒæ•¸åŒ–èˆ‡è¡¨æ ¼è™•ç†
- Page Object æ¨¡å¼

âœ… **CI/CD æ•´åˆ**
- GitHub Actions/GitLab CI/Jenkins
- ç’°å¢ƒè¨­å®šèˆ‡ Hooks
- å¤±æ•—é€šçŸ¥æ©Ÿåˆ¶

âœ… **æ¸¬è©¦å ±å‘Š**
- HTML/JSON/JUnit å ±å‘Š
- Allure å ±å‘Šæ•´åˆ
- JIRA/Azure DevOps æ•´åˆ

---

#### ğŸ¯ æª¢æŸ¥æ¸…å–®:å»ºç«‹ BDD è‡ªå‹•åŒ–

**å°ˆæ¡ˆè¨­å®š**:
- [ ] é¸æ“‡ä¸¦å®‰è£ BDD æ¡†æ¶
- [ ] å»ºç«‹å°ˆæ¡ˆçµæ§‹
- [ ] è¨­å®šä¾è³´èˆ‡ç’°å¢ƒ
- [ ] æ’°å¯«ç¬¬ä¸€å€‹ Feature File
- [ ] å¯¦ä½œç¬¬ä¸€å€‹ Step Definition

**æ¸¬è©¦å¯¦ä½œ**:
- [ ] å»ºç«‹ Page Object(Web UI)
- [ ] å¯¦ä½œå…±ç”¨æ­¥é©Ÿ
- [ ] è¨­å®šæ¸¬è©¦è³‡æ–™
- [ ] æ’°å¯« Hooks
- [ ] æœ¬åœ°åŸ·è¡Œæ¸¬è©¦

**CI/CD æ•´åˆ**:
- [ ] è¨­å®š CI Pipeline
- [ ] é…ç½®æ¸¬è©¦ç’°å¢ƒ
- [ ] è¨­å®šå ±å‘Šç”¢ç”Ÿ
- [ ] è¨­å®šå¤±æ•—é€šçŸ¥
- [ ] æ•´åˆå°ˆæ¡ˆç®¡ç†å·¥å…·

---

**ä¸‹ä¸€ç« é å‘Š**:
æˆ‘å€‘å°‡é€é**å¯¦æˆ°æ¡ˆä¾‹**,å±•ç¤ºå¦‚ä½•æ‡‰ç”¨ BDD æ–¼ä¸åŒé¡å‹çš„ç³»çµ±,åŒ…æ‹¬ Web ç™»å…¥æµç¨‹ã€éŠ€è¡Œè½‰å¸³æ¥­å‹™ã€æ‰¹æ¬¡ç³»çµ±ã€API æ¸¬è©¦,ä»¥åŠæ¡ˆä¾‹å›é¡§èˆ‡è¡Œç‚ºé‡æ§‹æŠ€å·§ã€‚

---

## ç¬¬ä¸ƒç« ã€€BDD å¯¦æˆ°æ¡ˆä¾‹

æœ¬ç« é€éå››å€‹å®Œæ•´çš„å¯¦æˆ°æ¡ˆä¾‹,å±•ç¤º BDD åœ¨ä¸åŒé ˜åŸŸçš„æ‡‰ç”¨,å¾ Web UIã€æ¥­å‹™æµç¨‹ã€æ‰¹æ¬¡ç³»çµ±åˆ° API æ¸¬è©¦ã€‚

### 7.1 æ¡ˆä¾‹ä¸€:Web ç™»å…¥é©—è­‰æµç¨‹

#### 7.1.1 éœ€æ±‚æè¿°

**æ¥­å‹™éœ€æ±‚**:
```
ä½œç‚º é›»å•†ç¶²ç«™çš„æœƒå“¡
æˆ‘æƒ³è¦ ç™»å…¥ç³»çµ±
ä»¥ä¾¿ å­˜å–å€‹äººåŒ–çš„æœå‹™
```

**æ¥­å‹™è¦å‰‡**:
1. å¸³è™Ÿå¿…é ˆæ˜¯æœ‰æ•ˆçš„ Email æ ¼å¼
2. å¯†ç¢¼è‡³å°‘ 8 å€‹å­—å…ƒ
3. é€£çºŒç™»å…¥å¤±æ•— 5 æ¬¡,å¸³è™Ÿæš«æ™‚é–å®š 30 åˆ†é˜
4. æˆåŠŸç™»å…¥å¾Œ,å°å‘æœƒå“¡é¦–é 
5. è¨˜ä½æˆ‘åŠŸèƒ½,Cookie ä¿ç•™ 30 å¤©

#### 7.1.2 Discovery Workshop ç”¢å‡º

**Example Mapping**:

```
User Story: ä½¿ç”¨è€…ç™»å…¥
â”œâ”€ è¦å‰‡ 1: å¸³è™Ÿå¯†ç¢¼æ­£ç¢º
â”‚  â”œâ”€ ç¯„ä¾‹: æ­£ç¢ºå¸³å¯† â†’ æˆåŠŸç™»å…¥
â”‚  â”œâ”€ ç¯„ä¾‹: å‹¾é¸è¨˜ä½æˆ‘ â†’ 30å¤©å…ç™»å…¥
â”‚  â””â”€ ç¯„ä¾‹: ä¸Šæ¬¡ç™»å…¥æ™‚é–“é¡¯ç¤º
â”‚
â”œâ”€ è¦å‰‡ 2: å¸³è™Ÿå¯†ç¢¼é©—è­‰
â”‚  â”œâ”€ ç¯„ä¾‹: å¸³è™Ÿä¸å­˜åœ¨ â†’ é¡¯ç¤ºéŒ¯èª¤
â”‚  â”œâ”€ ç¯„ä¾‹: å¯†ç¢¼éŒ¯èª¤ â†’ é¡¯ç¤ºéŒ¯èª¤
â”‚  â”œâ”€ ç¯„ä¾‹: ç©ºç™½æ¬„ä½ â†’ é¡¯ç¤ºæç¤º
â”‚  â””â”€ ç¯„ä¾‹: Email æ ¼å¼éŒ¯èª¤ â†’ é¡¯ç¤ºæç¤º
â”‚
â”œâ”€ è¦å‰‡ 3: å¸³è™Ÿé–å®šæ©Ÿåˆ¶
â”‚  â”œâ”€ ç¯„ä¾‹: å¤±æ•— 5 æ¬¡ â†’ å¸³è™Ÿé–å®š
â”‚  â”œâ”€ ç¯„ä¾‹: é–å®šæœŸé–“ç™»å…¥ â†’ é¡¯ç¤ºé–å®šè¨Šæ¯
â”‚  â””â”€ ç¯„ä¾‹: 30 åˆ†é˜å¾Œ â†’ è‡ªå‹•è§£é–
â”‚
â””â”€ å•é¡Œ: å¿˜è¨˜å¯†ç¢¼æµç¨‹?(å¦é–‹ Story)
```

#### 7.1.3 Feature File

```gherkin
@authentication @high-priority
Feature: ä½¿ç”¨è€…ç™»å…¥
  ä½œç‚º é›»å•†ç¶²ç«™çš„æœƒå“¡
  æˆ‘æƒ³è¦ ç™»å…¥ç³»çµ±
  ä»¥ä¾¿ å­˜å–å€‹äººåŒ–çš„æœå‹™

  Background: æ¸¬è©¦ç”¨æˆ¶å­˜åœ¨
    Given ç³»çµ±ä¸­å­˜åœ¨ä»¥ä¸‹ä½¿ç”¨è€…:
      | email              | password    | status  |
      | user@example.com   | Pass1234    | active  |
      | locked@example.com | Pass1234    | locked  |

  @smoke @happy-path
  Scenario: ä½¿ç”¨æ­£ç¢ºå¸³å¯†æˆåŠŸç™»å…¥
    Given æˆ‘åœ¨ç™»å…¥é é¢
    When æˆ‘è¼¸å…¥å¸³è™Ÿ "user@example.com"
    And æˆ‘è¼¸å…¥å¯†ç¢¼ "Pass1234"
    And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
    Then æˆ‘æ‡‰è©²çœ‹åˆ°æœƒå“¡é¦–é 
    And é é¢æ¨™é¡Œæ‡‰è©²æ˜¯ "æˆ‘çš„å¸³æˆ¶"
    And é é¢æ‡‰è©²é¡¯ç¤º "æ­¡è¿å›ä¾†, user@example.com"

  @smoke
  Scenario: å‹¾é¸è¨˜ä½æˆ‘åŠŸèƒ½
    Given æˆ‘åœ¨ç™»å…¥é é¢
    When æˆ‘è¼¸å…¥å¸³è™Ÿ "user@example.com"
    And æˆ‘è¼¸å…¥å¯†ç¢¼ "Pass1234"
    And æˆ‘å‹¾é¸ "è¨˜ä½æˆ‘"
    And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
    Then æˆ‘æ‡‰è©²çœ‹åˆ°æœƒå“¡é¦–é 
    And ç³»çµ±æ‡‰è©²è¨­å®š Cookie "remember_me" æœ‰æ•ˆæœŸç‚º 30 å¤©

  @validation
  Scenario Outline: å¸³å¯†é©—è­‰éŒ¯èª¤
    Given æˆ‘åœ¨ç™»å…¥é é¢
    When æˆ‘è¼¸å…¥å¸³è™Ÿ "<email>"
    And æˆ‘è¼¸å…¥å¯†ç¢¼ "<password>"
    And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
    Then æˆ‘æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "<error_message>"
    And æˆ‘æ‡‰è©²ä»åœ¨ç™»å…¥é é¢

    Examples: ç„¡æ•ˆçš„å¸³è™Ÿå¯†ç¢¼
      | email              | password | error_message          |
      | invalid@test.com   | Pass1234 | å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤         |
      | user@example.com   | wrong    | å¸³è™Ÿæˆ–å¯†ç¢¼éŒ¯èª¤         |
      |                    | Pass1234 | è«‹è¼¸å…¥é›»å­éƒµä»¶         |
      | user@example.com   |          | è«‹è¼¸å…¥å¯†ç¢¼             |
      | not-an-email       | Pass1234 | è«‹è¼¸å…¥æœ‰æ•ˆçš„é›»å­éƒµä»¶   |

  @security
  Scenario: é€£çºŒç™»å…¥å¤±æ•—å°è‡´å¸³è™Ÿé–å®š
    Given æˆ‘åœ¨ç™»å…¥é é¢
    When æˆ‘ä½¿ç”¨éŒ¯èª¤å¯†ç¢¼å˜—è©¦ç™»å…¥ 5 æ¬¡,å¸³è™Ÿç‚º "user@example.com"
    Then å¸³è™Ÿ "user@example.com" æ‡‰è©²è¢«é–å®š
    When æˆ‘è¼¸å…¥å¸³è™Ÿ "user@example.com"
    And æˆ‘è¼¸å…¥å¯†ç¢¼ "Pass1234"
    And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
    Then æˆ‘æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "å¸³è™Ÿå·²è¢«é–å®š,è«‹ 30 åˆ†é˜å¾Œå†è©¦æˆ–è¯çµ¡å®¢æœ"

  @security
  Scenario: é–å®šçš„å¸³è™Ÿç„¡æ³•ç™»å…¥
    Given æˆ‘åœ¨ç™»å…¥é é¢
    When æˆ‘è¼¸å…¥å¸³è™Ÿ "locked@example.com"
    And æˆ‘è¼¸å…¥å¯†ç¢¼ "Pass1234"
    And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
    Then æˆ‘æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "å¸³è™Ÿå·²è¢«é–å®š,è«‹è¯çµ¡å®¢æœ"
```

#### 7.1.4 Step Definitions å¯¦ä½œ

```python
# features/steps/login_steps.py
from behave import given, when, then
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import time

@given('ç³»çµ±ä¸­å­˜åœ¨ä»¥ä¸‹ä½¿ç”¨è€…:')
def step_impl(context):
    """åœ¨è³‡æ–™åº«ä¸­å»ºç«‹æ¸¬è©¦ç”¨æˆ¶"""
    for row in context.table:
        context.test_data.create_user(
            email=row['email'],
            password=row['password'],
            status=row['status']
        )

@given('æˆ‘åœ¨ç™»å…¥é é¢')
def step_impl(context):
    context.driver.get(context.base_url + '/login')
    # ç­‰å¾…é é¢è¼‰å…¥
    WebDriverWait(context.driver, 10).until(
        EC.presence_of_element_located((By.ID, 'email'))
    )

@when('æˆ‘è¼¸å…¥å¸³è™Ÿ "{email}"')
def step_impl(context, email):
    element = context.driver.find_element(By.ID, 'email')
    element.clear()
    element.send_keys(email)

@when('æˆ‘è¼¸å…¥å¯†ç¢¼ "{password}"')
def step_impl(context, password):
    element = context.driver.find_element(By.ID, 'password')
    element.clear()
    element.send_keys(password)

@when('æˆ‘å‹¾é¸ "{checkbox_name}"')
def step_impl(context, checkbox_name):
    checkbox = context.driver.find_element(By.ID, 'remember-me')
    if not checkbox.is_selected():
        checkbox.click()

@when('æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•')
def step_impl(context):
    button = context.driver.find_element(By.ID, 'login-btn')
    button.click()
    # ç­‰å¾…é é¢è·³è½‰æˆ–éŒ¯èª¤è¨Šæ¯
    time.sleep(1)

@when('æˆ‘ä½¿ç”¨éŒ¯èª¤å¯†ç¢¼å˜—è©¦ç™»å…¥ {count:d} æ¬¡,å¸³è™Ÿç‚º "{email}"')
def step_impl(context, count, email):
    for i in range(count):
        context.driver.get(context.base_url + '/login')
        context.driver.find_element(By.ID, 'email').send_keys(email)
        context.driver.find_element(By.ID, 'password').send_keys('WrongPass')
        context.driver.find_element(By.ID, 'login-btn').click()
        time.sleep(0.5)

@then('æˆ‘æ‡‰è©²çœ‹åˆ°æœƒå“¡é¦–é ')
def step_impl(context):
    WebDriverWait(context.driver, 10).until(
        EC.url_contains('/dashboard')
    )
    assert '/dashboard' in context.driver.current_url

@then('é é¢æ¨™é¡Œæ‡‰è©²æ˜¯ "{title}"')
def step_impl(context, title):
    h1 = context.driver.find_element(By.TAG_NAME, 'h1').text
    assert h1 == title, f"Expected '{title}', but got '{h1}'"

@then('é é¢æ‡‰è©²é¡¯ç¤º "{text}"')
def step_impl(context, text):
    page_text = context.driver.find_element(By.TAG_NAME, 'body').text
    assert text in page_text, f"Text '{text}' not found on page"

@then('ç³»çµ±æ‡‰è©²è¨­å®š Cookie "{cookie_name}" æœ‰æ•ˆæœŸç‚º {days:d} å¤©')
def step_impl(context, cookie_name, days):
    cookie = context.driver.get_cookie(cookie_name)
    assert cookie is not None, f"Cookie '{cookie_name}' not found"
    # é©—è­‰ Cookie æœ‰æ•ˆæœŸ(ç°¡åŒ–ç¤ºç¯„)
    assert 'expiry' in cookie

@then('æˆ‘æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "{error_message}"')
def step_impl(context, error_message):
    error_element = WebDriverWait(context.driver, 5).until(
        EC.presence_of_element_located((By.CLASS_NAME, 'error-message'))
    )
    assert error_message in error_element.text

@then('æˆ‘æ‡‰è©²ä»åœ¨ç™»å…¥é é¢')
def step_impl(context):
    assert '/login' in context.driver.current_url

@then('å¸³è™Ÿ "{email}" æ‡‰è©²è¢«é–å®š')
def step_impl(context, email):
    user = context.test_data.get_user(email)
    assert user['status'] == 'locked', f"User {email} is not locked"
```

#### 7.1.5 æ¡ˆä¾‹å›é¡§

**å­¸åˆ°ä»€éº¼**:
- âœ… ä½¿ç”¨ `Background` æº–å‚™æ¸¬è©¦è³‡æ–™
- âœ… ä½¿ç”¨ `Scenario Outline` æ¸¬è©¦å¤šç¨®é©—è­‰æƒ…æ³
- âœ… ä½¿ç”¨æ¨™ç±¤åˆ†é¡æ¸¬è©¦(`@smoke`, `@validation`, `@security`)
- âœ… Step Definitions ä¸­ä½¿ç”¨ Page Object æ¨¡å¼(ç°¡åŒ–ç‰ˆ)
- âœ… ç­‰å¾…æ©Ÿåˆ¶è™•ç†éåŒæ­¥è¼‰å…¥

**æ”¹å–„å»ºè­°**:
- ğŸ”„ å°‡ Page Object æ¨¡å¼å®Œæ•´åŒ–
- ğŸ”„ æå–å…±ç”¨æ­¥é©Ÿåˆ° `common_steps.py`
- ğŸ”„ å¢åŠ æˆªåœ–èˆ‡æ—¥èªŒè¨˜éŒ„
- ğŸ”„ åƒæ•¸åŒ–æ¸¬è©¦ç’°å¢ƒ(base_url)

---

### 7.2 æ¡ˆä¾‹äºŒ:éŠ€è¡Œè½‰å¸³æ¥­å‹™æµç¨‹

#### 7.2.1 éœ€æ±‚æè¿°

**æ¥­å‹™éœ€æ±‚**:
```
ä½œç‚º ç¶²è·¯éŠ€è¡Œä½¿ç”¨è€…
æˆ‘æƒ³è¦ è½‰å¸³çµ¦å…¶ä»–å¸³æˆ¶
ä»¥ä¾¿ é€²è¡Œé‡‘èäº¤æ˜“
```

**æ¥­å‹™è¦å‰‡**:
1. é¤˜é¡å¿…é ˆè¶³å¤ (å«æ‰‹çºŒè²»)
2. è½‰å¸³é™é¡:å–®ç­†æœ€é«˜ 50 è¬,æ¯æ—¥æœ€é«˜ 100 è¬
3. è½‰å¸³æ‰‹çºŒè²»:åŒè¡Œå…è²»,è·¨è¡Œæ¯ç­† 15 å…ƒ
4. éœ€è¦è¼¸å…¥äº¤æ˜“å¯†ç¢¼ç¢ºèª
5. è½‰å¸³å¾Œç™¼é€ç°¡è¨Šé€šçŸ¥

#### 7.2.2 Feature File

```gherkin
@banking @transfer @critical
Feature: éŠ€è¡Œè½‰å¸³åŠŸèƒ½
  ä½œç‚º ç¶²è·¯éŠ€è¡Œä½¿ç”¨è€…
  æˆ‘æƒ³è¦ è½‰å¸³çµ¦å…¶ä»–å¸³æˆ¶
  ä»¥ä¾¿ é€²è¡Œé‡‘èäº¤æ˜“

  Business Rules:
  - é¤˜é¡å¿…é ˆè¶³å¤ (å«æ‰‹çºŒè²»)
  - è½‰å¸³é™é¡:å–®ç­†æœ€é«˜ 50 è¬,æ¯æ—¥æœ€é«˜ 100 è¬
  - è½‰å¸³æ‰‹çºŒè²»:åŒè¡Œå…è²»,è·¨è¡Œæ¯ç­† 15 å…ƒ

  Background: æº–å‚™æ¸¬è©¦å¸³æˆ¶
    Given ç³»çµ±ä¸­å­˜åœ¨ä»¥ä¸‹å¸³æˆ¶:
      | account_number | bank_code | balance  | daily_limit |
      | 1234567890     | 001       | 1000000  | 0           |
      | 9876543210     | 001       | 500000   | 0           |
      | 5555555555     | 002       | 0        | 0           |
    And æˆ‘å·²ç™»å…¥å¸³è™Ÿ "1234567890"

  @smoke @happy-path
  Scenario: åŒè¡Œè½‰å¸³æˆåŠŸ
    Given æˆ‘åœ¨è½‰å¸³é é¢
    When æˆ‘è¼¸å…¥æ”¶æ¬¾å¸³è™Ÿ "9876543210"
    And æˆ‘è¼¸å…¥è½‰å¸³é‡‘é¡ "10000"
    And æˆ‘è¼¸å…¥å‚™è¨» "é‚„æ¬¾"
    And æˆ‘é»æ“Šä¸‹ä¸€æ­¥
    Then æˆ‘æ‡‰è©²çœ‹åˆ°è½‰å¸³ç¢ºèªé é¢
    And ç¢ºèªé é¢æ‡‰é¡¯ç¤º:
      | é …ç›®     | å€¼           |
      | æ”¶æ¬¾äºº   | 9876543210   |
      | é‡‘é¡     | 10,000       |
      | æ‰‹çºŒè²»   | 0            |
      | ç¸½é‡‘é¡   | 10,000       |
    When æˆ‘è¼¸å…¥äº¤æ˜“å¯†ç¢¼ "123456"
    And æˆ‘é»æ“Šç¢ºèªè½‰å¸³
    Then æˆ‘æ‡‰è©²çœ‹åˆ° "è½‰å¸³æˆåŠŸ" è¨Šæ¯
    And å¸³æˆ¶ "1234567890" é¤˜é¡æ‡‰è©²æ˜¯ "990000"
    And å¸³æˆ¶ "9876543210" é¤˜é¡æ‡‰è©²æ˜¯ "510000"
    And å¸³æˆ¶ "1234567890" ä»Šæ—¥è½‰å¸³é¡åº¦æ‡‰è©²æ˜¯ "10000"

  @happy-path
  Scenario: è·¨è¡Œè½‰å¸³æ‰£é™¤æ‰‹çºŒè²»
    Given æˆ‘åœ¨è½‰å¸³é é¢
    When æˆ‘è¼¸å…¥æ”¶æ¬¾å¸³è™Ÿ "5555555555"
    And æˆ‘è¼¸å…¥è½‰å¸³é‡‘é¡ "5000"
    And æˆ‘é»æ“Šä¸‹ä¸€æ­¥
    Then ç¢ºèªé é¢æ‡‰é¡¯ç¤º:
      | é …ç›®     | å€¼           |
      | æ”¶æ¬¾äºº   | 5555555555   |
      | é‡‘é¡     | 5,000        |
      | æ‰‹çºŒè²»   | 15           |
      | ç¸½é‡‘é¡   | 5,015        |
    When æˆ‘è¼¸å…¥äº¤æ˜“å¯†ç¢¼ "123456"
    And æˆ‘é»æ“Šç¢ºèªè½‰å¸³
    Then æˆ‘æ‡‰è©²çœ‹åˆ° "è½‰å¸³æˆåŠŸ" è¨Šæ¯
    And å¸³æˆ¶ "1234567890" é¤˜é¡æ‡‰è©²æ˜¯ "994985"
    And å¸³æˆ¶ "5555555555" é¤˜é¡æ‡‰è©²æ˜¯ "5000"

  @validation @boundary
  Scenario Outline: è½‰å¸³é‡‘é¡é©—è­‰
    Given æˆ‘åœ¨è½‰å¸³é é¢
    And å¸³æˆ¶ "1234567890" é¤˜é¡ç‚º "<balance>"
    And å¸³æˆ¶ "1234567890" ä»Šæ—¥å·²è½‰å¸³ "<daily_used>"
    When æˆ‘è¼¸å…¥æ”¶æ¬¾å¸³è™Ÿ "<target>"
    And æˆ‘è¼¸å…¥è½‰å¸³é‡‘é¡ "<amount>"
    And æˆ‘é»æ“Šä¸‹ä¸€æ­¥
    Then æˆ‘æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "<error_message>"

    Examples: ç„¡æ•ˆçš„è½‰å¸³æƒ…æ³
      | balance | daily_used | target     | amount  | error_message          |
      | 10000   | 0          | 9876543210 | 20000   | é¤˜é¡ä¸è¶³               |
      | 1000000 | 0          | 9876543210 | 600000  | è¶…éå–®ç­†è½‰å¸³é™é¡       |
      | 1000000 | 950000     | 9876543210 | 100000  | è¶…éæ¯æ—¥è½‰å¸³é™é¡       |
      | 1000000 | 0          | 5555555555 | 10000   | é¤˜é¡ä¸è¶³(å«æ‰‹çºŒè²»15å…ƒ) |
      | 1000000 | 0          | 9876543210 | 0       | é‡‘é¡å¿…é ˆå¤§æ–¼0          |
      | 1000000 | 0          | 9876543210 | -100    | é‡‘é¡å¿…é ˆå¤§æ–¼0          |

  @security
  Scenario: äº¤æ˜“å¯†ç¢¼éŒ¯èª¤
    Given æˆ‘åœ¨è½‰å¸³é é¢
    And æˆ‘å·²å¡«å¯«è½‰å¸³è³‡æ–™ä¸¦åˆ°é”ç¢ºèªé é¢
    When æˆ‘è¼¸å…¥äº¤æ˜“å¯†ç¢¼ "wrong-password"
    And æˆ‘é»æ“Šç¢ºèªè½‰å¸³
    Then æˆ‘æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "äº¤æ˜“å¯†ç¢¼éŒ¯èª¤"
    And å¸³æˆ¶é¤˜é¡æ‡‰ä¿æŒä¸è®Š

  @integration
  Scenario: è½‰å¸³å¾Œç™¼é€ç°¡è¨Šé€šçŸ¥
    Given æˆ‘åœ¨è½‰å¸³é é¢
    When æˆ‘æˆåŠŸè½‰å¸³ "10000" å…ƒçµ¦å¸³è™Ÿ "9876543210"
    Then ç³»çµ±æ‡‰è©²ç™¼é€ç°¡è¨Šçµ¦å¸³è™Ÿ "1234567890" çš„æ‰‹æ©Ÿ
    And ç°¡è¨Šå…§å®¹æ‡‰åŒ…å«:
      """
      æ‚¨å·²æˆåŠŸè½‰å¸³ 10,000 å…ƒè‡³å¸³è™Ÿ 9876543210
      é¤˜é¡: 990,000 å…ƒ
      """
```

#### 7.2.3 Step Definitions å¯¦ä½œ

```python
# features/steps/transfer_steps.py
from behave import given, when, then
from decimal import Decimal

@given('ç³»çµ±ä¸­å­˜åœ¨ä»¥ä¸‹å¸³æˆ¶:')
def step_impl(context):
    for row in context.table:
        context.bank_system.create_account(
            account_number=row['account_number'],
            bank_code=row['bank_code'],
            balance=Decimal(row['balance']),
            daily_limit=Decimal(row['daily_limit'])
        )

@given('æˆ‘å·²ç™»å…¥å¸³è™Ÿ "{account}"')
def step_impl(context, account):
    context.current_account = account
    context.bank_system.login(account)

@given('æˆ‘åœ¨è½‰å¸³é é¢')
def step_impl(context):
    context.transfer_page = context.bank_system.get_transfer_page()

@given('å¸³æˆ¶ "{account}" é¤˜é¡ç‚º "{balance}"')
def step_impl(context, account, balance):
    context.bank_system.set_balance(account, Decimal(balance))

@given('å¸³æˆ¶ "{account}" ä»Šæ—¥å·²è½‰å¸³ "{amount}"')
def step_impl(context, account, amount):
    context.bank_system.set_daily_used(account, Decimal(amount))

@when('æˆ‘è¼¸å…¥æ”¶æ¬¾å¸³è™Ÿ "{account}"')
def step_impl(context, account):
    context.transfer_page.enter_target_account(account)

@when('æˆ‘è¼¸å…¥è½‰å¸³é‡‘é¡ "{amount}"')
def step_impl(context, amount):
    context.transfer_page.enter_amount(amount)

@when('æˆ‘è¼¸å…¥å‚™è¨» "{note}"')
def step_impl(context, note):
    context.transfer_page.enter_note(note)

@when('æˆ‘é»æ“Šä¸‹ä¸€æ­¥')
def step_impl(context):
    context.confirm_page = context.transfer_page.click_next()

@when('æˆ‘è¼¸å…¥äº¤æ˜“å¯†ç¢¼ "{password}"')
def step_impl(context, password):
    context.confirm_page.enter_transaction_password(password)

@when('æˆ‘é»æ“Šç¢ºèªè½‰å¸³')
def step_impl(context):
    context.result_page = context.confirm_page.click_confirm()

@when('æˆ‘æˆåŠŸè½‰å¸³ "{amount}" å…ƒçµ¦å¸³è™Ÿ "{target}"')
def step_impl(context, amount, target):
    context.transfer_page = context.bank_system.get_transfer_page()
    context.transfer_page.enter_target_account(target)
    context.transfer_page.enter_amount(amount)
    context.transfer_page.click_next()
    context.confirm_page.enter_transaction_password('123456')
    context.result_page = context.confirm_page.click_confirm()

@then('æˆ‘æ‡‰è©²çœ‹åˆ°è½‰å¸³ç¢ºèªé é¢')
def step_impl(context):
    assert context.confirm_page is not None
    assert context.confirm_page.is_displayed()

@then('ç¢ºèªé é¢æ‡‰é¡¯ç¤º:')
def step_impl(context):
    for row in context.table:
        field = row['é …ç›®']
        expected_value = row['å€¼']
        actual_value = context.confirm_page.get_field_value(field)
        assert actual_value == expected_value, \
            f"{field}: expected '{expected_value}', got '{actual_value}'"

@then('æˆ‘æ‡‰è©²çœ‹åˆ° "{message}" è¨Šæ¯')
def step_impl(context, message):
    actual_message = context.result_page.get_message()
    assert message in actual_message

@then('å¸³æˆ¶ "{account}" é¤˜é¡æ‡‰è©²æ˜¯ "{expected_balance}"')
def step_impl(context, account, expected_balance):
    actual_balance = context.bank_system.get_balance(account)
    expected = Decimal(expected_balance)
    assert actual_balance == expected, \
        f"Account {account}: expected {expected}, got {actual_balance}"

@then('å¸³æˆ¶ "{account}" ä»Šæ—¥è½‰å¸³é¡åº¦æ‡‰è©²æ˜¯ "{expected_amount}"')
def step_impl(context, account, expected_amount):
    actual_amount = context.bank_system.get_daily_used(account)
    expected = Decimal(expected_amount)
    assert actual_amount == expected

@then('æˆ‘æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "{error_message}"')
def step_impl(context, error_message):
    actual_error = context.transfer_page.get_error_message()
    assert error_message in actual_error

@then('å¸³æˆ¶é¤˜é¡æ‡‰ä¿æŒä¸è®Š')
def step_impl(context):
    # é©—è­‰é¤˜é¡æœªæ”¹è®Š
    pass  # å¯¦ä½œé¤˜é¡æª¢æŸ¥é‚è¼¯

@then('ç³»çµ±æ‡‰è©²ç™¼é€ç°¡è¨Šçµ¦å¸³è™Ÿ "{account}" çš„æ‰‹æ©Ÿ')
def step_impl(context, account):
    sms_sent = context.bank_system.check_sms_sent(account)
    assert sms_sent, f"No SMS sent to account {account}"

@then('ç°¡è¨Šå…§å®¹æ‡‰åŒ…å«:')
def step_impl(context):
    expected_content = context.text
    actual_content = context.bank_system.get_last_sms_content()
    # ç°¡åŒ–é©—è­‰
    assert "è½‰å¸³" in actual_content
```

---

### ğŸ“ ç¬¬ä¸ƒç« ç¬¬ä¸€éƒ¨åˆ†ç¸½çµ

#### æœ¬ç¯€é‡é»

âœ… **Web UI æ¸¬è©¦æ¡ˆä¾‹**
- ç™»å…¥é©—è­‰æµç¨‹å®Œæ•´ç¯„ä¾‹
- ä½¿ç”¨ Background æº–å‚™æ¸¬è©¦è³‡æ–™
- Scenario Outline æ¸¬è©¦å¤šç¨®æƒ…æ³
- Selenium WebDriver æ•´åˆ

âœ… **æ¥­å‹™æµç¨‹æ¸¬è©¦æ¡ˆä¾‹**
- éŠ€è¡Œè½‰å¸³è¤‡é›œæ¥­å‹™è¦å‰‡
- æ‰‹çºŒè²»è¨ˆç®—èˆ‡é™é¡æª¢æŸ¥
- äº¤æ˜“å¯†ç¢¼èˆ‡å®‰å…¨é©—è­‰
- å¤šå¸³æˆ¶é¤˜é¡è®Šå‹•è¿½è¹¤

âœ… **å¯¦ä½œæŠ€å·§**
- Page Object æ¨¡å¼
- ç­‰å¾…èˆ‡åŒæ­¥è™•ç†
- å°æ•¸ç²¾åº¦è™•ç†(Decimal)
- æ¸¬è©¦è³‡æ–™ç®¡ç†

---

**æ¥ä¸‹ä¾†**:æˆ‘å€‘å°‡ç¹¼çºŒæ¢è¨æ‰¹æ¬¡ç³»çµ±æ¥­å‹™è¦å‰‡é©—è­‰ã€API è¡Œç‚ºæ¸¬è©¦,ä»¥åŠæ¡ˆä¾‹å›é¡§èˆ‡è¡Œç‚ºé‡æ§‹æŠ€å·§ã€‚

---

### 7.3 æ¡ˆä¾‹ä¸‰:æ‰¹æ¬¡ç³»çµ±æ¥­å‹™è¦å‰‡é©—è­‰

#### 7.3.1 éœ€æ±‚æè¿°

**æ¥­å‹™éœ€æ±‚**:
```
ä½œç‚º ç³»çµ±ç®¡ç†å“¡
æˆ‘æƒ³è¦ åŸ·è¡Œæ¯æ—¥å¸³å‹™æ‰¹æ¬¡è™•ç†
ä»¥ä¾¿ è¨ˆç®—æœƒå“¡é»æ•¸èˆ‡ç­‰ç´š
```

**æ¥­å‹™è¦å‰‡**:
1. æ¯æ—¥å‡Œæ™¨ 2:00 åŸ·è¡Œ
2. è¨ˆç®—å‰ä¸€æ—¥æ‰€æœ‰äº¤æ˜“çš„é»æ•¸
3. é»æ•¸ç´¯ç©è¦å‰‡:æ¶ˆè²»100å…ƒ=1é»,ç”Ÿæ—¥ç•¶æœˆé›™å€
4. æœƒå“¡ç­‰ç´šå‡ç´š:æ™®å¡(0-999é»)ã€é‡‘å¡(1000-4999é»)ã€ç™½é‡‘å¡(5000é»ä»¥ä¸Š)
5. è™•ç†å¤±æ•—éœ€è¨˜éŒ„éŒ¯èª¤ä¸¦ç™¼é€å‘Šè­¦

#### 7.3.2 Feature File

```gherkin
@batch @points-calculation @daily
Feature: æ¯æ—¥é»æ•¸è¨ˆç®—æ‰¹æ¬¡
  ä½œç‚º ç³»çµ±ç®¡ç†å“¡
  æˆ‘æƒ³è¦ åŸ·è¡Œæ¯æ—¥å¸³å‹™æ‰¹æ¬¡è™•ç†
  ä»¥ä¾¿ è¨ˆç®—æœƒå“¡é»æ•¸èˆ‡ç­‰ç´š

  Business Rules:
  - è¨ˆç®—å‰ä¸€æ—¥æ‰€æœ‰äº¤æ˜“çš„é»æ•¸
  - é»æ•¸ç´¯ç©:æ¶ˆè²»100å…ƒ=1é»,ç”Ÿæ—¥ç•¶æœˆé›™å€
  - ç­‰ç´š:æ™®å¡(0-999)ã€é‡‘å¡(1000-4999)ã€ç™½é‡‘å¡(5000+)

  Background: æº–å‚™æ¸¬è©¦è³‡æ–™
    Given ä»Šå¤©æ˜¯ "2025-01-15"
    And ç³»çµ±ä¸­å­˜åœ¨ä»¥ä¸‹æœƒå“¡:
      | member_id | name | birthday   | current_points | level    |
      | M001      | å¼µä¸‰ | 1990-01-10 | 900            | regular  |
      | M002      | æå›› | 1985-05-20 | 1500           | gold     |
      | M003      | ç‹äº” | 1992-01-05 | 4900           | gold     |

  @happy-path @smoke
  Scenario: ä¸€èˆ¬æ¶ˆè²»é»æ•¸è¨ˆç®—
    Given æœƒå“¡ "M001" æ˜¨æ—¥æœ‰ä»¥ä¸‹äº¤æ˜“:
      | transaction_id | amount | type     |
      | T001           | 15000  | purchase |
      | T002           | 5000   | purchase |
    When åŸ·è¡Œæ¯æ—¥é»æ•¸è¨ˆç®—æ‰¹æ¬¡
    Then æœƒå“¡ "M001" çš„é»æ•¸æ‡‰è©²å¢åŠ  200
    And æœƒå“¡ "M001" çš„ç¸½é»æ•¸æ‡‰è©²æ˜¯ 1100
    And æœƒå“¡ "M001" çš„ç­‰ç´šæ‡‰è©²æ˜¯ "gold"

  @business-rule
  Scenario: ç”Ÿæ—¥ç•¶æœˆé›™å€é»æ•¸
    Given æœƒå“¡ "M003" æ˜¨æ—¥æœ‰ä»¥ä¸‹äº¤æ˜“:
      | transaction_id | amount | type     |
      | T003           | 10000  | purchase |
    When åŸ·è¡Œæ¯æ—¥é»æ•¸è¨ˆç®—æ‰¹æ¬¡
    Then æœƒå“¡ "M003" çš„é»æ•¸æ‡‰è©²å¢åŠ  200
    And è¨ˆç®—æ˜ç´°æ‡‰è©²é¡¯ç¤º "ç”Ÿæ—¥ç•¶æœˆé›™å€"
    And æœƒå“¡ "M003" çš„ç¸½é»æ•¸æ‡‰è©²æ˜¯ 5100
    And æœƒå“¡ "M003" çš„ç­‰ç´šæ‡‰è©²å¾ "gold" å‡ç´šç‚º "platinum"

  @business-rule
  Scenario Outline: æœƒå“¡ç­‰ç´šå‡ç´šè¦å‰‡
    Given æœƒå“¡ "<member>" æ˜¨æ—¥æœ‰ä»¥ä¸‹äº¤æ˜“:
      | transaction_id | amount     | type     |
      | T004           | <amount>   | purchase |
    When åŸ·è¡Œæ¯æ—¥é»æ•¸è¨ˆç®—æ‰¹æ¬¡
    Then æœƒå“¡ "<member>" çš„ç­‰ç´šæ‡‰è©²æ˜¯ "<expected_level>"

    Examples: ç­‰ç´šè®ŠåŒ–
      | member | amount | expected_level |
      | M001   | 15000  | gold           |
      | M002   | 250000 | platinum       |
      | M003   | 15000  | platinum       |

  @validation @error-handling
  Scenario: é‡è¤‡åŸ·è¡Œæ‰¹æ¬¡ä¸é‡è¤‡è¨ˆç®—é»æ•¸
    Given æœƒå“¡ "M001" æ˜¨æ—¥æœ‰ä»¥ä¸‹äº¤æ˜“:
      | transaction_id | amount | type     |
      | T005           | 10000  | purchase |
    And æ¯æ—¥é»æ•¸è¨ˆç®—æ‰¹æ¬¡å·²åŸ·è¡Œéä¸€æ¬¡
    When åŸ·è¡Œæ¯æ—¥é»æ•¸è¨ˆç®—æ‰¹æ¬¡
    Then æ‰¹æ¬¡æ‡‰è©²é¡¯ç¤º "ä»Šæ—¥æ‰¹æ¬¡å·²åŸ·è¡Œ,ç•¥é"
    And æœƒå“¡ "M001" çš„é»æ•¸æ‡‰è©²ç¶­æŒä¸è®Š

  @error-handling
  Scenario: æ‰¹æ¬¡åŸ·è¡ŒéŒ¯èª¤å‘Šè­¦
    Given è³‡æ–™åº«é€£ç·šç™¼ç”ŸéŒ¯èª¤
    When åŸ·è¡Œæ¯æ—¥é»æ•¸è¨ˆç®—æ‰¹æ¬¡
    Then æ‰¹æ¬¡æ‡‰è©²å¤±æ•—
    And ç³»çµ±æ‡‰è©²è¨˜éŒ„éŒ¯èª¤æ—¥èªŒ "è³‡æ–™åº«é€£ç·šå¤±æ•—"
    And ç³»çµ±æ‡‰è©²ç™¼é€å‘Šè­¦éƒµä»¶çµ¦ "admin@example.com"

  @reporting
  Scenario: æ‰¹æ¬¡åŸ·è¡Œå ±å‘Š
    Given æœƒå“¡ "M001", "M002", "M003" æ˜¨æ—¥éƒ½æœ‰äº¤æ˜“
    When åŸ·è¡Œæ¯æ—¥é»æ•¸è¨ˆç®—æ‰¹æ¬¡
    Then æ‰¹æ¬¡å ±å‘Šæ‡‰è©²åŒ…å«:
      | é …ç›®           | å€¼ |
      | è™•ç†æœƒå“¡æ•¸     | 3  |
      | æˆåŠŸè¨ˆç®—ç­†æ•¸   | 3  |
      | å¤±æ•—ç­†æ•¸       | 0  |
      | ç­‰ç´šå‡ç´šäººæ•¸   | 1  |
      | åŸ·è¡Œæ™‚é–“       | <2ç§’ |
```

#### 7.3.3 Step Definitions å¯¦ä½œ

```python
# features/steps/batch_steps.py
from behave import given, when, then
from datetime import datetime, timedelta
from decimal import Decimal

@given('ä»Šå¤©æ˜¯ "{date}"')
def step_impl(context, date):
    context.current_date = datetime.strptime(date, '%Y-%m-%d')
    context.batch_system.set_current_date(context.current_date)

@given('ç³»çµ±ä¸­å­˜åœ¨ä»¥ä¸‹æœƒå“¡:')
def step_impl(context):
    for row in context.table:
        context.batch_system.create_member(
            member_id=row['member_id'],
            name=row['name'],
            birthday=datetime.strptime(row['birthday'], '%Y-%m-%d'),
            current_points=int(row['current_points']),
            level=row['level']
        )

@given('æœƒå“¡ "{member_id}" æ˜¨æ—¥æœ‰ä»¥ä¸‹äº¤æ˜“:')
def step_impl(context, member_id):
    yesterday = context.current_date - timedelta(days=1)
    for row in context.table:
        context.batch_system.create_transaction(
            transaction_id=row['transaction_id'],
            member_id=member_id,
            amount=Decimal(row['amount']),
            trans_type=row['type'],
            trans_date=yesterday
        )

@given('æ¯æ—¥é»æ•¸è¨ˆç®—æ‰¹æ¬¡å·²åŸ·è¡Œéä¸€æ¬¡')
def step_impl(context):
    context.batch_system.run_daily_points_calculation()
    context.first_run_completed = True

@given('è³‡æ–™åº«é€£ç·šç™¼ç”ŸéŒ¯èª¤')
def step_impl(context):
    context.batch_system.simulate_db_error()

@when('åŸ·è¡Œæ¯æ—¥é»æ•¸è¨ˆç®—æ‰¹æ¬¡')
def step_impl(context):
    context.batch_result = context.batch_system.run_daily_points_calculation()

@then('æœƒå“¡ "{member_id}" çš„é»æ•¸æ‡‰è©²å¢åŠ  {points:d}')
def step_impl(context, member_id, points):
    actual_increase = context.batch_system.get_points_increase(member_id)
    assert actual_increase == points, \
        f"Expected {points} points, but got {actual_increase}"

@then('æœƒå“¡ "{member_id}" çš„ç¸½é»æ•¸æ‡‰è©²æ˜¯ {total:d}')
def step_impl(context, member_id, total):
    actual_total = context.batch_system.get_member_points(member_id)
    assert actual_total == total, \
        f"Expected {total} total points, but got {actual_total}"

@then('æœƒå“¡ "{member_id}" çš„ç­‰ç´šæ‡‰è©²æ˜¯ "{level}"')
def step_impl(context, member_id, level):
    actual_level = context.batch_system.get_member_level(member_id)
    assert actual_level == level, \
        f"Expected level '{level}', but got '{actual_level}'"

@then('æœƒå“¡ "{member_id}" çš„ç­‰ç´šæ‡‰è©²å¾ "{old_level}" å‡ç´šç‚º "{new_level}"')
def step_impl(context, member_id, old_level, new_level):
    upgrade_log = context.batch_system.get_upgrade_log(member_id)
    assert upgrade_log['from_level'] == old_level
    assert upgrade_log['to_level'] == new_level

@then('è¨ˆç®—æ˜ç´°æ‡‰è©²é¡¯ç¤º "{note}"')
def step_impl(context, note):
    details = context.batch_result.get_calculation_details()
    assert note in details

@then('æ‰¹æ¬¡æ‡‰è©²é¡¯ç¤º "{message}"')
def step_impl(context, message):
    assert context.batch_result.message == message

@then('æœƒå“¡ "{member_id}" çš„é»æ•¸æ‡‰è©²ç¶­æŒä¸è®Š')
def step_impl(context, member_id):
    points_before = context.batch_system.get_member_points_before_batch(member_id)
    points_after = context.batch_system.get_member_points(member_id)
    assert points_before == points_after

@then('æ‰¹æ¬¡æ‡‰è©²å¤±æ•—')
def step_impl(context):
    assert context.batch_result.status == 'failed'

@then('ç³»çµ±æ‡‰è©²è¨˜éŒ„éŒ¯èª¤æ—¥èªŒ "{log_message}"')
def step_impl(context, log_message):
    error_logs = context.batch_system.get_error_logs()
    assert any(log_message in log for log in error_logs)

@then('ç³»çµ±æ‡‰è©²ç™¼é€å‘Šè­¦éƒµä»¶çµ¦ "{email}"')
def step_impl(context, email):
    sent_emails = context.batch_system.get_sent_emails()
    assert any(email in mail['to'] for mail in sent_emails)

@then('æ‰¹æ¬¡å ±å‘Šæ‡‰è©²åŒ…å«:')
def step_impl(context):
    report = context.batch_result.get_report()
    for row in context.table:
        field = row['é …ç›®']
        expected_value = row['å€¼']
        actual_value = str(report[field])
        
        if '<' in expected_value:
            # è™•ç† "<2ç§’" é€™ç¨®æƒ…æ³
            threshold = int(expected_value.replace('<', '').replace('ç§’', ''))
            actual_seconds = int(actual_value.replace('ç§’', ''))
            assert actual_seconds < threshold
        else:
            assert actual_value == expected_value
```

---

### 7.4 æ¡ˆä¾‹å››:API è¡Œç‚ºæ¸¬è©¦

#### 7.4.1 éœ€æ±‚æè¿°

**æ¥­å‹™éœ€æ±‚**:
```
ä½œç‚º ç¬¬ä¸‰æ–¹æ‡‰ç”¨é–‹ç™¼è€…
æˆ‘æƒ³è¦ é€é RESTful API æŸ¥è©¢èˆ‡å»ºç«‹è¨‚å–®
ä»¥ä¾¿ æ•´åˆæˆ‘çš„æ‡‰ç”¨ç³»çµ±
```

**API è¦æ ¼**:
- `GET /api/orders/{order_id}` - æŸ¥è©¢è¨‚å–®
- `POST /api/orders` - å»ºç«‹è¨‚å–®
- `PUT /api/orders/{order_id}/cancel` - å–æ¶ˆè¨‚å–®
- éœ€è¦ Bearer Token èªè­‰

#### 7.4.2 Feature File

```gherkin
@api @orders @rest
Feature: è¨‚å–® API
  ä½œç‚º ç¬¬ä¸‰æ–¹æ‡‰ç”¨é–‹ç™¼è€…
  æˆ‘æƒ³è¦ é€é RESTful API æŸ¥è©¢èˆ‡å»ºç«‹è¨‚å–®
  ä»¥ä¾¿ æ•´åˆæˆ‘çš„æ‡‰ç”¨ç³»çµ±

  Background: API èªè­‰
    Given æˆ‘æœ‰æœ‰æ•ˆçš„ API Token
    And API Base URL æ˜¯ "https://api.example.com"

  @smoke @get
  Scenario: æŸ¥è©¢å­˜åœ¨çš„è¨‚å–®
    Given ç³»çµ±ä¸­å­˜åœ¨è¨‚å–® "ORD-001",è³‡æ–™å¦‚ä¸‹:
      | customer_name | amount | status  |
      | å¼µä¸‰          | 15000  | pending |
    When æˆ‘ç™¼é€ GET è«‹æ±‚åˆ° "/api/orders/ORD-001"
    Then HTTP ç‹€æ…‹ç¢¼æ‡‰è©²æ˜¯ 200
    And å›æ‡‰ JSON æ‡‰è©²åŒ…å«:
      """
      {
        "order_id": "ORD-001",
        "customer_name": "å¼µä¸‰",
        "amount": 15000,
        "status": "pending"
      }
      """

  @validation @get
  Scenario: æŸ¥è©¢ä¸å­˜åœ¨çš„è¨‚å–®
    When æˆ‘ç™¼é€ GET è«‹æ±‚åˆ° "/api/orders/INVALID"
    Then HTTP ç‹€æ…‹ç¢¼æ‡‰è©²æ˜¯ 404
    And å›æ‡‰ JSON æ‡‰è©²åŒ…å«:
      """
      {
        "error": "Order not found",
        "message": "è¨‚å–® INVALID ä¸å­˜åœ¨"
      }
      """

  @smoke @post
  Scenario: æˆåŠŸå»ºç«‹è¨‚å–®
    When æˆ‘ç™¼é€ POST è«‹æ±‚åˆ° "/api/orders",å…§å®¹ç‚º:
      """
      {
        "customer_name": "æå››",
        "items": [
          {"product_id": "P001", "quantity": 2, "price": 500},
          {"product_id": "P002", "quantity": 1, "price": 1000}
        ],
        "shipping_address": "å°åŒ—å¸‚ä¿¡ç¾©å€"
      }
      """
    Then HTTP ç‹€æ…‹ç¢¼æ‡‰è©²æ˜¯ 201
    And å›æ‡‰æ‡‰è©²åŒ…å« Header "Location"
    And å›æ‡‰ JSON çš„ "order_id" æ‡‰è©²ä¸ç‚ºç©º
    And å›æ‡‰ JSON çš„ "amount" æ‡‰è©²æ˜¯ 2000
    And å›æ‡‰ JSON çš„ "status" æ‡‰è©²æ˜¯ "pending"

  @validation @post
  Scenario Outline: å»ºç«‹è¨‚å–®æ™‚çš„æ¬„ä½é©—è­‰
    When æˆ‘ç™¼é€ POST è«‹æ±‚åˆ° "/api/orders",å…§å®¹ç‚º:
      """
      <request_body>
      """
    Then HTTP ç‹€æ…‹ç¢¼æ‡‰è©²æ˜¯ <status_code>
    And å›æ‡‰ JSON çš„ "error" æ‡‰è©²æ˜¯ "<error_message>"

    Examples: ç„¡æ•ˆçš„è¨‚å–®è³‡æ–™
      | request_body                                          | status_code | error_message          |
      | {}                                                    | 400         | customer_name is required |
      | {"customer_name": ""}                                 | 400         | customer_name cannot be empty |
      | {"customer_name": "ç‹äº”", "items": []}                | 400         | items cannot be empty  |
      | {"customer_name": "è¶™å…­", "items": [{"product_id": "P001", "quantity": 0}]} | 400 | quantity must be positive |

  @put @business-rule
  Scenario: å–æ¶ˆè¨‚å–®
    Given ç³»çµ±ä¸­å­˜åœ¨è¨‚å–® "ORD-002",ç‹€æ…‹ç‚º "pending"
    When æˆ‘ç™¼é€ PUT è«‹æ±‚åˆ° "/api/orders/ORD-002/cancel"
    Then HTTP ç‹€æ…‹ç¢¼æ‡‰è©²æ˜¯ 200
    And å›æ‡‰ JSON çš„ "status" æ‡‰è©²æ˜¯ "cancelled"
    And è¨‚å–® "ORD-002" åœ¨è³‡æ–™åº«ä¸­çš„ç‹€æ…‹æ‡‰è©²æ˜¯ "cancelled"

  @validation @business-rule
  Scenario: ç„¡æ³•å–æ¶ˆå·²å®Œæˆçš„è¨‚å–®
    Given ç³»çµ±ä¸­å­˜åœ¨è¨‚å–® "ORD-003",ç‹€æ…‹ç‚º "completed"
    When æˆ‘ç™¼é€ PUT è«‹æ±‚åˆ° "/api/orders/ORD-003/cancel"
    Then HTTP ç‹€æ…‹ç¢¼æ‡‰è©²æ˜¯ 400
    And å›æ‡‰ JSON æ‡‰è©²åŒ…å«:
      """
      {
        "error": "Cannot cancel order",
        "message": "è¨‚å–®å·²å®Œæˆ,ç„¡æ³•å–æ¶ˆ"
      }
      """

  @security @authentication
  Scenario: æ²’æœ‰ Token ç„¡æ³•å­˜å– API
    Given æˆ‘æ²’æœ‰ API Token
    When æˆ‘ç™¼é€ GET è«‹æ±‚åˆ° "/api/orders/ORD-001"
    Then HTTP ç‹€æ…‹ç¢¼æ‡‰è©²æ˜¯ 401
    And å›æ‡‰ JSON çš„ "error" æ‡‰è©²æ˜¯ "Unauthorized"

  @security @authentication
  Scenario: ç„¡æ•ˆçš„ Token ç„¡æ³•å­˜å– API
    Given æˆ‘æœ‰ç„¡æ•ˆçš„ API Token
    When æˆ‘ç™¼é€ GET è«‹æ±‚åˆ° "/api/orders/ORD-001"
    Then HTTP ç‹€æ…‹ç¢¼æ‡‰è©²æ˜¯ 401
    And å›æ‡‰ JSON çš„ "error" æ‡‰è©²æ˜¯ "Invalid token"
```

#### 7.4.3 Step Definitions å¯¦ä½œ

```python
# features/steps/api_steps.py
from behave import given, when, then
import requests
import json

@given('æˆ‘æœ‰æœ‰æ•ˆçš„ API Token')
def step_impl(context):
    context.api_token = "valid-test-token-12345"
    context.headers = {
        'Authorization': f'Bearer {context.api_token}',
        'Content-Type': 'application/json'
    }

@given('æˆ‘æ²’æœ‰ API Token')
def step_impl(context):
    context.headers = {
        'Content-Type': 'application/json'
    }

@given('æˆ‘æœ‰ç„¡æ•ˆçš„ API Token')
def step_impl(context):
    context.headers = {
        'Authorization': 'Bearer invalid-token',
        'Content-Type': 'application/json'
    }

@given('API Base URL æ˜¯ "{base_url}"')
def step_impl(context, base_url):
    context.base_url = base_url

@given('ç³»çµ±ä¸­å­˜åœ¨è¨‚å–® "{order_id}",è³‡æ–™å¦‚ä¸‹:')
def step_impl(context, order_id):
    order_data = {}
    for row in context.table:
        for key, value in zip(row.headings, row.cells):
            order_data[key] = value
    
    context.api_system.create_order(order_id, order_data)

@given('ç³»çµ±ä¸­å­˜åœ¨è¨‚å–® "{order_id}",ç‹€æ…‹ç‚º "{status}"')
def step_impl(context, order_id, status):
    context.api_system.create_order(order_id, {'status': status})

@when('æˆ‘ç™¼é€ GET è«‹æ±‚åˆ° "{endpoint}"')
def step_impl(context, endpoint):
    url = context.base_url + endpoint
    context.response = requests.get(url, headers=context.headers)

@when('æˆ‘ç™¼é€ POST è«‹æ±‚åˆ° "{endpoint}",å…§å®¹ç‚º:')
def step_impl(context, endpoint):
    url = context.base_url + endpoint
    request_body = json.loads(context.text)
    context.response = requests.post(
        url,
        headers=context.headers,
        json=request_body
    )

@when('æˆ‘ç™¼é€ PUT è«‹æ±‚åˆ° "{endpoint}"')
def step_impl(context, endpoint):
    url = context.base_url + endpoint
    context.response = requests.put(url, headers=context.headers)

@then('HTTP ç‹€æ…‹ç¢¼æ‡‰è©²æ˜¯ {status_code:d}')
def step_impl(context, status_code):
    assert context.response.status_code == status_code, \
        f"Expected {status_code}, got {context.response.status_code}"

@then('å›æ‡‰ JSON æ‡‰è©²åŒ…å«:')
def step_impl(context):
    expected_json = json.loads(context.text)
    actual_json = context.response.json()
    
    for key, expected_value in expected_json.items():
        assert key in actual_json, f"Key '{key}' not found in response"
        assert actual_json[key] == expected_value, \
            f"{key}: expected '{expected_value}', got '{actual_json[key]}'"

@then('å›æ‡‰æ‡‰è©²åŒ…å« Header "{header_name}"')
def step_impl(context, header_name):
    assert header_name in context.response.headers, \
        f"Header '{header_name}' not found"

@then('å›æ‡‰ JSON çš„ "{field}" æ‡‰è©²ä¸ç‚ºç©º')
def step_impl(context, field):
    actual_json = context.response.json()
    assert field in actual_json
    assert actual_json[field] is not None
    assert actual_json[field] != ""

@then('å›æ‡‰ JSON çš„ "{field}" æ‡‰è©²æ˜¯ {value:d}')
def step_impl(context, field, value):
    actual_json = context.response.json()
    assert actual_json[field] == value

@then('å›æ‡‰ JSON çš„ "{field}" æ‡‰è©²æ˜¯ "{value}"')
def step_impl(context, field, value):
    actual_json = context.response.json()
    assert actual_json[field] == value

@then('è¨‚å–® "{order_id}" åœ¨è³‡æ–™åº«ä¸­çš„ç‹€æ…‹æ‡‰è©²æ˜¯ "{status}"')
def step_impl(context, order_id, status):
    actual_status = context.api_system.get_order_status(order_id)
    assert actual_status == status
```

---

### 7.5 æ¡ˆä¾‹å›é¡§èˆ‡è¡Œç‚ºé‡æ§‹

#### 7.5.1 Feature Files å“è³ªè©•ä¼°

**è©•ä¼°ç¶­åº¦**:

```mermaid
graph TB
    Quality[Feature Quality]
    
    Quality --> A[å¯è®€æ€§]
    A --> A1[æ¥­å‹™èªè¨€]
    A --> A2[æ¸…æ™°çµæ§‹]
    A --> A3[é©ç•¶è¨»è§£]
    
    Quality --> B[å¯ç¶­è­·æ€§]
    B --> B1[é¿å…é‡è¤‡]
    B --> B2[é©ç•¶æŠ½è±¡]
    B --> B3[ç‰ˆæœ¬æ§ç®¡]
    
    Quality --> C[å®Œæ•´æ€§]
    C --> C1[Happy Path]
    C --> C2[ç•°å¸¸æƒ…æ³]
    C --> C3[é‚Šç•Œæ¢ä»¶]
    
    Quality --> D[å¯æ¸¬è©¦æ€§]
    D --> D1[Step å¯å¯¦ä½œ]
    D --> D2[ç¨ç«‹æ€§]
    D --> D3[å¯é‡ç¾æ€§]
    
    style Quality fill:#f96,stroke:#333,stroke-width:4px
```

#### 7.5.2 å¸¸è¦‹é‡æ§‹æ¨¡å¼

**æ¨¡å¼ 1:æå–å…±ç”¨æ­¥é©Ÿåˆ° Background**

âŒ **é‡æ§‹å‰**:

```gherkin
Scenario: æŸ¥è©¢è¨‚å–®
  Given æˆ‘å·²ç™»å…¥ç³»çµ±
  And æˆ‘åœ¨è¨‚å–®åˆ—è¡¨é é¢
  When æˆ‘è¼¸å…¥è¨‚å–®ç·¨è™Ÿ "ORD-001"
  Then æˆ‘æ‡‰è©²çœ‹åˆ°è¨‚å–®è©³æƒ…

Scenario: å–æ¶ˆè¨‚å–®
  Given æˆ‘å·²ç™»å…¥ç³»çµ±
  And æˆ‘åœ¨è¨‚å–®åˆ—è¡¨é é¢
  When æˆ‘é»æ“Šå–æ¶ˆè¨‚å–® "ORD-001"
  Then è¨‚å–®æ‡‰è©²è¢«å–æ¶ˆ
```

âœ… **é‡æ§‹å¾Œ**:

```gherkin
Background:
  Given æˆ‘å·²ç™»å…¥ç³»çµ±
  And æˆ‘åœ¨è¨‚å–®åˆ—è¡¨é é¢

Scenario: æŸ¥è©¢è¨‚å–®
  When æˆ‘è¼¸å…¥è¨‚å–®ç·¨è™Ÿ "ORD-001"
  Then æˆ‘æ‡‰è©²çœ‹åˆ°è¨‚å–®è©³æƒ…

Scenario: å–æ¶ˆè¨‚å–®
  When æˆ‘é»æ“Šå–æ¶ˆè¨‚å–® "ORD-001"
  Then è¨‚å–®æ‡‰è©²è¢«å–æ¶ˆ
```

**æ¨¡å¼ 2:åˆä½µç›¸ä¼¼å ´æ™¯ç‚º Scenario Outline**

âŒ **é‡æ§‹å‰**:

```gherkin
Scenario: è½‰å¸³é‡‘é¡ç‚º0
  When æˆ‘è¼¸å…¥è½‰å¸³é‡‘é¡ "0"
  Then æˆ‘æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "é‡‘é¡å¿…é ˆå¤§æ–¼0"

Scenario: è½‰å¸³é‡‘é¡ç‚ºè² æ•¸
  When æˆ‘è¼¸å…¥è½‰å¸³é‡‘é¡ "-100"
  Then æˆ‘æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "é‡‘é¡å¿…é ˆå¤§æ–¼0"

Scenario: è½‰å¸³é‡‘é¡è¶…éé™é¡
  When æˆ‘è¼¸å…¥è½‰å¸³é‡‘é¡ "1000000"
  Then æˆ‘æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "è¶…éå–®ç­†è½‰å¸³é™é¡"
```

âœ… **é‡æ§‹å¾Œ**:

```gherkin
Scenario Outline: è½‰å¸³é‡‘é¡é©—è­‰
  When æˆ‘è¼¸å…¥è½‰å¸³é‡‘é¡ "<amount>"
  Then æˆ‘æ‡‰è©²çœ‹åˆ°éŒ¯èª¤è¨Šæ¯ "<error>"

  Examples:
    | amount  | error            |
    | 0       | é‡‘é¡å¿…é ˆå¤§æ–¼0    |
    | -100    | é‡‘é¡å¿…é ˆå¤§æ–¼0    |
    | 1000000 | è¶…éå–®ç­†è½‰å¸³é™é¡ |
```

**æ¨¡å¼ 3:æ‹†åˆ†éå¤§çš„ Feature**

âŒ **é‡æ§‹å‰**:

```gherkin
Feature: æœƒå“¡ç®¡ç†
  Scenario: è¨»å†Šæœƒå“¡
  Scenario: æœƒå“¡ç™»å…¥
  Scenario: ä¿®æ”¹æœƒå“¡è³‡æ–™
  Scenario: æœƒå“¡é»æ•¸ç´¯ç©
  Scenario: æœƒå“¡ç­‰ç´šå‡ç´š
  Scenario: æœƒå“¡å„ªæƒ åˆ¸ç™¼æ”¾
  ... (å…± 20 å€‹ Scenarios)
```

âœ… **é‡æ§‹å¾Œ**:

```gherkin
# member_registration.feature
Feature: æœƒå“¡è¨»å†Š
  Scenario: è¨»å†Šæœƒå“¡

# member_authentication.feature
Feature: æœƒå“¡èªè­‰
  Scenario: æœƒå“¡ç™»å…¥
  Scenario: æœƒå“¡ç™»å‡º

# member_profile.feature
Feature: æœƒå“¡è³‡æ–™ç®¡ç†
  Scenario: ä¿®æ”¹æœƒå“¡è³‡æ–™

# member_loyalty.feature
Feature: æœƒå“¡å¿ èª åº¦è¨ˆç•«
  Scenario: æœƒå“¡é»æ•¸ç´¯ç©
  Scenario: æœƒå“¡ç­‰ç´šå‡ç´š
  Scenario: æœƒå“¡å„ªæƒ åˆ¸ç™¼æ”¾
```

**æ¨¡å¼ 4:æ¶ˆé™¤æŠ€è¡“ç´°ç¯€**

âŒ **é‡æ§‹å‰**:

```gherkin
When æˆ‘åœ¨ "username" æ¬„ä½è¼¸å…¥ "user@example.com"
And æˆ‘åœ¨ "password" æ¬„ä½è¼¸å…¥ "Pass1234"
And æˆ‘é»æ“Š id ç‚º "login-btn" çš„æŒ‰éˆ•
Then HTTP å›æ‡‰ç¢¼æ‡‰è©²æ˜¯ 200
And Session Cookie æ‡‰è©²åŒ…å« "user_id"
```

âœ… **é‡æ§‹å¾Œ**:

```gherkin
When æˆ‘è¼¸å…¥å¸³è™Ÿ "user@example.com"
And æˆ‘è¼¸å…¥å¯†ç¢¼ "Pass1234"
And æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•
Then æˆ‘æ‡‰è©²æˆåŠŸç™»å…¥
And ç³»çµ±æ‡‰è©²è¨˜ä½æˆ‘çš„ç™»å…¥ç‹€æ…‹
```

---

### ğŸ“ ç¬¬ä¸ƒç« ç¸½çµèˆ‡æœ€ä½³å¯¦å‹™

#### é—œéµè¦é»å›é¡§

âœ… **å››é¡å¯¦æˆ°æ¡ˆä¾‹**
- Web UI:ç™»å…¥é©—è­‰æµç¨‹
- æ¥­å‹™æµç¨‹:éŠ€è¡Œè½‰å¸³
- æ‰¹æ¬¡ç³»çµ±:é»æ•¸è¨ˆç®—
- API æ¸¬è©¦:RESTful è¨‚å–® API

âœ… **æ¸¬è©¦è¨­è¨ˆåŸå‰‡**
- æ¥­å‹™èªè¨€å„ªå…ˆ
- æ¶µè“‹ Happy Path + ç•°å¸¸æƒ…æ³
- ä½¿ç”¨ Scenario Outline æå‡æ•ˆç‡
- Background æ¸›å°‘é‡è¤‡

âœ… **å¯¦ä½œæŠ€å·§**
- Page Object æ¨¡å¼(Web UI)
- API æ¸¬è©¦æ•´åˆ
- æ‰¹æ¬¡åŸ·è¡Œé©—è­‰
- åƒæ•¸åŒ–èˆ‡è³‡æ–™é©…å‹•

âœ… **é‡æ§‹æ¨¡å¼**
- æå–å…±ç”¨æ­¥é©Ÿ
- åˆä½µç›¸ä¼¼å ´æ™¯
- æ‹†åˆ†å¤§ Feature
- æ¶ˆé™¤æŠ€è¡“ç´°ç¯€

---

#### ğŸ¯ æª¢æŸ¥æ¸…å–®:æ’°å¯«é«˜å“è³ª Feature Files

**çµæ§‹å±¤é¢**:
- [ ] Feature æè¿°æ¥­å‹™åƒ¹å€¼
- [ ] Background åŒ…å«å…±ç”¨å‰ç½®æ¢ä»¶
- [ ] Scenario è·è²¬å–®ä¸€
- [ ] æ¨™ç±¤åˆ†é¡æ˜ç¢º

**å…§å®¹å±¤é¢**:
- [ ] ä½¿ç”¨æ¥­å‹™èªè¨€
- [ ] é¿å…æŠ€è¡“å¯¦ä½œç´°ç¯€
- [ ] æ­¥é©Ÿç°¡æ½”æ˜ç¢º
- [ ] åƒæ•¸åŒ–é©ç•¶

**è¦†è“‹åº¦å±¤é¢**:
- [ ] åŒ…å« Happy Path
- [ ] åŒ…å«ç•°å¸¸è™•ç†
- [ ] åŒ…å«é‚Šç•Œæ¢ä»¶
- [ ] åŒ…å«æ¥­å‹™è¦å‰‡é©—è­‰

**å¯ç¶­è­·æ€§å±¤é¢**:
- [ ] é¿å…é‡è¤‡å ´æ™¯
- [ ] æ­¥é©Ÿå¯é‡ç”¨
- [ ] æ˜“æ–¼ç†è§£èˆ‡ä¿®æ”¹
- [ ] è¨»è§£èªªæ˜å……åˆ†

---

**ä¸‹ä¸€ç« é å‘Š**:
æˆ‘å€‘å°‡æ¢è¨ **BDD å°å…¥ç­–ç•¥èˆ‡çµ„ç¹”è½åœ°**,åŒ…æ‹¬è©•ä¼°çµ„ç¹”æˆç†Ÿåº¦ã€åˆ¶å®šå°å…¥è¨ˆç•«ã€å…‹æœå¸¸è¦‹é˜»ç¤™ã€å»ºç«‹å”ä½œæ–‡åŒ–,ä»¥åŠæˆåŠŸå°å…¥çš„é—œéµå› ç´ ã€‚

---

## ç¬¬å…«ç« ã€€å°å…¥ç­–ç•¥èˆ‡çµ„ç¹”è½åœ°

æœ¬ç« èªªæ˜å¦‚ä½•åœ¨çµ„ç¹”ä¸­æˆåŠŸå°å…¥ BDD,åŒ…æ‹¬è©•ä¼°ã€è¦åŠƒã€åŸ·è¡Œèˆ‡æŒçºŒæ”¹å–„ã€‚

### 8.1 çµ„ç¹” BDD æˆç†Ÿåº¦è©•ä¼°

#### 8.1.1 æˆç†Ÿåº¦æ¨¡å‹

```mermaid
graph LR
    Level1[Level 1<br/>åˆå§‹éšæ®µ] --> Level2[Level 2<br/>æ¢ç´¢éšæ®µ]
    Level2 --> Level3[Level 3<br/>å®šç¾©éšæ®µ]
    Level3 --> Level4[Level 4<br/>ç®¡ç†éšæ®µ]
    Level4 --> Level5[Level 5<br/>å„ªåŒ–éšæ®µ]
    
    style Level1 fill:#ffe1e1
    style Level2 fill:#fff4e1
    style Level3 fill:#fff9e1
    style Level4 fill:#e1f5ff
    style Level5 fill:#e7f5e1
```

**Level 1:åˆå§‹éšæ®µ**(Ad-hoc)
```
ç‰¹å¾µ:
- æ²’æœ‰æ­£å¼çš„éœ€æ±‚è¦æ ¼æµç¨‹
- æ¸¬è©¦ä¸»è¦ä¾è³´æ‰‹å‹•åŸ·è¡Œ
- éœ€æ±‚æ–‡ä»¶èˆ‡ç¨‹å¼ç¢¼è„«ç¯€
- ç¼ºä¹è·¨è·èƒ½å”ä½œ

å»ºè­°:
â†’ å¾å°åœ˜éšŠè©¦é»é–‹å§‹
â†’ é¸æ“‡ç°¡å–®åŠŸèƒ½ç·´ç¿’ BDD
â†’ å»ºç«‹åŸºæœ¬çš„ Three Amigos æœƒè­°
```

**Level 2:æ¢ç´¢éšæ®µ**(Repeatable)
```
ç‰¹å¾µ:
- é–‹å§‹æ’°å¯« Feature Files
- éƒ¨åˆ†åŠŸèƒ½æœ‰è‡ªå‹•åŒ–æ¸¬è©¦
- åœ˜éšŠæˆå“¡å­¸ç¿’ Gherkin èªæ³•
- å¶çˆ¾èˆ‰è¡Œ Discovery Workshop

å»ºè­°:
â†’ å»ºç«‹ Feature File æ’°å¯«è¦ç¯„
â†’ åŸ¹è¨“åœ˜éšŠæˆå“¡ BDD æŠ€èƒ½
â†’ å¼•å…¥ BDD å·¥å…·(Cucumber/Behave)
```

**Level 3:å®šç¾©éšæ®µ**(Defined)
```
ç‰¹å¾µ:
- æ­£å¼çš„ BDD æµç¨‹èˆ‡è¦ç¯„
- å¤§å¤šæ•¸æ–°åŠŸèƒ½ä½¿ç”¨ BDD
- Three Amigos æˆç‚ºå¸¸è¦å¯¦è¸
- è‡ªå‹•åŒ–æ¸¬è©¦è¦†è“‹ç‡æå‡

å»ºè­°:
â†’ æ•´åˆ BDD åˆ° CI/CD Pipeline
â†’ å»ºç«‹ Living Documentation
â†’ å®šæœŸ Review Feature Files å“è³ª
```

**Level 4:ç®¡ç†éšæ®µ**(Managed)
```
ç‰¹å¾µ:
- BDD æˆç‚ºåœ˜éšŠæ¨™æº–å¯¦è¸
- æ¸¬è©¦å ±å‘Šèˆ‡å°ˆæ¡ˆç®¡ç†å·¥å…·æ•´åˆ
- é‡åŒ–è¿½è¹¤ BDD æ•ˆç›Š
- è·¨åœ˜éšŠåˆ†äº«æœ€ä½³å¯¦å‹™

å»ºè­°:
â†’ å„ªåŒ– BDD æµç¨‹æ•ˆç‡
â†’ å»ºç«‹ Feature File é‡æ§‹æ©Ÿåˆ¶
â†’ ç™¼å±•çµ„ç¹”å°ˆå±¬çš„ BDD æ¨¡å¼åº«
```

**Level 5:å„ªåŒ–éšæ®µ**(Optimizing)
```
ç‰¹å¾µ:
- æŒçºŒæ”¹å–„ BDD å¯¦è¸
- ä¸»å‹•é é˜²ç¼ºé™·
- BDD èˆ‡ DevOps æ·±åº¦æ•´åˆ
- å‰µæ–°å¯¦é©—æ–°çš„å”ä½œæ–¹å¼

å»ºè­°:
â†’ AI è¼”åŠ© Feature File ç”Ÿæˆ
â†’ æ¢ç´¢ BDD èˆ‡ SDD æ•´åˆ
â†’ æ¨å»£åˆ°å…¶ä»–åœ˜éšŠ/éƒ¨é–€
```

#### 8.1.2 æˆç†Ÿåº¦è©•ä¼°å•å·

```markdown
## BDD æˆç†Ÿåº¦è©•ä¼°è¡¨

### ä¸€ã€å”ä½œæ–‡åŒ–(20åˆ†)
1. [ ] BA/SA/Dev/QA å®šæœŸå…±åŒè¨è«–éœ€æ±‚(5åˆ†)
2. [ ] ä½¿ç”¨ Example Mapping æˆ–é¡ä¼¼æŠ€è¡“(5åˆ†)
3. [ ] Three Amigos æœƒè­°å·²æˆç‚ºå¸¸è¦å¯¦è¸(5åˆ†)
4. [ ] åœ˜éšŠæˆå“¡ç†è§£å½¼æ­¤çš„è¦–è§’èˆ‡é—œåˆ‡(5åˆ†)

### äºŒã€éœ€æ±‚è¦æ ¼(20åˆ†)
1. [ ] ä½¿ç”¨ Gherkin èªæ³•æ’°å¯«è¦æ ¼(5åˆ†)
2. [ ] Feature Files ç”± SA/BA ä¸»å°æ’°å¯«(5åˆ†)
3. [ ] è¦æ ¼æ¶µè“‹ Happy Path èˆ‡ç•°å¸¸æƒ…æ³(5åˆ†)
4. [ ] è¦æ ¼èˆ‡åˆ©å®³é—œä¿‚äººé”æˆå…±è­˜(5åˆ†)

### ä¸‰ã€è‡ªå‹•åŒ–æ¸¬è©¦(20åˆ†)
1. [ ] Feature Files å¯è‡ªå‹•åŒ–åŸ·è¡Œ(5åˆ†)
2. [ ] è‡ªå‹•åŒ–æ¸¬è©¦è¦†è“‹ç‡ > 70%(5åˆ†)
3. [ ] æ¸¬è©¦åœ¨ CI/CD Pipeline ä¸­åŸ·è¡Œ(5åˆ†)
4. [ ] æ¸¬è©¦å ±å‘Šæ¸…æ™°æ˜“æ‡‚(5åˆ†)

### å››ã€æµç¨‹èˆ‡å·¥å…·(20åˆ†)
1. [ ] æœ‰æ˜ç¢ºçš„ BDD å·¥ä½œæµç¨‹(5åˆ†)
2. [ ] ä½¿ç”¨ BDD æ¡†æ¶(Cucumber/Behave ç­‰)(5åˆ†)
3. [ ] Feature Files ç´å…¥ç‰ˆæœ¬æ§ç®¡(5åˆ†)
4. [ ] æ¸¬è©¦å ±å‘Šèˆ‡å°ˆæ¡ˆç®¡ç†å·¥å…·æ•´åˆ(5åˆ†)

### äº”ã€æŒçºŒæ”¹å–„(20åˆ†)
1. [ ] å®šæœŸ Review Feature Files å“è³ª(5åˆ†)
2. [ ] æœ‰ Feature Files é‡æ§‹æ©Ÿåˆ¶(5åˆ†)
3. [ ] è¿½è¹¤ä¸¦åˆ†æ BDD æ•ˆç›Š(5åˆ†)
4. [ ] åœ˜éšŠä¸»å‹•åˆ†äº« BDD ç¶“é©—(5åˆ†)

---

**ç¸½åˆ†**: _____ / 100åˆ†

**æˆç†Ÿåº¦ç­‰ç´š**:
- 0-20åˆ†  â†’ Level 1 (åˆå§‹éšæ®µ)
- 21-40åˆ† â†’ Level 2 (æ¢ç´¢éšæ®µ)
- 41-60åˆ† â†’ Level 3 (å®šç¾©éšæ®µ)
- 61-80åˆ† â†’ Level 4 (ç®¡ç†éšæ®µ)
- 81-100åˆ† â†’ Level 5 (å„ªåŒ–éšæ®µ)
```

---

### 8.2 BDD å°å…¥è¨ˆç•«ç¯„æœ¬

#### 8.2.1 å°å…¥éšæ®µè¦åŠƒ

```mermaid
gantt
    title BDD å°å…¥æ™‚ç¨‹(6å€‹æœˆè¨ˆç•«)
    dateFormat YYYY-MM-DD
    
    section æº–å‚™éšæ®µ
    è©•ä¼°ç¾ç‹€èˆ‡æˆç†Ÿåº¦        :a1, 2025-01-01, 2w
    åˆ¶å®šå°å…¥ç­–ç•¥           :a2, after a1, 1w
    çµ„å»ºè©¦é»åœ˜éšŠ           :a3, after a2, 1w
    
    section å­¸ç¿’éšæ®µ
    BDD åŸºç¤åŸ¹è¨“          :b1, after a3, 1w
    Gherkin æ’°å¯«å·¥ä½œåŠ    :b2, after b1, 1w
    å·¥å…·èˆ‡ç’°å¢ƒè¨­å®š        :b3, after b2, 1w
    
    section è©¦é»éšæ®µ
    é¸æ“‡è©¦é»å°ˆæ¡ˆ          :c1, after b3, 1w
    æ’°å¯«ç¬¬ä¸€æ‰¹ Feature Files :c2, after c1, 2w
    å¯¦ä½œè‡ªå‹•åŒ–æ¸¬è©¦        :c3, after c2, 3w
    è©¦é»å›é¡§èˆ‡èª¿æ•´        :c4, after c3, 1w
    
    section æ¨å»£éšæ®µ
    å»ºç«‹è¦ç¯„èˆ‡æ¨¡æ¿        :d1, after c4, 2w
    æ“´å¤§åˆ°å…¶ä»–åœ˜éšŠ        :d2, after d1, 4w
    æ•´åˆåˆ° CI/CD         :d3, after d2, 2w
    
    section å„ªåŒ–éšæ®µ
    æŒçºŒæ”¹å–„æµç¨‹          :e1, after d3, 4w
    æ•ˆç›Šè¿½è¹¤èˆ‡åˆ†æ        :e2, after d3, 4w
```

#### 8.2.2 å°å…¥è¨ˆç•«ç¯„æœ¬

```markdown
# BDD å°å…¥è¨ˆç•«

## ä¸€ã€å°ˆæ¡ˆæ¦‚æ³

**å°ˆæ¡ˆåç¨±**: BDD å°å…¥è¨ˆç•«
**è² è²¬äºº**: [å§“å]
**æœŸç¨‹**: 2025-01-01 ~ 2025-06-30 (6å€‹æœˆ)
**ç›®æ¨™**: åœ¨[åœ˜éšŠ/éƒ¨é–€]æˆåŠŸå°å…¥ BDD å¯¦è¸

## äºŒã€ç¾ç‹€åˆ†æ

**ç•¶å‰æŒ‘æˆ°**:
- éœ€æ±‚æ–‡ä»¶èˆ‡å¯¦ä½œå¸¸æœ‰è½å·®
- æ¸¬è©¦ä¸»è¦ä¾è³´æ‰‹å‹•åŸ·è¡Œ
- è·¨è·èƒ½æºé€šä¸è¶³
- ç¼ºé™·ç™¼ç¾æ™‚é–“è¼ƒæ™š

**BDD æˆç†Ÿåº¦**: Level 1 (åˆå§‹éšæ®µ)

## ä¸‰ã€å°å…¥ç›®æ¨™

**çŸ­æœŸç›®æ¨™**(3å€‹æœˆ):
- [ ] å®Œæˆ BDD åŸºç¤åŸ¹è¨“
- [ ] è©¦é»å°ˆæ¡ˆä½¿ç”¨ BDD
- [ ] å»ºç«‹ Three Amigos æœƒè­°æ©Ÿåˆ¶
- [ ] è‡ªå‹•åŒ–æ¸¬è©¦è¦†è“‹ç‡ > 50%

**ä¸­æœŸç›®æ¨™**(6å€‹æœˆ):
- [ ] BDD æ¨å»£åˆ° 2-3 å€‹åœ˜éšŠ
- [ ] æ•´åˆåˆ° CI/CD Pipeline
- [ ] è‡ªå‹•åŒ–æ¸¬è©¦è¦†è“‹ç‡ > 70%
- [ ] å»ºç«‹ BDD è¦ç¯„èˆ‡æ¨¡æ¿

**é•·æœŸç›®æ¨™**(12å€‹æœˆ):
- [ ] BDD æˆç‚ºçµ„ç¹”æ¨™æº–å¯¦è¸
- [ ] ç¼ºé™·ç‡é™ä½ 30%
- [ ] éœ€æ±‚è®Šæ›´æ™‚é–“ç¸®çŸ­ 40%
- [ ] é”åˆ° Level 3 æˆç†Ÿåº¦

## å››ã€å°å…¥ç­–ç•¥

### éšæ®µä¸€:æº–å‚™éšæ®µ(ç¬¬1-4é€±)

**æ´»å‹•**:
1. çµ„å»º BDD æ¨å‹•å°çµ„
2. è©•ä¼°çµ„ç¹”æˆç†Ÿåº¦
3. é¸æ“‡è©¦é»åœ˜éšŠèˆ‡å°ˆæ¡ˆ
4. åˆ¶å®šåŸ¹è¨“è¨ˆç•«

**ç”¢å‡º**:
- BDD æˆç†Ÿåº¦è©•ä¼°å ±å‘Š
- è©¦é»å°ˆæ¡ˆæ¸…å–®
- åŸ¹è¨“æ•™æ

**è² è²¬äºº**: [å§“å]

### éšæ®µäºŒ:å­¸ç¿’éšæ®µ(ç¬¬5-7é€±)

**æ´»å‹•**:
1. BDD åŸºç¤åŸ¹è¨“(2å¤©)
2. Gherkin æ’°å¯«å·¥ä½œåŠ(1å¤©)
3. Three Amigos æ¨¡æ“¬æ¼”ç·´(1å¤©)
4. å·¥å…·ç’°å¢ƒè¨­å®š

**ç”¢å‡º**:
- åŸ¹è¨“å®Œæˆè­‰æ˜
- ç¬¬ä¸€æ‰¹ Feature Files
- é–‹ç™¼ç’°å¢ƒè¨­å®šæ–‡ä»¶

**è² è²¬äºº**: [å§“å]

### éšæ®µä¸‰:è©¦é»éšæ®µ(ç¬¬8-15é€±)

**æ´»å‹•**:
1. é¸æ“‡ 2-3 å€‹ç°¡å–®åŠŸèƒ½
2. èˆ‰è¡Œ Discovery Workshop
3. æ’°å¯« Feature Files
4. å¯¦ä½œ Step Definitions
5. åŸ·è¡Œè‡ªå‹•åŒ–æ¸¬è©¦
6. è©¦é»å›é¡§æœƒè­°

**ç”¢å‡º**:
- è©¦é»åŠŸèƒ½çš„å®Œæ•´ Feature Files
- è‡ªå‹•åŒ–æ¸¬è©¦ç¨‹å¼ç¢¼
- è©¦é»å›é¡§å ±å‘Š

**è² è²¬äºº**: [å§“å]

### éšæ®µå››:æ¨å»£éšæ®µ(ç¬¬16-23é€±)

**æ´»å‹•**:
1. ç¸½çµè©¦é»ç¶“é©—
2. å»ºç«‹ BDD è¦ç¯„èˆ‡æ¨¡æ¿
3. æ“´å¤§åˆ°å…¶ä»–åœ˜éšŠ
4. æ•´åˆåˆ° CI/CD Pipeline
5. å»ºç«‹ Living Documentation

**ç”¢å‡º**:
- BDD å¯¦æ–½è¦ç¯„
- Feature File æ¨¡æ¿åº«
- CI/CD æ•´åˆæ–‡ä»¶

**è² è²¬äºº**: [å§“å]

### éšæ®µäº”:å„ªåŒ–éšæ®µ(ç¬¬24é€±èµ·)

**æ´»å‹•**:
1. æ”¶é›†å›é¥‹èˆ‡æ”¹å–„
2. è¿½è¹¤æ•ˆç›ŠæŒ‡æ¨™
3. å®šæœŸ Review èˆ‡é‡æ§‹
4. ç¶“é©—åˆ†äº«èˆ‡æ¨å»£

**ç”¢å‡º**:
- æ•ˆç›Šè¿½è¹¤å ±å‘Š
- æœ€ä½³å¯¦å‹™æ–‡ä»¶

**è² è²¬äºº**: [å§“å]

## äº”ã€è³‡æºéœ€æ±‚

**äººåŠ›**:
- BDD æ•™ç·´:1äºº(å¤–éƒ¨é¡§å•æˆ–å…§éƒ¨å°ˆå®¶)
- è©¦é»åœ˜éšŠ:8-10äºº(BA/SA/Dev/QA)
- æ¨å‹•å°çµ„:3-5äºº

**å·¥å…·**:
- BDD æ¡†æ¶:Behave/Cucumber(é–‹æº)
- CI/CD å·¥å…·:Jenkins/GitLab CI(æ—¢æœ‰)
- å”ä½œå·¥å…·:Miro/Mural(è¨‚é–±åˆ¶)

**é ç®—**:
- å¤–éƒ¨åŸ¹è¨“:$50,000
- å·¥å…·è¨‚é–±:$10,000
- å…¶ä»–:$20,000
- **ç¸½è¨ˆ**:$80,000

## å…­ã€é¢¨éšªç®¡ç†

| é¢¨éšª | å¯èƒ½æ€§ | å½±éŸ¿ | æ‡‰å°æªæ–½ |
|------|-------|------|----------|
| åœ˜éšŠæˆå“¡æŠ—æ‹’æ”¹è®Š | ä¸­ | é«˜ | å……åˆ†æºé€š,å±•ç¤ºåƒ¹å€¼,å¾å°è™•é–‹å§‹ |
| å­¸ç¿’æ›²ç·šé™¡å³­ | ä¸­ | ä¸­ | æä¾›å……è¶³åŸ¹è¨“,è¨­ç«‹æ•™ç·´è¼”å° |
| åˆæœŸé€Ÿåº¦è®Šæ…¢ | é«˜ | ä¸­ | è¨­å®šåˆç†æœŸæœ›,æŒçºŒæ”¹å–„æµç¨‹ |
| å·¥å…·æŠ€è¡“å•é¡Œ | ä½ | ä¸­ | é¸æ“‡æˆç†Ÿå·¥å…·,å»ºç«‹æŠ€è¡“æ”¯æ´ |
| ç®¡ç†å±¤æ”¯æŒä¸è¶³ | ä½ | é«˜ | å®šæœŸå ±å‘Šé€²åº¦,å±•ç¤ºé‡åŒ–æ•ˆç›Š |

## ä¸ƒã€æˆåŠŸæŒ‡æ¨™

**æµç¨‹æŒ‡æ¨™**:
- Three Amigos æœƒè­°èˆ‰è¾¦æ¬¡æ•¸
- Feature Files æ’°å¯«æ•¸é‡
- è‡ªå‹•åŒ–æ¸¬è©¦è¦†è“‹ç‡

**å“è³ªæŒ‡æ¨™**:
- ç¼ºé™·ç‡è®ŠåŒ–
- ç¼ºé™·ç™¼ç¾éšæ®µåˆ†ä½ˆ
- éœ€æ±‚è®Šæ›´æ¬¡æ•¸

**æ•ˆç‡æŒ‡æ¨™**:
- éœ€æ±‚æ¾„æ¸…æ™‚é–“
- æ¸¬è©¦åŸ·è¡Œæ™‚é–“
- ä¸Šç·šå¾Œç¼ºé™·æ•¸

**åœ˜éšŠæŒ‡æ¨™**:
- åœ˜éšŠæ»¿æ„åº¦èª¿æŸ¥
- è·¨è·èƒ½å”ä½œè©•åˆ†

## å…«ã€æºé€šè¨ˆç•«

**åˆ©å®³é—œä¿‚äºº**:
- é«˜éšä¸»ç®¡:æœˆåº¦å ±å‘Š
- å°ˆæ¡ˆç¶“ç†:é›™é€±å ±å‘Š
- åœ˜éšŠæˆå“¡:æ¯æ—¥ Standup
- å…¶ä»–åœ˜éšŠ:å­£åº¦åˆ†äº«æœƒ

## ä¹ã€é™„éŒ„

- [é™„éŒ„A] BDD æˆç†Ÿåº¦è©•ä¼°çµæœ
- [é™„éŒ„B] åŸ¹è¨“æ•™æå¤§ç¶±
- [é™„éŒ„C] Feature File ç¯„æœ¬
- [é™„éŒ„D] å·¥å…·å®‰è£æŒ‡å—
```

---

### 8.3 å…‹æœå°å…¥ BDD çš„å¸¸è¦‹éšœç¤™

#### 8.3.1 å…¸å‹éšœç¤™èˆ‡è§£æ–¹

**éšœç¤™ 1:"BDD æœƒæ‹–æ…¢é–‹ç™¼é€Ÿåº¦"**

```
å¸¸è¦‹æŠ±æ€¨:
"æ’°å¯« Feature Files å¤ªèŠ±æ™‚é–“äº†"
"æˆ‘å€‘é€£ç¨‹å¼éƒ½å¯«ä¸å®Œäº†,å“ªæœ‰æ™‚é–“å¯«è¦æ ¼"

æ ¹æœ¬åŸå› :
- èª¤è§£ BDD çš„ç›®çš„(ä¸åªæ˜¯è‡ªå‹•åŒ–æ¸¬è©¦)
- åˆæœŸå­¸ç¿’æ›²ç·š
- æµç¨‹å°šæœªå„ªåŒ–

è§£æ±ºæ–¹æ¡ˆ:
âœ… æºé€š BDD é•·æœŸæ•ˆç›Š(æ¸›å°‘è¿”å·¥ã€é™ä½ç¼ºé™·)
âœ… å¾å°è™•é–‹å§‹,ç´¯ç©ç¶“é©—
âœ… æä¾›å……è¶³åŸ¹è¨“èˆ‡è¼”å°
âœ… å„ªåŒ–æµç¨‹,æ¸›å°‘ä¸å¿…è¦çš„æ­¥é©Ÿ
âœ… å±•ç¤ºæˆåŠŸæ¡ˆä¾‹çš„æ™‚é–“ç¯€çœ

æ•¸æ“šæ”¯æŒ:
"åˆæœŸå¯èƒ½æ…¢ 20%,ä½† 3 å€‹æœˆå¾Œé€Ÿåº¦æ¢å¾©,
 ä¸”ç¼ºé™·ç‡é™ä½ 40%,é•·æœŸçœ‹åè€Œæ›´å¿«"
```

**éšœç¤™ 2:"é–‹ç™¼äººå“¡ä¸æƒ³å¯«æ¸¬è©¦"**

```
å¸¸è¦‹æŠ±æ€¨:
"å¯«æ¸¬è©¦ä¸æ˜¯ QA çš„å·¥ä½œå—?"
"æˆ‘åªè² è²¬å¯«ç¨‹å¼ç¢¼"

æ ¹æœ¬åŸå› :
- è§’è‰²è·è²¬ä¸æ¸…
- ç¼ºä¹æ¸¬è©¦æ–‡åŒ–
- æ²’æœ‰çœ‹åˆ°æ¸¬è©¦çš„åƒ¹å€¼

è§£æ±ºæ–¹æ¡ˆ:
âœ… é‡æ¸… BDD ä¸­å„è§’è‰²çš„è²¬ä»»
   - SA:æ’°å¯« Feature Files
   - Dev:å¯¦ä½œ Step Definitions èˆ‡åŠŸèƒ½
   - QA:è£œå……æ¸¬è©¦å ´æ™¯,åŸ·è¡Œæ¸¬è©¦
âœ… å¼·èª¿ Step Definitions æ˜¯"å¯åŸ·è¡Œçš„è¦æ ¼"
âœ… å»ºç«‹æ¸¬è©¦å…ˆè¡Œæ–‡åŒ–
âœ… ç®¡ç†å±¤æ”¯æŒèˆ‡æ¿€å‹µæ©Ÿåˆ¶

å¯¦è¸æŠ€å·§:
"Pair Programming:Dev èˆ‡ QA ä¸€èµ·å¯¦ä½œæ¸¬è©¦"
"Code Review:æª¢æŸ¥æ¸¬è©¦è¦†è“‹åº¦"
"CI/CD:æ¸¬è©¦ä¸é€šéç„¡æ³•åˆä½µ"
```

**éšœç¤™ 3:"Business å¤ªå¿™,æ²’æ™‚é–“åƒèˆ‡"**

```
å¸¸è¦‹æŠ±æ€¨:
"BA ç¸½æ˜¯å¿™è‘—é–‹æœƒ,ç´„ä¸åˆ°æ™‚é–“"
"åˆ©å®³é—œä¿‚äººä¸æƒ³åƒèˆ‡æŠ€è¡“è¨è«–"

æ ¹æœ¬åŸå› :
- èª¤ä»¥ç‚º BDD æ˜¯æŠ€è¡“æ´»å‹•
- æ²’æœ‰å±•ç¤ºåƒèˆ‡çš„åƒ¹å€¼
- æœƒè­°æ•ˆç‡ä½è½

è§£æ±ºæ–¹æ¡ˆ:
âœ… å¼·èª¿ Discovery æ˜¯é¿å…åšéŒ¯éœ€æ±‚çš„é—œéµ
âœ… æ§åˆ¶æœƒè­°æ™‚é–“(Example Mapping 25åˆ†é˜)
âœ… æå‰æº–å‚™,é«˜æ•ˆè¨è«–
âœ… å±•ç¤ºæ¸›å°‘è¿”å·¥çš„æ•ˆç›Š
âœ… ç®¡ç†å±¤æ”¯æŒèˆ‡å„ªå…ˆç´šèª¿æ•´

æºé€šè©±è¡“:
"èŠ± 30 åˆ†é˜è¨è«–,å¯ä»¥é¿å… 2 é€±çš„è¿”å·¥"
"é€™ä¸æ˜¯æŠ€è¡“è¨è«–,æ˜¯ç¢ºä¿æˆ‘å€‘åšå°çš„äº‹æƒ…"
```

**éšœç¤™ 4:"Feature Files èˆ‡ç¨‹å¼ç¢¼ä¸åŒæ­¥"**

```
å¸¸è¦‹å•é¡Œ:
"ç¨‹å¼æ”¹äº†,ä½† Feature File æ²’æ›´æ–°"
"Feature File è®Šæˆéæ™‚çš„æ–‡ä»¶"

æ ¹æœ¬åŸå› :
- æ²’æœ‰å°‡ Feature Files è¦–ç‚ºç”¢å“ç¨‹å¼ç¢¼
- ç¼ºä¹è‡ªå‹•åŒ–åŸ·è¡Œæ©Ÿåˆ¶
- Review æµç¨‹æœªæ¶µè“‹ Feature Files

è§£æ±ºæ–¹æ¡ˆ:
âœ… å¼·åˆ¶è¦å®š:ç¨‹å¼ç¢¼èˆ‡ Feature Files ä¸€èµ·ä¿®æ”¹
âœ… CI/CD åŸ·è¡Œ BDD æ¸¬è©¦,å¤±æ•—ä¸èƒ½åˆä½µ
âœ… Code Review åŒ…å« Feature Files
âœ… å®šæœŸé‡æ§‹èˆ‡æ›´æ–°
âœ… ä½¿ç”¨æ¨™ç±¤æ¨™è¨˜éæ™‚å ´æ™¯(@deprecated)

æµç¨‹æ”¹å–„:
PR Checklist:
â–¡ ç¨‹å¼ç¢¼ä¿®æ”¹
â–¡ Feature Files æ›´æ–°
â–¡ Step Definitions æ›´æ–°
â–¡ æ¸¬è©¦é€šé
```

**éšœç¤™ 5:"å·¥å…·å­¸ç¿’æˆæœ¬é«˜"**

```
å¸¸è¦‹æŠ±æ€¨:
"Cucumber/Behave å¤ªè¤‡é›œäº†"
"ç’°å¢ƒè¨­å®šå°±èŠ±äº†ä¸€æ•´å¤©"

æ ¹æœ¬åŸå› :
- ç¼ºä¹åŸ¹è¨“
- æ–‡ä»¶ä¸å®Œæ•´
- å·¥å…·é¸æ“‡ä¸ç•¶

è§£æ±ºæ–¹æ¡ˆ:
âœ… æä¾›å®Œæ•´çš„å®‰è£èˆ‡è¨­å®šæ–‡ä»¶
âœ… æº–å‚™é–‹ç®±å³ç”¨çš„å°ˆæ¡ˆæ¨¡æ¿
âœ… èˆ‰è¾¦å·¥ä½œåŠ,å¯¦ä½œæ¼”ç·´
âœ… å»ºç«‹å…§éƒ¨æŠ€è¡“æ”¯æ´æ©Ÿåˆ¶
âœ… é¸æ“‡åœ˜éšŠç†Ÿæ‚‰æŠ€è¡“æ£§çš„å·¥å…·

å¯¦è¸å»ºè­°:
"å»ºç«‹ Starter Kit:åŒ…å«ç¯„ä¾‹å°ˆæ¡ˆã€æ–‡ä»¶ã€æ•™å­¸å½±ç‰‡"
"Pair Programming:è³‡æ·±æˆå“¡å¸¶é ˜æ–°æ‰‹"
"å…§éƒ¨ Q&A å¹³å°:Stack Overflow for BDD"
```

---

### ğŸ“ ç¬¬å…«ç« ç¬¬ä¸€éƒ¨åˆ†ç¸½çµ

#### æœ¬ç¯€é‡é»

âœ… **æˆç†Ÿåº¦è©•ä¼°**
- äº”ç´šæˆç†Ÿåº¦æ¨¡å‹
- è©•ä¼°å•å·èˆ‡æŒ‡æ¨™
- æ ¹æ“šç¾ç‹€åˆ¶å®šç­–ç•¥

âœ… **å°å…¥è¨ˆç•«**
- å…­å€‹æœˆå°å…¥æ™‚ç¨‹
- äº”éšæ®µå¯¦æ–½ç­–ç•¥
- è³‡æºéœ€æ±‚èˆ‡é¢¨éšªç®¡ç†

âœ… **å¸¸è¦‹éšœç¤™èˆ‡è§£æ–¹**
- é€Ÿåº¦è®Šæ…¢è¿·æ€
- è§’è‰²è·è²¬ä¸æ¸…
- æ¥­å‹™åƒèˆ‡ä¸è¶³
- æ–‡ä»¶åŒæ­¥å•é¡Œ
- å·¥å…·å­¸ç¿’æˆæœ¬

---

**æ¥ä¸‹ä¾†**:æˆ‘å€‘å°‡ç¹¼çºŒæ¢è¨å»ºç«‹å”ä½œæ–‡åŒ–ã€æˆåŠŸå°å…¥çš„é—œéµå› ç´ ,ä»¥åŠç¬¬ä¹ç« çš„é«˜éšæ‡‰ç”¨èˆ‡å»¶ä¼¸ã€‚

---

### 8.4 å»ºç«‹ BDD å”ä½œæ–‡åŒ–

#### 8.4.1 æ–‡åŒ–è½‰å‹çš„é—œéµè¦ç´ 

```mermaid
graph TB
    Culture[BDD å”ä½œæ–‡åŒ–]
    
    Culture --> A[å…±åŒèªè¨€]
    A --> A1[æ¥­å‹™è¡“èª]
    A --> A2[Gherkin]
    A --> A3[ç¯„ä¾‹æºé€š]
    
    Culture --> B[å…±åŒè²¬ä»»]
    B --> B1[å…±äº«å“è³ªç›®æ¨™]
    B --> B2[è·¨è·èƒ½å”ä½œ]
    B --> B3[é›†é«”æ“æœ‰]
    
    Culture --> C[æŒçºŒå­¸ç¿’]
    C --> C1[å›é¡§æ”¹å–„]
    C --> C2[ç¶“é©—åˆ†äº«]
    C --> C3[é–‹æ”¾åé¥‹]
    
    Culture --> D[ä¿¡ä»»å°Šé‡]
    D --> D1[å‚¾è½ç†è§£]
    D --> D2[äº’ç›¸æ”¯æŒ]
    D --> D3[å¿ƒç†å®‰å…¨]
    
    style Culture fill:#9cf,stroke:#333,stroke-width:4px
```

**å»ºç«‹å…±åŒèªè¨€**:
```
è¡Œå‹•é …ç›®:
âœ… å»ºç«‹æ¥­å‹™è¡“èªè©å½™è¡¨
âœ… çµ±ä¸€ Gherkin èªæ³•é¢¨æ ¼
âœ… ä½¿ç”¨å…·é«”ç¯„ä¾‹æºé€š
âœ… é¿å…æŠ€è¡“è¡Œè©±

å¯¦è¸:
æ¯é€±è¡“èª Review æœƒè­°
Feature Files æˆç‚ºå”¯ä¸€çœŸç›¸ä¾†æº
æ–°é€²äººå“¡åŸ¹è¨“æ™‚å¼·èª¿æ¥­å‹™èªè¨€
```

**å»ºç«‹å…±åŒè²¬ä»»**:
```
å‚³çµ±æ–‡åŒ–:
BA å¯«éœ€æ±‚ â†’ Dev å¯«ç¨‹å¼ â†’ QA æ¸¬è©¦

BDD æ–‡åŒ–:
æ‰€æœ‰äººå…±åŒå°å“è³ªè² è²¬
- BA/SA:éœ€æ±‚æ­£ç¢ºæ€§
- Dev:å¯¦ä½œæ­£ç¢ºæ€§
- QA:æ¸¬è©¦å®Œæ•´æ€§
- å¤§å®¶:æœ€çµ‚ç”¢å“å“è³ª

å¯¦è¸:
Three Amigos å…±åŒæ±ºç­–
Feature Files æ‰€æœ‰äººéƒ½èƒ½ä¿®æ”¹
åœ˜éšŠçå‹µæ©Ÿåˆ¶(éå€‹äºº)
```

#### 8.4.2 ç®¡ç†å±¤æ”¯æŒçš„é‡è¦æ€§

**é«˜éšä¸»ç®¡æ‡‰è©²åšä»€éº¼**:

```markdown
## é«˜éšä¸»ç®¡æ”¯æŒ Checklist

### 1. ç†è§£ä¸¦èªåŒ BDD åƒ¹å€¼
- [ ] åƒåŠ  BDD ç°¡å ±æˆ–å·¥ä½œåŠ
- [ ] ç†è§£ BDD ä¸åªæ˜¯æ¸¬è©¦å·¥å…·
- [ ] èªåŒå”ä½œå„ªå…ˆæ–¼å·¥å…·

### 2. æä¾›è³‡æºèˆ‡æˆæ¬Š
- [ ] æ‰¹å‡†åŸ¹è¨“é ç®—
- [ ] å…è¨±åœ˜éšŠå˜—è©¦æ–°æµç¨‹
- [ ] çµ¦äºˆå­¸ç¿’æ™‚é–“(åˆæœŸé€Ÿåº¦å¯èƒ½è®Šæ…¢)

### 3. å»ºç«‹æœŸæœ›èˆ‡çå‹µ
- [ ] å°‡ BDD å¯¦è¸ç´å…¥ç¸¾æ•ˆè©•ä¼°
- [ ] å…¬é–‹è¡¨æš BDD æˆåŠŸæ¡ˆä¾‹
- [ ] é¼“å‹µè·¨è·èƒ½å”ä½œ

### 4. ç§»é™¤éšœç¤™
- [ ] å”èª¿è³‡æºè¡çª
- [ ] è™•ç†çµ„ç¹”é˜»åŠ›
- [ ] æ”¯æŒæµç¨‹èª¿æ•´

### 5. ä»¥èº«ä½œå‰‡
- [ ] åƒèˆ‡é‡è¦çš„ Discovery Workshop
- [ ] è©¢å•åœ˜éšŠ Feature Files ç‹€æ³
- [ ] é—œæ³¨ BDD æ•ˆç›ŠæŒ‡æ¨™
```

---

### 8.5 æˆåŠŸå°å…¥çš„é—œéµå› ç´ 

#### 8.5.1 æˆåŠŸè¦ç´ ç¸½çµ

**é—œéµè¦ç´  1:å¾å°è™•é–‹å§‹**
```
âŒ éŒ¯èª¤åšæ³•:
"æˆ‘å€‘è¦åœ¨æ‰€æœ‰å°ˆæ¡ˆå°å…¥ BDD!"
"ä¸‹é€±é–‹å§‹å…¨éƒ¨åŠŸèƒ½éƒ½è¦å¯« Feature Files!"

âœ… æ­£ç¢ºåšæ³•:
"é¸æ“‡ 1-2 å€‹å°åœ˜éšŠè©¦é»"
"å¾ç°¡å–®åŠŸèƒ½é–‹å§‹,ç´¯ç©ç¶“é©—"
"æˆåŠŸå¾Œå†é€æ­¥æ“´å¤§"

æ¡ˆä¾‹:
æŸéŠ€è¡Œå¾ä¸€å€‹ 8 äººçš„åœ˜éšŠé–‹å§‹è©¦é»,
ç”¨ 3 å€‹æœˆæ™‚é–“åœ¨ä¸€å€‹å°åŠŸèƒ½ä¸Šå¯¦è¸ BDD,
æˆåŠŸå¾Œå†æ¨å»£åˆ°å…¶ä»– 5 å€‹åœ˜éšŠã€‚
```

**é—œéµè¦ç´  2:æŒçºŒåŸ¹è¨“èˆ‡è¼”å°**
```
åŸ¹è¨“è¨ˆç•«:
â–¡ å…¥é–€åŸ¹è¨“(2å¤©):BDD åŸºç¤ã€Gherkin èªæ³•
â–¡ å¯¦æˆ°å·¥ä½œåŠ(1å¤©):æ’°å¯« Feature Files
â–¡ æŠ€è¡“åŸ¹è¨“(1å¤©):å·¥å…·èˆ‡è‡ªå‹•åŒ–
â–¡ é€²éšå·¥ä½œåŠ(åŠå¤©):é‡æ§‹èˆ‡æœ€ä½³å¯¦å‹™

è¼”å°æ©Ÿåˆ¶:
- æŒ‡æ´¾ BDD Coach
- Pair Programming/Writing
- å®šæœŸ Office Hours
- å…§éƒ¨æŠ€è¡“ç¤¾ç¾¤
```

**é—œéµè¦ç´  3:åº¦é‡èˆ‡å±•ç¤ºæ•ˆç›Š**
```
è¿½è¹¤æŒ‡æ¨™:

ã€å“è³ªæŒ‡æ¨™ã€‘
- ç¼ºé™·ç‡è®ŠåŒ–
- ç¼ºé™·ç™¼ç¾éšæ®µ(å‰ç§»æ¯”ä¾‹)
- ç”Ÿç”¢ç¼ºé™·æ•¸é‡

ã€æ•ˆç‡æŒ‡æ¨™ã€‘
- éœ€æ±‚æ¾„æ¸…æ™‚é–“
- æ¸¬è©¦åŸ·è¡Œæ™‚é–“
- éœ€æ±‚è®Šæ›´æ¬¡æ•¸èˆ‡å½±éŸ¿ç¯„åœ

ã€å”ä½œæŒ‡æ¨™ã€‘
- Three Amigos æœƒè­°é »ç‡
- è·¨è·èƒ½æºé€šæ»¿æ„åº¦
- Feature Files å”ä½œç·¨è¼¯æ¬¡æ•¸

ã€æŠ€è¡“æŒ‡æ¨™ã€‘
- è‡ªå‹•åŒ–æ¸¬è©¦è¦†è“‹ç‡
- Feature Files æ•¸é‡èˆ‡å“è³ª
- CI/CD åŸ·è¡Œæ™‚é–“

å±•ç¤ºæ–¹å¼:
â†’ æœˆåº¦å„€è¡¨æ¿
â†’ å­£åº¦å›é¡§ç°¡å ±
â†’ æˆåŠŸæ¡ˆä¾‹åˆ†äº«
```

**é—œéµè¦ç´  4:æ…¶ç¥å°æˆåŠŸ**
```
é‡Œç¨‹ç¢‘æ…¶ç¥:
âœ¨ ç¬¬ä¸€å€‹ Feature File å®Œæˆ
âœ¨ ç¬¬ä¸€å€‹è‡ªå‹•åŒ–æ¸¬è©¦é€šé
âœ¨ ç¬¬ä¸€æ¬¡æˆåŠŸçš„ Three Amigos æœƒè­°
âœ¨ è©¦é»å°ˆæ¡ˆå®Œæˆ
âœ¨ è‡ªå‹•åŒ–è¦†è“‹ç‡é”æ¨™

æ–¹å¼:
- åœ˜éšŠèšé¤
- å…¬é–‹è¡¨æš
- åˆ†äº«æœƒ
- çå‹µæ©Ÿåˆ¶
```

---

### ğŸ“ ç¬¬å…«ç« ç¸½çµèˆ‡å°å…¥è¦é»

#### é—œéµè¦é»å›é¡§

âœ… **æˆç†Ÿåº¦è©•ä¼°**
- ä½¿ç”¨äº”ç´šæ¨¡å‹è©•ä¼°ç¾ç‹€
- æ ¹æ“šè©•ä¼°çµæœåˆ¶å®šç­–ç•¥
- è¨­å®šéšæ®µæ€§ç›®æ¨™

âœ… **å°å…¥è¨ˆç•«**
- æº–å‚™ã€å­¸ç¿’ã€è©¦é»ã€æ¨å»£ã€å„ªåŒ–äº”éšæ®µ
- 6-12 å€‹æœˆæ™‚ç¨‹è¦åŠƒ
- æ˜ç¢ºè³‡æºèˆ‡é¢¨éšªç®¡ç†

âœ… **å…‹æœéšœç¤™**
- é€Ÿåº¦è®Šæ…¢:å±•ç¤ºé•·æœŸæ•ˆç›Š
- è§’è‰²æŠ—æ‹’:é‡æ¸…è²¬ä»»,å»ºç«‹æ–‡åŒ–
- æ¥­å‹™åƒèˆ‡:å¼·èª¿åƒ¹å€¼,é«˜æ•ˆæœƒè­°
- æ–‡ä»¶åŒæ­¥:CI/CD å¼·åˆ¶,Review æµç¨‹
- å·¥å…·å­¸ç¿’:å……è¶³åŸ¹è¨“,æŠ€è¡“æ”¯æ´

âœ… **å”ä½œæ–‡åŒ–**
- å»ºç«‹å…±åŒèªè¨€
- å…±åŒè²¬ä»»åˆ¶
- æŒçºŒå­¸ç¿’èˆ‡æ”¹å–„
- ç®¡ç†å±¤æ”¯æŒ

âœ… **æˆåŠŸé—œéµ**
- å¾å°è™•é–‹å§‹
- æŒçºŒåŸ¹è¨“è¼”å°
- åº¦é‡å±•ç¤ºæ•ˆç›Š
- æ…¶ç¥å°æˆåŠŸ

---

**ä¸‹ä¸€ç« é å‘Š**:
æˆ‘å€‘å°‡æ¢è¨ **BDD é«˜éšæ‡‰ç”¨èˆ‡å»¶ä¼¸**,åŒ…æ‹¬ AI è¼”åŠ© Feature File ç”Ÿæˆã€BDD èˆ‡ Specification by Example æ•´åˆã€å¾®æœå‹™æ¶æ§‹ä¸‹çš„ BDD æŒ‘æˆ°,ä»¥åŠ BDD çš„æœªä¾†è¶¨å‹¢ã€‚

---

## ç¬¬ä¹ç« ã€€é«˜éšæ‡‰ç”¨èˆ‡å»¶ä¼¸

æœ¬ç« æ¢è¨ BDD çš„é€²éšä¸»é¡Œ,åŒ…æ‹¬ AI è¼”åŠ©ã€èˆ‡å…¶ä»–æ–¹æ³•è«–çš„æ•´åˆ,ä»¥åŠæœªä¾†ç™¼å±•è¶¨å‹¢ã€‚

### 9.1 AI è¼”åŠ© BDD å¯¦è¸

#### 9.1.1 AI åœ¨ BDD ä¸­çš„æ‡‰ç”¨å ´æ™¯

```mermaid
graph TB
    AI[AI è¼”åŠ© BDD]
    
    AI --> Gen[ç”Ÿæˆè¼”åŠ©]
    AI --> Review[å¯©æŸ¥è¼”åŠ©]
    AI --> Maintain[ç¶­è­·è¼”åŠ©]
    AI --> Test[æ¸¬è©¦è¼”åŠ©]
    
    Gen --> G1[éœ€æ±‚è½‰ Feature Files]
    Gen --> G2[ç”Ÿæˆæ¸¬è©¦è³‡æ–™]
    Gen --> G3[ç”Ÿæˆ Step Definitions]
    
    Review --> R1[Feature Files å“è³ªæª¢æŸ¥]
    Review --> R2[å»ºè­°æ”¹å–„é»]
    Review --> R3[æª¢æ¸¬é‡è¤‡å ´æ™¯]
    
    Maintain --> M1[è‡ªå‹•æ›´æ–°éæ™‚å ´æ™¯]
    Maintain --> M2[é‡æ§‹å»ºè­°]
    Maintain --> M3[æ¨™ç±¤ç®¡ç†]
    
    Test --> T1[æ™ºæ…§æ¸¬è©¦é¸æ“‡]
    Test --> T2[æ¸¬è©¦è³‡æ–™ç”Ÿæˆ]
    Test --> T3[ç¼ºé™·é æ¸¬]
    
    style AI fill:#e1f5ff
    style Gen fill:#fff4e1
    style Review fill:#e7f5e1
    style Maintain fill:#ffe1e1
    style Test fill:#f0e1ff
```

#### 9.1.2 ä½¿ç”¨ AI ç”Ÿæˆ Feature Files

**ç¯„ä¾‹:ä½¿ç”¨ GitHub Copilot/ChatGPT**

**è¼¸å…¥(éœ€æ±‚æ–‡ä»¶)**:
```
éœ€æ±‚:æœƒå“¡é»æ•¸å…Œæ›åŠŸèƒ½
- æœƒå“¡å¯ä½¿ç”¨é»æ•¸å…Œæ›å•†å“
- 100 é» = 1 å…ƒæŠ˜æŠµ
- å–®ç­†è¨‚å–®æœ€å¤šæŠ˜æŠµ 30%
- å…Œæ›å¾Œé»æ•¸ç«‹å³æ‰£é™¤
- é»æ•¸ä¸è¶³æ™‚é¡¯ç¤ºéŒ¯èª¤
```

**Prompt ç¯„ä¾‹**:
```
è«‹æ ¹æ“šä»¥ä¸‹éœ€æ±‚,æ’°å¯« BDD Feature File:

éœ€æ±‚:æœƒå“¡é»æ•¸å…Œæ›åŠŸèƒ½
- æœƒå“¡å¯ä½¿ç”¨é»æ•¸å…Œæ›å•†å“
- 100 é» = 1 å…ƒæŠ˜æŠµ
- å–®ç­†è¨‚å–®æœ€å¤šæŠ˜æŠµ 30%
- å…Œæ›å¾Œé»æ•¸ç«‹å³æ‰£é™¤
- é»æ•¸ä¸è¶³æ™‚é¡¯ç¤ºéŒ¯èª¤

è«‹ä½¿ç”¨ Gherkin èªæ³•,åŒ…å«:
1. Feature æè¿°(å«æ¥­å‹™åƒ¹å€¼)
2. Background(å¦‚éœ€è¦)
3. Happy Path Scenario
4. ç•°å¸¸æƒ…æ³ Scenarios
5. é‚Šç•Œæ¢ä»¶æ¸¬è©¦
6. ä½¿ç”¨ç¹é«”ä¸­æ–‡
```

**AI ç”Ÿæˆè¼¸å‡º**:
```gherkin
@loyalty @points-redemption
Feature: æœƒå“¡é»æ•¸å…Œæ›
  ä½œç‚º æœƒå“¡
  æˆ‘æƒ³è¦ ä½¿ç”¨é»æ•¸å…Œæ›å•†å“
  ä»¥ä¾¿ ç¯€çœè³¼ç‰©æ”¯å‡º

  Business Rules:
  - 100 é» = 1 å…ƒæŠ˜æŠµ
  - å–®ç­†è¨‚å–®æœ€å¤šæŠ˜æŠµ 30%
  - å…Œæ›å¾Œé»æ•¸ç«‹å³æ‰£é™¤

  Background:
    Given æœƒå“¡ "M001" æ“æœ‰ 5000 é»
    And è³¼ç‰©è»Šä¸­æœ‰å•†å“,ç¸½é‡‘é¡ç‚º 1000 å…ƒ

  @happy-path
  Scenario: æˆåŠŸä½¿ç”¨é»æ•¸å…Œæ›
    When æœƒå“¡é¸æ“‡ä½¿ç”¨ 3000 é»å…Œæ›
    Then è¨‚å–®æŠ˜æŠµé‡‘é¡æ‡‰è©²æ˜¯ 30 å…ƒ
    And å¯¦ä»˜é‡‘é¡æ‡‰è©²æ˜¯ 970 å…ƒ
    And æœƒå“¡é»æ•¸é¤˜é¡æ‡‰è©²æ˜¯ 2000 é»

  @business-rule
  Scenario: æŠ˜æŠµé‡‘é¡ä¸è¶…éè¨‚å–®çš„ 30%
    When æœƒå“¡é¸æ“‡ä½¿ç”¨ 50000 é»å…Œæ›
    Then è¨‚å–®æœ€å¤šæŠ˜æŠµ 300 å…ƒ
    And å¯¦éš›ä½¿ç”¨é»æ•¸æ‡‰è©²æ˜¯ 30000 é»
    And æœƒå“¡é»æ•¸é¤˜é¡æ‡‰è©²æ˜¯ 0 é»(ä¸è¶³å‰‡ç”¨å®Œ)

  @validation
  Scenario: é»æ•¸ä¸è¶³ç„¡æ³•å…Œæ›
    Given æœƒå“¡ "M001" æ“æœ‰ 1000 é»
    When æœƒå“¡é¸æ“‡ä½¿ç”¨ 2000 é»å…Œæ›
    Then ç³»çµ±æ‡‰è©²é¡¯ç¤ºéŒ¯èª¤è¨Šæ¯ "é»æ•¸ä¸è¶³"
    And é»æ•¸é¤˜é¡æ‡‰ä¿æŒ 1000 é»ä¸è®Š

  @boundary
  Scenario Outline: é‚Šç•Œæ¢ä»¶æ¸¬è©¦
    Given æœƒå“¡æ“æœ‰ <points> é»
    And è¨‚å–®é‡‘é¡ç‚º <order_amount> å…ƒ
    When æœƒå“¡é¸æ“‡ä½¿ç”¨ <redeem_points> é»å…Œæ›
    Then æŠ˜æŠµé‡‘é¡æ‡‰è©²æ˜¯ <discount> å…ƒ
    And å¯¦ä»˜é‡‘é¡æ‡‰è©²æ˜¯ <final_amount> å…ƒ

    Examples:
      | points | order_amount | redeem_points | discount | final_amount |
      | 10000  | 1000         | 30000         | 300      | 700          |
      | 100    | 1000         | 100           | 1        | 999          |
      | 0      | 1000         | 0             | 0        | 1000         |
```

**äººå·¥æª¢è¦–èˆ‡èª¿æ•´**:
```
AI ç”Ÿæˆå¾Œ,SA æ‡‰è©²:
âœ… æª¢æŸ¥æ¥­å‹™è¦å‰‡æ˜¯å¦æ­£ç¢º
âœ… è£œå…… AI æœªè€ƒæ…®åˆ°çš„å ´æ™¯
âœ… èª¿æ•´èªè¨€ä½¿å…¶æ›´ç¬¦åˆåœ˜éšŠé¢¨æ ¼
âœ… èˆ‡åˆ©å®³é—œä¿‚äººç¢ºèª
âŒ ä¸è¦ç›´æ¥ä½¿ç”¨,å¿…é ˆ Review
```

#### 9.1.3 AI è¼”åŠ© Feature Files å“è³ªæª¢æŸ¥

**å“è³ªæª¢æŸ¥ Prompt**:
```
è«‹æª¢æŸ¥ä»¥ä¸‹ Feature File çš„å“è³ª,ä¸¦æä¾›æ”¹å–„å»ºè­°:

[è²¼ä¸Š Feature File å…§å®¹]

è«‹æª¢æŸ¥:
1. Gherkin èªæ³•æ˜¯å¦æ­£ç¢º
2. æ˜¯å¦ä½¿ç”¨æ¥­å‹™èªè¨€(é¿å…æŠ€è¡“ç´°ç¯€)
3. Scenario æ˜¯å¦è·è²¬å–®ä¸€
4. æ˜¯å¦æœ‰é‡è¤‡çš„å ´æ™¯
5. æ¸¬è©¦è¦†è“‹åº¦æ˜¯å¦å®Œæ•´
6. æ­¥é©Ÿæ˜¯å¦æ¸…æ™°å¯æ¸¬è©¦
```

**AI å›æ‡‰ç¯„ä¾‹**:
```
å“è³ªæª¢æŸ¥çµæœ:

âœ… èªæ³•æ­£ç¢º
âœ… ä½¿ç”¨æ¥­å‹™èªè¨€

âš ï¸ æ”¹å–„å»ºè­°:

1. Scenario "æª¢æŸ¥è¨‚å–®ç‹€æ…‹" åŒ…å«å¤šå€‹è·è²¬
   å»ºè­°æ‹†åˆ†ç‚º:
   - "æŸ¥è©¢å­˜åœ¨çš„è¨‚å–®"
   - "æŸ¥è©¢ä¸å­˜åœ¨çš„è¨‚å–®"

2. æ­¥é©Ÿ "æˆ‘é»æ“Š id ç‚º 'submit-btn' çš„æŒ‰éˆ•"
   åŒ…å«æŠ€è¡“ç´°ç¯€,å»ºè­°æ”¹ç‚º:
   "æˆ‘é»æ“Šæäº¤æŒ‰éˆ•"

3. ç¼ºå°‘ç•°å¸¸è™•ç†å ´æ™¯:
   - ç¶²è·¯é€£ç·šå¤±æ•—
   - ä¼ºæœå™¨éŒ¯èª¤(500)

4. Scenario Outline å¯åˆä½µ:
   "æ¸¬è©¦ç„¡æ•ˆEmail" èˆ‡ "æ¸¬è©¦Emailæ ¼å¼"
   å¯ä½¿ç”¨ Scenario Outline åˆä½µ
```

---

### 9.2 BDD èˆ‡ Specification by Example (SBE) æ•´åˆ

#### 9.2.1 SBE æ¦‚å¿µå›é¡§

**Specification by Example** (ç¯„ä¾‹é©…å‹•è¦æ ¼):
```
æ ¸å¿ƒæ¦‚å¿µ:
ä½¿ç”¨å…·é«”ç¯„ä¾‹(Examples)ä¾†æè¿°èˆ‡é©—è­‰ç³»çµ±è¡Œç‚º

èˆ‡ BDD çš„é—œä¿‚:
BDD æ˜¯å¯¦è¸ SBE çš„ä¸€ç¨®æ–¹æ³•
SBE å¼·èª¿ç”¨ç¯„ä¾‹æºé€šéœ€æ±‚
BDD æä¾›å…·é«”çš„å¯¦è¸æ¡†æ¶(Three Amigos, Gherkin)
```

```mermaid
graph LR
    A[æŠ½è±¡éœ€æ±‚] --> B[å…·é«”ç¯„ä¾‹]
    B --> C[å…±åŒç†è§£]
    C --> D[è‡ªå‹•åŒ–é©—è­‰]
    D --> E[Living Documentation]
    
    style A fill:#ffe1e1
    style B fill:#fff4e1
    style C fill:#e1f5ff
    style D fill:#e7f5e1
    style E fill:#f0e1ff
```

#### 9.2.2 æ•´åˆå¯¦è¸:å¾ç¯„ä¾‹åˆ°è¦æ ¼

**éšæ®µ 1:æ”¶é›†é—œéµç¯„ä¾‹**

```markdown
## User Story: è¨ˆç®—é‹è²»

**è¦å‰‡**: è¨‚å–®æ»¿ 1000 å…ƒå…é‹è²»,æœªæ»¿æ”¶ 80 å…ƒé‹è²»

**é—œéµç¯„ä¾‹**:
- è¨‚å–® 999 å…ƒ â†’ é‹è²» 80 å…ƒ â†’ ç¸½è¨ˆ 1079 å…ƒ
- è¨‚å–® 1000 å…ƒ â†’ é‹è²» 0 å…ƒ â†’ ç¸½è¨ˆ 1000 å…ƒ
- è¨‚å–® 1001 å…ƒ â†’ é‹è²» 0 å…ƒ â†’ ç¸½è¨ˆ 1001 å…ƒ

**å•é¡Œ**:
- 1000 å…ƒæ˜¯å¦åŒ…å«é‹è²»å‰é‚„æ˜¯é‹è²»å¾Œ?
  â†’ ç¢ºèª:é‹è²»å‰é‡‘é¡
- åé åœ°å€æ˜¯å¦ä¸åŒ?
  â†’ ç¢ºèª:å¦é–‹ Story
```

**éšæ®µ 2:ç¯„ä¾‹è½‰åŒ–ç‚º Feature File**

```gherkin
Feature: è¨ˆç®—é‹è²»

  Business Rule: è¨‚å–®æ»¿ 1000 å…ƒå…é‹è²»,æœªæ»¿æ”¶ 80 å…ƒ

  Scenario Outline: æ ¹æ“šè¨‚å–®é‡‘é¡è¨ˆç®—é‹è²»
    Given è¨‚å–®é‡‘é¡ç‚º <order_amount> å…ƒ
    When ç³»çµ±è¨ˆç®—é‹è²»
    Then é‹è²»æ‡‰è©²æ˜¯ <shipping_fee> å…ƒ
    And è¨‚å–®ç¸½è¨ˆæ‡‰è©²æ˜¯ <total> å…ƒ

    Examples: é—œéµç¯„ä¾‹
      | order_amount | shipping_fee | total |
      | 999          | 80           | 1079  |
      | 1000         | 0            | 1000  |
      | 1001         | 0            | 1001  |
      | 500          | 80           | 580   |
      | 2000         | 0            | 2000  |
```

**éšæ®µ 3:è‡ªå‹•åŒ–é©—è­‰**

```python
@when('ç³»çµ±è¨ˆç®—é‹è²»')
def step_impl(context):
    order_amount = context.order_amount
    context.shipping_fee = calculate_shipping_fee(order_amount)
    context.total = order_amount + context.shipping_fee

def calculate_shipping_fee(order_amount):
    FREE_SHIPPING_THRESHOLD = 1000
    SHIPPING_FEE = 80
    
    if order_amount >= FREE_SHIPPING_THRESHOLD:
        return 0
    else:
        return SHIPPING_FEE
```

---

### 9.3 å¾®æœå‹™æ¶æ§‹ä¸‹çš„ BDD æŒ‘æˆ°

#### 9.3.1 å¾®æœå‹™ BDD çš„ç‰¹æ®Šè€ƒé‡

```mermaid
graph TB
    subgraph Frontend
        UI[Web UI]
    end
    
    subgraph Services
        Order[è¨‚å–®æœå‹™]
        Payment[æ”¯ä»˜æœå‹™]
        Inventory[åº«å­˜æœå‹™]
        Notification[é€šçŸ¥æœå‹™]
    end
    
    UI --> Order
    Order --> Payment
    Order --> Inventory
    Order --> Notification
    
    subgraph BDD Tests
        E2E[End-to-End BDD]
        Contract[å¥‘ç´„æ¸¬è©¦]
        Component[å…ƒä»¶ BDD]
    end
    
    E2E -.æ¸¬è©¦.-> UI
    Contract -.æ¸¬è©¦.-> Order
    Contract -.æ¸¬è©¦.-> Payment
    Component -.æ¸¬è©¦.-> Inventory
    
    style UI fill:#e1f5ff
    style Order fill:#fff4e1
    style E2E fill:#e7f5e1
```

**æŒ‘æˆ° 1:æ¸¬è©¦å±¤ç´šé¸æ“‡**

```
End-to-End BDD:
âœ… å„ªé»:æ¸¬è©¦çœŸå¯¦ä½¿ç”¨è€…æµç¨‹
âŒ ç¼ºé»:æ…¢ã€è„†å¼±ã€é›£ç¶­è­·

Contract BDD:
âœ… å„ªé»:å¿«é€Ÿã€ç©©å®šã€ç¨ç«‹
âŒ ç¼ºé»:ç„¡æ³•æ¸¬è©¦æ•´åˆæµç¨‹

å»ºè­°:
â†’ é‡‘å­—å¡”ç­–ç•¥:å¤šæ•¸ Component/Contract,å°‘æ•¸ E2E
â†’ é—œéµæµç¨‹ä½¿ç”¨ E2E BDD
â†’ æœå‹™é–“äº’å‹•ä½¿ç”¨ Contract BDD
```

**æŒ‘æˆ° 2:æ¸¬è©¦è³‡æ–™ç®¡ç†**

```
å•é¡Œ:
å¤šå€‹æœå‹™å„æœ‰è‡ªå·±çš„è³‡æ–™åº«
æ¸¬è©¦è³‡æ–™æº–å‚™è¤‡é›œ

è§£æ±ºæ–¹æ¡ˆ:
1. Test Data Builders
2. Shared Test Database
3. Service Virtualization
4. Database Seeding Scripts
```

**ç¯„ä¾‹:Contract BDD**

```gherkin
@contract @payment-service
Feature: æ”¯ä»˜æœå‹™å¥‘ç´„
  
  Scenario: è¨‚å–®æœå‹™å‘¼å«æ”¯ä»˜æœå‹™è™•ç†ä»˜æ¬¾
    Given æ”¯ä»˜æœå‹™å·²å•Ÿå‹•
    And æ”¯ä»˜æœå‹™æœŸæœ›æ”¶åˆ°ä»¥ä¸‹è«‹æ±‚:
      """
      POST /api/payments
      {
        "order_id": "ORD-001",
        "amount": 1000,
        "currency": "TWD"
      }
      """
    When è¨‚å–®æœå‹™ç™¼é€ä»˜æ¬¾è«‹æ±‚
    Then æ”¯ä»˜æœå‹™æ‡‰è©²å›æ‡‰:
      """
      {
        "payment_id": "PAY-001",
        "status": "success"
      }
      """
    And HTTP ç‹€æ…‹ç¢¼æ‡‰è©²æ˜¯ 200
```

---

### 9.4 BDD çš„æœªä¾†è¶¨å‹¢

#### 9.4.1 æŠ€è¡“è¶¨å‹¢

**è¶¨å‹¢ 1:AI é©…å‹•çš„ BDD**
```
ç™¼å±•æ–¹å‘:
- AI è‡ªå‹•ç”Ÿæˆ Feature Files
- AI å»ºè­°æ¸¬è©¦å ´æ™¯
- AI æª¢æ¸¬è¦æ ¼å“è³ª
- AI é æ¸¬ç¼ºé™·

å½±éŸ¿:
SA çš„è§’è‰²å°‡å¾"æ’°å¯«"è½‰ç‚º"å¯©æŸ¥èˆ‡ç²¾ç…‰"
æ›´å¤šæ™‚é–“èŠ±åœ¨æ¥­å‹™ç†è§£è€Œéæ–‡ä»¶æ’°å¯«
```

**è¶¨å‹¢ 2:ä½ä»£ç¢¼/ç„¡ä»£ç¢¼ BDD å·¥å…·**
```
ç™¼å±•æ–¹å‘:
- è¦–è¦ºåŒ– Gherkin ç·¨è¼¯å™¨
- æ‹–æ‹‰å¼ Step Definitions
- è‡ªå‹•ç”Ÿæˆæ¸¬è©¦ç¨‹å¼ç¢¼

å½±éŸ¿:
é™ä½æŠ€è¡“é–€æª»
éæŠ€è¡“äººå“¡ä¹Ÿèƒ½åƒèˆ‡è‡ªå‹•åŒ–
```

**è¶¨å‹¢ 3:Living Documentation å¹³å°**
```
ç™¼å±•æ–¹å‘:
- Feature Files å³æ™‚é è¦½
- èˆ‡ Wiki/Confluence æ•´åˆ
- äº’å‹•å¼æ–‡ä»¶
- ç‰ˆæœ¬è¿½è¹¤èˆ‡æ¯”è¼ƒ

å½±éŸ¿:
æ–‡ä»¶èˆ‡ç¨‹å¼ç¢¼çœŸæ­£åŒæ­¥
åˆ©å®³é—œä¿‚äººç›´æ¥æŸ¥é–±æœ€æ–°è¦æ ¼
```

#### 9.4.2 æ–¹æ³•è«–è¶¨å‹¢

**è¶¨å‹¢ 1:BDD + DevOps æ·±åº¦æ•´åˆ**
```
Shift-Left Testing:
BDD å‰ç§»åˆ°éœ€æ±‚éšæ®µ
Discovery Workshop æˆç‚ºå¿…è¦æµç¨‹

Continuous Everything:
- Continuous Discovery
- Continuous Formulation
- Continuous Automation
- Continuous Validation
```

**è¶¨å‹¢ 2:BDD for AI/ML ç³»çµ±**
```
æŒ‘æˆ°:
AI/ML ç³»çµ±è¡Œç‚ºä¸ç¢ºå®šæ€§é«˜
å‚³çµ± BDD é›£ä»¥æè¿°æ©Ÿç‡æ€§è¡Œç‚º

æ–°æ–¹æ³•:
Given è¨“ç·´è³‡æ–™é›†åŒ…å« 1000 ç­†å®¢æˆ¶è³‡æ–™
When AI æ¨¡å‹é æ¸¬å®¢æˆ¶æµå¤±
Then æº–ç¢ºç‡æ‡‰è©² >= 85%
And å‡é™½æ€§ç‡æ‡‰è©² <= 10%
```

---

### ğŸ“ ç¬¬ä¹ç« ç¸½çµ

#### é—œéµè¦é»å›é¡§

âœ… **AI è¼”åŠ© BDD**
- AI ç”Ÿæˆ Feature Files
- AI å“è³ªæª¢æŸ¥
- AI æ¸¬è©¦è³‡æ–™ç”Ÿæˆ
- äººå·¥å¯©æŸ¥ä»ä¸å¯å°‘

âœ… **SBE æ•´åˆ**
- ç¯„ä¾‹é©…å‹•è¦æ ¼
- å…·é«”ç¯„ä¾‹åˆ° Feature Files
- è‡ªå‹•åŒ–é©—è­‰
- Living Documentation

âœ… **å¾®æœå‹™ BDD**
- æ¸¬è©¦å±¤ç´šé¸æ“‡
- Contract Testing
- æ¸¬è©¦è³‡æ–™ç®¡ç†
- æœå‹™è™›æ“¬åŒ–

âœ… **æœªä¾†è¶¨å‹¢**
- AI é©…å‹•çš„ BDD
- ä½ä»£ç¢¼å·¥å…·
- Living Documentation å¹³å°
- BDD + DevOps æ•´åˆ

---

**ä¸‹ä¸€ç« é å‘Š**:
æœ€å¾Œä¸€ç« **é™„éŒ„**å°‡æä¾›å¯¦ç”¨çš„ Gherkin èªæ³•é€ŸæŸ¥è¡¨ã€BDD æ–‡ä»¶æ¨¡æ¿ã€å¸¸è¦‹å·¥å…·æ¸…å–®ã€æ¨è–¦å­¸ç¿’è³‡æº,ä»¥åŠå®Œæ•´çš„ BDD æª¢æŸ¥æ¸…å–®,ä¾›åœ˜éšŠæ—¥å¸¸ä½¿ç”¨ã€‚

---

## ç¬¬åç« ã€€é™„éŒ„

### 10.1 Gherkin èªæ³•é€ŸæŸ¥è¡¨

#### 10.1.1 æ ¸å¿ƒé—œéµå­—

| é—œéµå­— | ç”¨é€” | ç¯„ä¾‹ |
|--------|------|------|
| `Feature:` | å®šç¾©åŠŸèƒ½ | `Feature: ä½¿ç”¨è€…ç™»å…¥` |
| `Background:` | å…±ç”¨å‰ç½®æ¢ä»¶ | `Background:` |
| `Scenario:` | å®šç¾©å ´æ™¯ | `Scenario: æˆåŠŸç™»å…¥` |
| `Scenario Outline:` | åƒæ•¸åŒ–å ´æ™¯ | `Scenario Outline: æ¸¬è©¦å¤šç¨®è¼¸å…¥` |
| `Examples:` | æä¾›æ¸¬è©¦è³‡æ–™ | `Examples:` |
| `Given` | å‰ç½®æ¢ä»¶ | `Given æˆ‘åœ¨ç™»å…¥é é¢` |
| `When` | åŸ·è¡Œå‹•ä½œ | `When æˆ‘é»æ“Šç™»å…¥æŒ‰éˆ•` |
| `Then` | é æœŸçµæœ | `Then æˆ‘æ‡‰è©²çœ‹åˆ°æœƒå“¡é¦–é ` |
| `And` | é€£æ¥æ­¥é©Ÿ | `And æˆ‘è¼¸å…¥å¯†ç¢¼` |
| `But` | é€£æ¥æ­¥é©Ÿ(å°æ¯”) | `But æˆ‘ä¸æ‡‰è©²çœ‹åˆ°éŒ¯èª¤` |
| `*` | è¬ç”¨æ­¥é©Ÿé€£æ¥è© | `* æˆ‘è¼¸å…¥å¸³è™Ÿ` |

#### 10.1.2 æ¨™ç±¤(Tags)

```gherkin
# Feature å±¤ç´šæ¨™ç±¤
@authentication @high-priority
Feature: ä½¿ç”¨è€…ç™»å…¥

  # Scenario å±¤ç´šæ¨™ç±¤
  @smoke @happy-path
  Scenario: æˆåŠŸç™»å…¥
  
  @validation @skip
  Scenario: å¯†ç¢¼éŒ¯èª¤
```

**å¸¸ç”¨æ¨™ç±¤**:
- `@smoke` - å†’ç…™æ¸¬è©¦
- `@regression` - è¿´æ­¸æ¸¬è©¦
- `@wip` - é–‹ç™¼ä¸­
- `@skip` / `@ignore` - è·³éåŸ·è¡Œ
- `@slow` - åŸ·è¡Œç·©æ…¢çš„æ¸¬è©¦
- `@manual` - æ‰‹å‹•æ¸¬è©¦
- `@bug-123` - é—œè¯ Bug ID

#### 10.1.3 è³‡æ–™è¡¨æ ¼(Data Tables)

**æ°´å¹³è¡¨æ ¼**:
```gherkin
Given ç³»çµ±ä¸­å­˜åœ¨ä»¥ä¸‹ä½¿ç”¨è€…:
  | name | email            | role  |
  | å¼µä¸‰ | user1@test.com   | admin |
  | æå›› | user2@test.com   | user  |
```

**å‚ç›´è¡¨æ ¼**:
```gherkin
Given æˆ‘å»ºç«‹ä½¿ç”¨è€…,è³‡æ–™å¦‚ä¸‹:
  | å§“å   | å¼µä¸‰           |
  | Email  | user@test.com  |
  | è§’è‰²   | admin          |
```

#### 10.1.4 å¤šè¡Œæ–‡å­—(Doc Strings)

```gherkin
Given æˆ‘æº–å‚™ä»¥ä¸‹ JSON è³‡æ–™:
  """
  {
    "name": "å¼µä¸‰",
    "email": "user@test.com"
  }
  """

Then ç³»çµ±æ‡‰è©²å›æ‡‰:
  """
  è¨»å†ŠæˆåŠŸ!
  
  æ­¡è¿åŠ å…¥æˆ‘å€‘çš„æœå‹™ã€‚
  """
```

---

### 10.2 BDD æ–‡ä»¶æ¨¡æ¿

#### 10.2.1 Feature File æ¨™æº–æ¨¡æ¿

```gherkin
# features/[module]/[feature_name].feature

@[module] @[priority]
Feature: [åŠŸèƒ½åç¨±]
  ä½œç‚º [ä½¿ç”¨è€…è§’è‰²]
  æˆ‘æƒ³è¦ [åŠŸèƒ½æè¿°]
  ä»¥ä¾¿ [æ¥­å‹™åƒ¹å€¼]
  
  # æ¥­å‹™è¦å‰‡èªªæ˜(å¯é¸)
  Business Rules:
  - è¦å‰‡ 1
  - è¦å‰‡ 2
  
  # ç›¸é—œæ–‡ä»¶(å¯é¸)
  References:
  - User Story: US-XXX
  - Use Case: UC-XXX
  - æ¥­å‹™æ–‡ä»¶: [é€£çµ]

  Background: [å…±åŒå‰ç½®æ¢ä»¶æè¿°]
    Given [æ­¥é©Ÿ 1]
    And [æ­¥é©Ÿ 2]

  @smoke @happy-path
  Scenario: [æ­£å¸¸æƒ…æ³æè¿°]
    Given [å‰ç½®æ¢ä»¶]
    When [åŸ·è¡Œå‹•ä½œ]
    Then [é æœŸçµæœ]
    And [é¡å¤–é©—è­‰]

  @validation
  Scenario Outline: [é©—è­‰å ´æ™¯æè¿°]
    Given [å‰ç½®æ¢ä»¶] "<åƒæ•¸>"
    When [å‹•ä½œ] "<åƒæ•¸>"
    Then [çµæœ] "<åƒæ•¸>"
    
    Examples: [è³‡æ–™æè¿°]
      | åƒæ•¸1 | åƒæ•¸2 | é æœŸçµæœ |
      | å€¼1   | å€¼2   | çµæœ1    |
      | å€¼3   | å€¼4   | çµæœ2    |

  @error-handling
  Scenario: [ç•°å¸¸è™•ç†æè¿°]
    Given [å‰ç½®æ¢ä»¶]
    When [è§¸ç™¼ç•°å¸¸çš„å‹•ä½œ]
    Then [éŒ¯èª¤è™•ç†çµæœ]
```

#### 10.2.2 Example Mapping æœƒè­°è¨˜éŒ„æ¨¡æ¿

```markdown
# Example Mapping: [Story åç¨±]

**æ—¥æœŸ**: YYYY-MM-DD
**åƒèˆ‡è€…**: BA, SA, Dev, QA
**Story ID**: US-XXX
**ä¼°è¨ˆæ™‚é–“**: 25 åˆ†é˜

## User Story
```
èº«ç‚º [è§’è‰²]
æˆ‘æƒ³è¦ [åŠŸèƒ½]
ä»¥ä¾¿ [åƒ¹å€¼]
```

## æ¥­å‹™è¦å‰‡èˆ‡ç¯„ä¾‹

### ğŸ“˜ è¦å‰‡ 1: [è¦å‰‡æè¿°]
- âœ… ç¯„ä¾‹ 1: [å…·é«”ç¯„ä¾‹]
- âœ… ç¯„ä¾‹ 2: [å…·é«”ç¯„ä¾‹]
- âœ… ç¯„ä¾‹ 3: [å…·é«”ç¯„ä¾‹]

### ğŸ“˜ è¦å‰‡ 2: [è¦å‰‡æè¿°]
- âœ… ç¯„ä¾‹ 1: [å…·é«”ç¯„ä¾‹]
- âœ… ç¯„ä¾‹ 2: [å…·é«”ç¯„ä¾‹]

## â“ å¾…é‡æ¸…å•é¡Œ
1. [å•é¡Œæè¿°] - è² è²¬äºº:[å§“å] - æœŸé™:[æ—¥æœŸ]
2. [å•é¡Œæè¿°] - è² è²¬äºº:[å§“å] - æœŸé™:[æ—¥æœŸ]

## ğŸ›  æŠ€è¡“è€ƒé‡
- [æŠ€è¡“é» 1]
- [æŠ€è¡“é» 2]

## âœ… æ±ºè­°
- [ ] Story ç‹€æ…‹: â˜‘ Ready / âš  Need Work / ğŸ“ Too Big
- [ ] å¾ŒçºŒè¡Œå‹•:
  - SA: æ’°å¯« Feature File - æœŸé™:[æ—¥æœŸ]
  - Dev: è©•ä¼°æŠ€è¡“æ–¹æ¡ˆ - æœŸé™:[æ—¥æœŸ]
  - QA: æº–å‚™æ¸¬è©¦è³‡æ–™ - æœŸé™:[æ—¥æœŸ]

## ğŸ“ é™„ä»¶
- Example Map ç…§ç‰‡: [é€£çµ]
- ç›¸é—œæ–‡ä»¶: [é€£çµ]
```

---

### 10.3 å¸¸è¦‹ BDD å·¥å…·èˆ‡æ’ä»¶

#### 10.3.1 BDD æ¡†æ¶

| å·¥å…· | èªè¨€ | å®˜ç¶² | ç‰¹è‰² |
|------|------|------|------|
| **Cucumber** | Java/Ruby/JS | https://cucumber.io/ | æœ€æµè¡Œ,å¤šèªè¨€æ”¯æ´ |
| **Behave** | Python | https://behave.readthedocs.io/ | Python é¦–é¸,ç°¡å–®æ˜“ç”¨ |
| **SpecFlow** | .NET/C# | https://specflow.org/ | .NET ç”Ÿæ…‹ç³»æœ€ä½³æ•´åˆ |
| **JBehave** | Java | https://jbehave.org/ | ä¼æ¥­ç´š Java BDD æ¡†æ¶ |
| **Serenity BDD** | Java | https://serenity-bdd.info/ | ç²¾ç¾å ±å‘Š,å¤šå±¤æ¶æ§‹ |
| **Pytest-BDD** | Python | https://pytest-bdd.readthedocs.io/ | èˆ‡ Pytest æ•´åˆ |
| **Cucumber.js** | JavaScript | https://github.com/cucumber/cucumber-js | Node.js BDD æ¡†æ¶ |

#### 10.3.2 IDE æ’ä»¶

| IDE | æ’ä»¶åç¨± | åŠŸèƒ½ |
|-----|----------|------|
| **VS Code** | Cucumber (Gherkin) Full Support | èªæ³•é«˜äº®ã€è‡ªå‹•å®Œæˆã€è·³è½‰ |
| **VS Code** | Behave VSC | Behave å°ˆç”¨æ”¯æ´ |
| **IntelliJ IDEA** | Cucumber for Java | Gherkin ç·¨è¼¯ã€åŸ·è¡Œã€å°èˆª |
| **Visual Studio** | SpecFlow | SpecFlow æ•´åˆé–‹ç™¼ç’°å¢ƒ |
| **PyCharm** | Gherkin | Gherkin èªæ³•æ”¯æ´ |

#### 10.3.3 å ±å‘Šå·¥å…·

| å·¥å…· | èªªæ˜ | å®˜ç¶² |
|------|------|------|
| **Allure** | ç²¾ç¾çš„æ¸¬è©¦å ±å‘Šæ¡†æ¶ | https://allure.qatools.ru/ |
| **Cucumber Reports** | Cucumber å®˜æ–¹å ±å‘Š | å…§å»º |
| **Extent Reports** | äº’å‹•å¼ HTML å ±å‘Š | https://www.extentreports.com/ |
| **ReportPortal** | å³æ™‚æ¸¬è©¦å ±å‘Šåˆ†æå¹³å° | https://reportportal.io/ |

#### 10.3.4 å”ä½œå·¥å…·

| å·¥å…· | ç”¨é€” | å®˜ç¶² |
|------|------|------|
| **Miro** | Example Mapping ç·šä¸Šç™½æ¿ | https://miro.com/ |
| **Mural** | è¦–è¦ºå”ä½œå¹³å° | https://www.mural.co/ |
| **FigJam** | Figma ç·šä¸Šç™½æ¿ | https://www.figma.com/figjam/ |
| **Cucumber Studio** | BDD å”ä½œå¹³å°(ä»˜è²») | https://cucumber.io/tools/cucumberstudio/ |

---

### 10.4 æ¨è–¦å­¸ç¿’è³‡æº

#### 10.4.1 æ›¸ç±

**å…¥é–€æ›¸ç±**:
1. **ã€ŠBDD in Actionã€‹** - John Ferguson Smart
   - å®Œæ•´çš„ BDD å¯¦è¸æŒ‡å—
   - åŒ…å«å¤§é‡å¯¦æˆ°æ¡ˆä¾‹

2. **ã€ŠSpecification by Exampleã€‹** - Gojko Adzic
   - SBE ç¶“å…¸è‘—ä½œ
   - å±•ç¤ºå¦‚ä½•ç”¨ç¯„ä¾‹é©…å‹•é–‹ç™¼

3. **ã€ŠThe Cucumber Bookã€‹** - Matt Wynne, Aslak HellesÃ¸y
   - Cucumber å®˜æ–¹æŒ‡å—
   - æ·±å…¥æ·ºå‡ºçš„æ•™å­¸

**é€²éšæ›¸ç±**:
4. **ã€ŠDiscovery: Explore Behaviour Using Examplesã€‹** - GÃ¡spÃ¡r Nagy, Seb Rose
   - å°ˆæ³¨æ–¼ Discovery éšæ®µ
   - å¯¦ç”¨çš„å”ä½œæŠ€å·§

5. **ã€ŠFormulation: Documenting Behaviorã€‹** - Seb Rose, GÃ¡spÃ¡r Nagy
   - å¦‚ä½•æ’°å¯«å„ªè³ªè¦æ ¼
   - Feature Files æœ€ä½³å¯¦å‹™

#### 10.4.2 ç·šä¸Šèª²ç¨‹

1. **Cucumber School** (å…è²»)
   - https://school.cucumber.io/
   - å®˜æ–¹å…è²»èª²ç¨‹

2. **Test Automation University - BDD with Cucumber** (å…è²»)
   - https://testautomationu.applitools.com/
   - å¯¦æˆ°å°å‘èª²ç¨‹

3. **Udemy - BDD ç³»åˆ—èª²ç¨‹** (ä»˜è²»)
   - å¤šç¨®èªè¨€å¯¦ä½œèª²ç¨‹

#### 10.4.3 ç¤¾ç¾¤èˆ‡è«–å£‡

1. **Cucumber Community**
   - Slack: https://cucumber.io/community
   - å®˜æ–¹ç¤¾ç¾¤é »é“

2. **BDD on Stack Overflow**
   - Tag: `[bdd]`, `[cucumber]`, `[gherkin]`

3. **GitHub Discussions**
   - å„ BDD æ¡†æ¶çš„ GitHub Discussions

---

### 10.5 BDD å®Œæ•´æª¢æŸ¥æ¸…å–®

#### 10.5.1 Discovery éšæ®µæª¢æŸ¥æ¸…å–®

```markdown
## Discovery Workshop Checklist

### æœƒå‰æº–å‚™
- [ ] ç¢ºèª User Story å·²æ’°å¯«
- [ ] é ç´„æœƒè­°å®¤(25åˆ†é˜)
- [ ] æº–å‚™ä¾¿åˆ©è²¼èˆ‡ç™½æ¿/ç·šä¸Šå·¥å…·
- [ ] é€šçŸ¥ Three Amigos åƒèˆ‡
- [ ] æº–å‚™ Acceptance Criteria

### æœƒè­°é€²è¡Œ
- [ ] å¿«é€Ÿå›é¡§ User Story
- [ ] è­˜åˆ¥æ¥­å‹™è¦å‰‡(é»ƒè‰²ä¾¿åˆ©è²¼)
- [ ] æ¯å€‹è¦å‰‡æä¾›å…·é«”ç¯„ä¾‹(ç¶ è‰²ä¾¿åˆ©è²¼)
- [ ] è¨˜éŒ„å¾…é‡æ¸…å•é¡Œ(ç´…è‰²ä¾¿åˆ©è²¼)
- [ ] è¨è«–æŠ€è¡“è€ƒé‡(è—è‰²ä¾¿åˆ©è²¼)
- [ ] æ±ºå®š Story æ˜¯å¦ Ready

### æœƒå¾Œè¡Œå‹•
- [ ] æ‹ç…§è¨˜éŒ„ Example Map
- [ ] æ›´æ–°å•é¡Œåˆ°å°ˆæ¡ˆç®¡ç†å·¥å…·
- [ ] æŒ‡æ´¾å•é¡Œè² è²¬äººèˆ‡æœŸé™
- [ ] SA æ’°å¯« Feature File
```

#### 10.5.2 Formulation éšæ®µæª¢æŸ¥æ¸…å–®

```markdown
## Feature File æ’°å¯« Checklist

### Feature å±¤ç´š
- [ ] Feature æè¿°æ¸…æ¥š,åŒ…å«"ä½œç‚º...æˆ‘æƒ³è¦...ä»¥ä¾¿..."
- [ ] Business Rules æ˜ç¢ºåˆ—å‡º
- [ ] References é€£çµåˆ°ç›¸é—œæ–‡ä»¶
- [ ] æ¨™ç±¤ä½¿ç”¨æ°ç•¶(@module, @priority)

### Background
- [ ] åƒ…åŒ…å«çœŸæ­£å…±ç”¨çš„å‰ç½®æ¢ä»¶
- [ ] ä¸è¶…é 5 å€‹æ­¥é©Ÿ
- [ ] é¿å…åŒ…å«é©—è­‰(Then)

### Scenario
- [ ] æ¨™é¡Œæè¿°æ¸…æ¥š
- [ ] è·è²¬å–®ä¸€
- [ ] ä½¿ç”¨æ¥­å‹™èªè¨€,é¿å…æŠ€è¡“ç´°ç¯€
- [ ] Given-When-Then çµæ§‹æ­£ç¢º
- [ ] æ­¥é©Ÿæ•¸é‡åˆç†(ä¸è¶…é 10 æ­¥)

### Scenario Outline
- [ ] Examples æœ‰æè¿°æ€§åç¨±
- [ ] åƒæ•¸åç¨±æ¸…æ¥š
- [ ] æ¸¬è©¦è³‡æ–™æœ‰ä»£è¡¨æ€§

### è¦†è“‹åº¦
- [ ] åŒ…å« Happy Path
- [ ] åŒ…å«ä¸»è¦ç•°å¸¸æƒ…æ³
- [ ] åŒ…å«é‚Šç•Œæ¢ä»¶
- [ ] åŒ…å«æ¥­å‹™è¦å‰‡é©—è­‰

### æ¨™ç±¤
- [ ] @smoke:å†’ç…™æ¸¬è©¦
- [ ] @happy-path:æ­£å¸¸æµç¨‹
- [ ] @validation:é©—è­‰å ´æ™¯
- [ ] @error-handling:ç•°å¸¸è™•ç†
- [ ] å„ªå…ˆç´šæ¨™ç±¤
```

#### 10.5.3 Automation éšæ®µæª¢æŸ¥æ¸…å–®

```markdown
## Step Definitions å¯¦ä½œ Checklist

### ç¨‹å¼ç¢¼å“è³ª
- [ ] æ­¥é©ŸåŒ¹é…æ­£ç¢º
- [ ] åƒæ•¸æå–æ­£ç¢º
- [ ] é¿å…ç¡¬ç·¨ç¢¼
- [ ] é©ç•¶ä½¿ç”¨ Page Object æ¨¡å¼
- [ ] éŒ¯èª¤è¨Šæ¯æ¸…æ¥š

### æ¸¬è©¦è³‡æ–™
- [ ] æ¸¬è©¦è³‡æ–™æº–å‚™å®Œæ•´
- [ ] ä½¿ç”¨ Background/Hooks æº–å‚™ç’°å¢ƒ
- [ ] æ¸¬è©¦çµæŸå¾Œæ¸…ç†è³‡æ–™
- [ ] æ¸¬è©¦è³‡æ–™ç¨ç«‹,å¯é‡è¤‡åŸ·è¡Œ

### ç­‰å¾…èˆ‡åŒæ­¥
- [ ] é©ç•¶ä½¿ç”¨é¡¯å¼ç­‰å¾…
- [ ] é¿å…ä½¿ç”¨ sleep
- [ ] è™•ç†éåŒæ­¥æ“ä½œ

### å¯ç¶­è­·æ€§
- [ ] å…±ç”¨æ­¥é©Ÿæå–åˆ°å…±ç”¨æª”æ¡ˆ
- [ ] é©ç•¶ä½¿ç”¨è¼”åŠ©å‡½å¼
- [ ] ç¨‹å¼ç¢¼æœ‰é©ç•¶è¨»è§£
- [ ] éµå¾ªåœ˜éšŠç·¨ç¢¼è¦ç¯„
```

#### 10.5.4 CI/CD æ•´åˆæª¢æŸ¥æ¸…å–®

```markdown
## CI/CD æ•´åˆ Checklist

### Pipeline è¨­å®š
- [ ] BDD æ¸¬è©¦ç´å…¥ CI Pipeline
- [ ] æ¸¬è©¦å¤±æ•—æœƒé˜»æ­¢éƒ¨ç½²
- [ ] ä¸¦è¡ŒåŸ·è¡Œæ¸¬è©¦(å¦‚é©ç”¨)
- [ ] è¨­å®šåˆç†çš„ timeout

### ç’°å¢ƒè¨­å®š
- [ ] Headless æ¨¡å¼(Web UI)
- [ ] ç’°å¢ƒè®Šæ•¸è¨­å®š(URLs, Credentials)
- [ ] æ¸¬è©¦è³‡æ–™åº«è¨­å®š
- [ ] Docker å®¹å™¨åŒ–(å¦‚é©ç”¨)

### å ±å‘Šèˆ‡é€šçŸ¥
- [ ] ç”¢ç”Ÿ HTML/JSON å ±å‘Š
- [ ] å ±å‘Šä¸Šå‚³åˆ° Artifacts
- [ ] å¤±æ•—æ™‚ç™¼é€é€šçŸ¥(Email/Slack)
- [ ] æˆªåœ–é™„åŠ åˆ°å ±å‘Š

### æ¸¬è©¦é¸æ“‡
- [ ] Commit: @smoke æ¸¬è©¦
- [ ] PR: @smoke + @regression
- [ ] Nightly: å®Œæ•´æ¸¬è©¦å¥—ä»¶
- [ ] ä½¿ç”¨æ¨™ç±¤æ§åˆ¶åŸ·è¡Œç¯„åœ
```

#### 10.5.5 ç¶­è­·éšæ®µæª¢æŸ¥æ¸…å–®

```markdown
## Feature Files ç¶­è­· Checklist

### å®šæœŸ Review (æ¯å­£)
- [ ] æª¢æŸ¥éæ™‚å ´æ™¯,æ¨™è¨˜ @deprecated
- [ ] ç§»é™¤å·²å»¢æ£„åŠŸèƒ½çš„ Feature Files
- [ ] æ›´æ–°æ¥­å‹™è¡“èª
- [ ] é‡æ§‹é‡è¤‡å ´æ™¯

### å“è³ªæª¢æŸ¥
- [ ] Gherkin èªæ³•æ­£ç¢ºæ€§
- [ ] æ¥­å‹™èªè¨€ä½¿ç”¨
- [ ] å ´æ™¯è·è²¬å–®ä¸€
- [ ] æ¸¬è©¦è¦†è“‹åº¦å®Œæ•´

### æ–‡ä»¶åŒæ­¥
- [ ] Feature Files èˆ‡ç¨‹å¼ç¢¼åŒæ­¥
- [ ] Feature Files èˆ‡ User Stories å°æ‡‰
- [ ] æ›´æ–°ç›¸é—œæ–‡ä»¶é€£çµ
- [ ] ç‰ˆæœ¬æ§ç®¡æäº¤è¨Šæ¯æ¸…æ¥š

### é‡æ§‹æ©Ÿæœƒ
- [ ] æå– Background
- [ ] åˆä½µç‚º Scenario Outline
- [ ] æ‹†åˆ†å¤§ Feature
- [ ] æ¶ˆé™¤æŠ€è¡“ç´°ç¯€
```

---

### ğŸ“ å…¨æ›¸ç¸½çµ

#### ğŸ“ BDD å­¸ç¿’æ—…ç¨‹å›é¡§

**ç¬¬ä¸€éšæ®µ:ç†è§£ BDD**
- ç¬¬ä¸€ç« :èªè­˜ BDD æ ¸å¿ƒæ¦‚å¿µ
- ç¬¬äºŒç« :ç†è§£ Discoveryã€Formulationã€Automation ä¸‰å¤§æ”¯æŸ±
- ç¬¬ä¸‰ç« :æŒæ¡ Gherkin èªæ³•

**ç¬¬äºŒéšæ®µ:å¯¦è¸ BDD**
- ç¬¬å››ç« :å°‡ BDD èˆ‡ç³»çµ±åˆ†æå·¥ä½œæ•´åˆ
- ç¬¬äº”ç« :å»ºç«‹ BDD é–‹ç™¼æµç¨‹èˆ‡ Three Amigos å”ä½œ
- ç¬¬å…­ç« :å¯¦ä½œè‡ªå‹•åŒ–æ¸¬è©¦èˆ‡ CI/CD æ•´åˆ

**ç¬¬ä¸‰éšæ®µ:ç²¾é€š BDD**
- ç¬¬ä¸ƒç« :é€éå¯¦æˆ°æ¡ˆä¾‹å­¸ç¿’ä¸åŒé ˜åŸŸæ‡‰ç”¨
- ç¬¬å…«ç« :æˆåŠŸå°å…¥ BDD åˆ°çµ„ç¹”
- ç¬¬ä¹ç« :æ¢ç´¢ AI è¼”åŠ©èˆ‡é«˜éšæ‡‰ç”¨
- ç¬¬åç« :å¯¦ç”¨è³‡æºèˆ‡æª¢æŸ¥æ¸…å–®

---

#### ğŸ¯ BDD æˆåŠŸçš„é—œéµåŸå‰‡

**åŸå‰‡ 1:å”ä½œå„ªå…ˆæ–¼å·¥å…·**
```
BDD çš„æ ¸å¿ƒæ˜¯"å°è©±",ä¸æ˜¯"æ¸¬è©¦"
å·¥å…·å’Œè‡ªå‹•åŒ–æ˜¯è¼”åŠ©,ä¸æ˜¯ç›®çš„
æŠ•è³‡åœ¨å»ºç«‹å”ä½œæ–‡åŒ–ä¸Š
```

**åŸå‰‡ 2:å¾å…·é«”ç¯„ä¾‹å‡ºç™¼**
```
ç”¨å…·é«”ç¯„ä¾‹è¨è«–éœ€æ±‚
é¿å…æŠ½è±¡ã€æ¨¡ç³Šçš„æè¿°
ç¯„ä¾‹æ˜¯å…±åŒç†è§£çš„åŸºç¤
```

**åŸå‰‡ 3:æŒçºŒå­¸ç¿’èˆ‡æ”¹å–„**
```
BDD æ˜¯ä¸€å€‹æ—…ç¨‹,ä¸æ˜¯çµ‚é»
å®šæœŸå›é¡§èˆ‡èª¿æ•´æµç¨‹
å¾éŒ¯èª¤ä¸­å­¸ç¿’
æ…¶ç¥å°æˆåŠŸ
```

**åŸå‰‡ 4:é©æ‡‰åœ˜éšŠèˆ‡å°ˆæ¡ˆ**
```
æ²’æœ‰ä¸€é«”é©ç”¨çš„ BDD
æ ¹æ“šåœ˜éšŠèˆ‡å°ˆæ¡ˆèª¿æ•´å¯¦è¸
éˆæ´»æ‡‰ç”¨,ä¸æ‹˜æ³¥æ–¼å½¢å¼
é—œæ³¨åƒ¹å€¼,è€Œéè¦å‰‡
```

---

#### ğŸ’¡ çµ¦ SA çš„å»ºè­°

ä½œç‚ºç³»çµ±åˆ†æå¸«,åœ¨ BDD ä¸­æ‰®æ¼”é—œéµçš„æ©‹æ¨‘è§’è‰²:

**1. æˆç‚ºæ¥­å‹™èˆ‡æŠ€è¡“çš„ç¿»è­¯è€…**
- ç”¨æ¥­å‹™èªè¨€æè¿°éœ€æ±‚
- å”åŠ©æŠ€è¡“åœ˜éšŠç†è§£æ¥­å‹™åƒ¹å€¼
- ç¢ºä¿ Feature Files æ¸…æ¥šå¯åŸ·è¡Œ

**2. å¼•å°é«˜æ•ˆçš„å”ä½œ**
- ä¸»æŒ Discovery Workshop
- çµ„ç¹” Three Amigos æœƒè­°
- ä¿ƒé€²è·¨è·èƒ½æºé€š

**3. æŒçºŒç²¾ç…‰è¦æ ¼**
- æ’°å¯«æ¸…æ™°çš„ Feature Files
- Review ä¸¦é‡æ§‹éæ™‚å ´æ™¯
- ç¶­è­· Living Documentation

**4. è¿½æ±‚æŒçºŒæ”¹å–„**
- æ”¶é›†åœ˜éšŠå›é¥‹
- å„ªåŒ– BDD æµç¨‹
- åˆ†äº«æˆåŠŸç¶“é©—

---

#### ğŸ“š ä¸‹ä¸€æ­¥è¡Œå‹•

**å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¸ BDD**:
1. é–±è®€ç¬¬ 1-3 ç« ,ç†è§£åŸºç¤æ¦‚å¿µ
2. å˜—è©¦æ’°å¯«ç¬¬ä¸€å€‹ Feature File
3. æ‰¾ä¸€å€‹ç°¡å–®åŠŸèƒ½ç·´ç¿’ Example Mapping
4. åŠ å…¥ BDD ç¤¾ç¾¤,æŒçºŒå­¸ç¿’

**å¦‚æœä½ æƒ³å°å…¥ BDD**:
1. è©•ä¼°çµ„ç¹”æˆç†Ÿåº¦(ç¬¬å…«ç« )
2. é¸æ“‡è©¦é»åœ˜éšŠèˆ‡å°ˆæ¡ˆ
3. èˆ‰è¾¦ BDD åŸ¹è¨“å·¥ä½œåŠ
4. å¾å°è™•é–‹å§‹,ç´¯ç©æˆåŠŸç¶“é©—

**å¦‚æœä½ å·²ç¶“åœ¨å¯¦è¸ BDD**:
1. Review ç¾æœ‰ Feature Files å“è³ª
2. å»ºç«‹ Feature Files é‡æ§‹æ©Ÿåˆ¶
3. æ•´åˆ AI å·¥å…·æå‡æ•ˆç‡
4. åˆ†äº«ç¶“é©—,å¹«åŠ©å…¶ä»–åœ˜éšŠ

---

#### ğŸ™ çµèª

BDD ä¸åƒ…åƒ…æ˜¯ä¸€ç¨®é–‹ç™¼æ–¹æ³•,æ›´æ˜¯ä¸€ç¨®**å”ä½œæ–‡åŒ–**èˆ‡**æ€ç¶­æ–¹å¼**ã€‚

å®ƒå¹«åŠ©æˆ‘å€‘:
- âœ… ç”¨**ç¯„ä¾‹**è€Œéæ–‡ä»¶æºé€š
- âœ… åœ¨**é–‹ç™¼å‰**è€Œéé–‹ç™¼å¾Œæ¸¬è©¦
- âœ… å»ºç«‹**è·¨è·èƒ½**è€Œéå­¤å³¶å¼çš„åœ˜éšŠ
- âœ… äº¤ä»˜**æ­£ç¢ºçš„ç”¢å“**è€Œéåªæ˜¯æ­£ç¢ºåœ°é–‹ç™¼

å¸Œæœ›é€™æœ¬æ•™å­¸æ‰‹å†Šèƒ½æˆç‚ºæ‚¨ BDD å¯¦è¸æ—…ç¨‹çš„è‰¯ä¼´ã€‚

**ç¥æ‚¨ BDD å¯¦è¸æˆåŠŸ!** ğŸ‰

---

## é™„éŒ„:å¿«é€Ÿåƒè€ƒå¡

### Gherkin èªæ³•ä¸€é é€ŸæŸ¥

```gherkin
# Feature File çµæ§‹
@tag1 @tag2
Feature: åŠŸèƒ½åç¨±
  ä½œç‚º [è§’è‰²]
  æˆ‘æƒ³è¦ [åŠŸèƒ½]
  ä»¥ä¾¿ [åƒ¹å€¼]

  Background:
    Given å…±ç”¨å‰ç½®æ¢ä»¶

  @scenario-tag
  Scenario: å ´æ™¯åç¨±
    Given å‰ç½®æ¢ä»¶
    When åŸ·è¡Œå‹•ä½œ
    Then é æœŸçµæœ
    And é¡å¤–æ­¥é©Ÿ
    But å°æ¯”æ­¥é©Ÿ

  Scenario Outline: åƒæ•¸åŒ–å ´æ™¯
    Given æˆ‘æœ‰ <param1>
    When æˆ‘åŸ·è¡Œ <param2>
    Then çµæœæ˜¯ <result>
    
    Examples:
      | param1 | param2 | result |
      | å€¼1    | å€¼2    | çµæœ1  |

  # è³‡æ–™è¡¨æ ¼
  Given è³‡æ–™å¦‚ä¸‹:
    | æ¬„ä½1 | æ¬„ä½2 |
    | å€¼1   | å€¼2   |

  # å¤šè¡Œæ–‡å­—
  Given JSON è³‡æ–™:
    """
    { "key": "value" }
    """
```

### Three Amigos å¿«é€ŸæŒ‡å—

```
æœƒè­°æ™‚é–“: 25 åˆ†é˜
åƒèˆ‡è€…: BA/SA, Dev, QA

æµç¨‹:
1. Review User Story (2åˆ†é˜)
2. è­˜åˆ¥æ¥­å‹™è¦å‰‡ (5åˆ†é˜)
3. æä¾›å…·é«”ç¯„ä¾‹ (10åˆ†é˜)
4. è¨˜éŒ„å•é¡Œ (5åˆ†é˜)
5. æ±ºå®š Ready? (3åˆ†é˜)

ç”¢å‡º:
- Example Map
- å•é¡Œæ¸…å–®
- Story ç‹€æ…‹
```

### Example Mapping é¡è‰²æŒ‡å—

```
ğŸŸ¨ é»ƒè‰² = æ¥­å‹™è¦å‰‡
ğŸŸ© ç¶ è‰² = å…·é«”ç¯„ä¾‹
ğŸŸ¥ ç´…è‰² = å¾…é‡æ¸…å•é¡Œ
ğŸŸ¦ è—è‰² = æŠ€è¡“è€ƒé‡
```

---

**ã€ŠBDDè¡Œç‚ºé©…å‹•é–‹ç™¼ä½¿ç”¨æ•™å­¸æ‰‹å†Šã€‹å®Œ**

**ç‰ˆæœ¬**: 1.0
**æœ€å¾Œæ›´æ–°**: 2025-01-15
**ä½œè€…**: [Eric Cheng]
**æˆæ¬Š**: [   ]

---

## æ„Ÿè¬é–±è®€!

å¦‚æœ‰ä»»ä½•å•é¡Œæˆ–å»ºè­°,æ­¡è¿è¯ç¹«æˆ–åˆ° GitHub æ Issueã€‚

æŒçºŒå­¸ç¿’,æŒçºŒæ”¹å–„,ç¥ BDD å¯¦è¸é †åˆ©! ğŸš€


